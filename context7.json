{
  "$schema": "https://context7.com/schema/context7.json",
  "projectTitle": "MBC CQRS Serverless Framework",
  "description": "Production-ready CQRS and Event Sourcing framework for building serverless applications on AWS with NestJS, DynamoDB, and other AWS services.",
  "folders": [
    "docs"
  ],
  "excludeFolders": [
    "node_modules",
    "build",
    ".docusaurus",
    "i18n/ja"
  ],
  "excludeFiles": [
    "*.json",
    "*.ts",
    "*.js",
    "*.css"
  ],
  "rules": [
    "Use CommandService.publishAsync() for asynchronous command processing (default), publishSync() only when immediate consistency is required",
    "All entities require pk (partition key) and sk (sort key) following the pattern: pk='ENTITY#tenantCode', sk='TYPE#code'",
    "Always include tenantCode from getUserContext() for multi-tenant operations",
    "Use VERSION_FIRST (0) for new entities, VERSION_LATEST (-1) for updates to get the latest version",
    "Implement IDataSyncHandler with @DataSyncHandler decorator to synchronize DynamoDB data to RDS",
    "Use class-validator decorators (@IsString, @IsNotEmpty, etc.) for DTO validation",
    "Import from @mbc-cqrs-serverless/core for CommandService, DataService, and common utilities",
    "Handle ConditionalCheckFailedException for optimistic locking conflicts in concurrent updates",
    "Use DetailKey type { pk: string, sk: string } for entity lookups",
    "Register modules with Module.register() pattern, e.g., SequenceModule.register({ enableController: true })"
  ]
}
