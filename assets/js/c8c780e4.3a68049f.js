"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[363],{948:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"modules","title":"Modules","description":"Learn how to create and configure modules in MBC CQRS Serverless.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/modules.md","sourceDirName":".","slug":"/modules","permalink":"/docs/modules","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"Learn how to create and configure modules in MBC CQRS Serverless."},"sidebar":"tutorialSidebar","previous":{"title":"Controllers","permalink":"/docs/controllers"},"next":{"title":"Event Handling Patterns","permalink":"/docs/event-handling-patterns"}}');var t=r(4848),d=r(8453);const l={description:"Learn how to create and configure modules in MBC CQRS Serverless."},i="Modules",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Module Structure",id:"module-structure",level:2},{value:"Module Components",id:"module-components",level:2},{value:"Framework Modules",id:"framework-modules",level:2},{value:"Core Modules",id:"core-modules",level:3},{value:"Feature Modules",id:"feature-modules",level:3},{value:"Support Modules",id:"support-modules",level:3},{value:"Dynamic Module Registration",id:"dynamic-module-registration",level:2},{value:"CommandModule",id:"commandmodule",level:3},{value:"SequencesModule",id:"sequencesmodule",level:3},{value:"MasterModule",id:"mastermodule",level:3},{value:"TaskModule",id:"taskmodule",level:3},{value:"ImportModule",id:"importmodule",level:3},{value:"SettingModule",id:"settingmodule",level:3},{value:"NotificationModule (Static)",id:"notificationmodule-static",level:3},{value:"Creating Custom Modules",id:"creating-custom-modules",level:2},{value:"Step 1: Create Module File",id:"step-1-create-module-file",level:3},{value:"Step 2: Register in AppModule",id:"step-2-register-in-appmodule",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"modules",children:"Modules"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["A module is a class annotated with a ",(0,t.jsx)(n.code,{children:"@Module()"})," decorator. The ",(0,t.jsx)(n.code,{children:"@Module()"})," decorator provides metadata that organizes the application structure. Modules encapsulate related functionality and follow the NestJS module pattern."]}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Your Application"\n        A["AppModule"]\n        A --\x3e B["CatModule"]\n        A --\x3e C["OrderModule"]\n        A --\x3e D["UserModule"]\n    end\n\n    subgraph "Framework Modules"\n        E["CommandModule"]\n        F["SequencesModule"]\n        G["TenantModule"]\n    end\n\n    B --\x3e E\n    C --\x3e E\n    C --\x3e F\n    D --\x3e G'}),"\n",(0,t.jsx)(n.h2,{id:"module-structure",children:"Module Structure"}),"\n",(0,t.jsx)(n.p,{children:"A typical module in MBC CQRS Serverless includes:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Module } from '@nestjs/common';\nimport { CommandModule } from '@mbc-cqrs-serverless/core';\n\nimport { CatController } from './cat.controller';\nimport { CatService } from './cat.service';\nimport { CatDataSyncRdsHandler } from './handler/cat-rds.handler';\n\n@Module({\n  imports: [\n    CommandModule.register({\n      tableName: 'cat',\n      dataSyncHandlers: [CatDataSyncRdsHandler],\n    }),\n  ],\n  controllers: [CatController],\n  providers: [CatService],\n  exports: [CatService],\n})\nexport class CatModule {}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"module-components",children:"Module Components"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Component"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"imports"})}),(0,t.jsx)(n.td,{children:"List of imported modules that export providers used in this module"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"controllers"})}),(0,t.jsx)(n.td,{children:"Controllers that handle HTTP requests"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"providers"})}),(0,t.jsx)(n.td,{children:"Services and other providers available for injection"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"exports"})}),(0,t.jsx)(n.td,{children:"Providers that should be available in modules that import this module"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"framework-modules",children:"Framework Modules"}),"\n",(0,t.jsx)(n.p,{children:"MBC CQRS Serverless provides several ready-to-use modules:"}),"\n",(0,t.jsx)(n.h3,{id:"core-modules",children:"Core Modules"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Module"}),(0,t.jsx)(n.th,{children:"Package"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CommandModule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@mbc-cqrs-serverless/core"})}),(0,t.jsx)(n.td,{children:"CQRS command handling and data sync"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SequencesModule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@mbc-cqrs-serverless/sequence"})}),(0,t.jsx)(n.td,{children:"Sequential ID generation"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TenantModule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@mbc-cqrs-serverless/tenant"})}),(0,t.jsx)(n.td,{children:"Multi-tenant management"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"feature-modules",children:"Feature Modules"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Module"}),(0,t.jsx)(n.th,{children:"Package"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TaskModule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@mbc-cqrs-serverless/task"})}),(0,t.jsx)(n.td,{children:"Async task execution with Step Functions"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"MasterModule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@mbc-cqrs-serverless/master"})}),(0,t.jsx)(n.td,{children:"Master data and settings management"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ImportModule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@mbc-cqrs-serverless/import"})}),(0,t.jsx)(n.td,{children:"CSV/API data import"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"support-modules",children:"Support Modules"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Module"}),(0,t.jsx)(n.th,{children:"Package"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"NotificationModule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@mbc-cqrs-serverless/core"})}),(0,t.jsx)(n.td,{children:"Email notifications via SES"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SettingModule"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@mbc-cqrs-serverless/ui-setting"})}),(0,t.jsx)(n.td,{children:"User interface settings storage"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"dynamic-module-registration",children:"Dynamic Module Registration"}),"\n",(0,t.jsx)(n.p,{children:"Most framework modules are dynamic modules that accept configuration:"}),"\n",(0,t.jsx)(n.h3,{id:"commandmodule",children:"CommandModule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"CommandModule.register({\n  tableName: 'cat',\n  dataSyncHandlers: [CatDataSyncRdsHandler],\n  skipError: false,\n  disableDefaultHandler: false,\n})\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tableName"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Required"}),(0,t.jsx)(n.td,{children:"DynamoDB table name (without postfix)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"dataSyncHandlers"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Type[]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[]"})}),(0,t.jsx)(n.td,{children:"Data sync handler classes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"skipError"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"Reserved for future use (not yet implemented)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"disableDefaultHandler"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"Disable default DynamoDB data sync handler"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"sequencesmodule",children:"SequencesModule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"SequencesModule.register({\n  enableController: true,\n})\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mastermodule",children:"MasterModule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"MasterModule.register({\n  enableController: true,\n  prismaService: PrismaService,\n})\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"MasterModule Configuration Note",type:"warning",children:(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"enableController: true"}),", the ",(0,t.jsx)(n.code,{children:"prismaService"})," parameter is ",(0,t.jsx)(n.strong,{children:"required"}),". You must provide your application's PrismaService class. The framework will throw an error if ",(0,t.jsx)(n.code,{children:"prismaService"})," is not provided when controllers are enabled."]})}),"\n",(0,t.jsx)(n.h3,{id:"taskmodule",children:"TaskModule"}),"\n",(0,t.jsxs)(n.p,{children:["TaskModule handles asynchronous task execution using AWS Step Functions. It requires a custom event factory that implements ",(0,t.jsx)(n.code,{children:"ITaskQueueEventFactory"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { TaskModule } from '@mbc-cqrs-serverless/task';\nimport { MyTaskQueueEventFactory } from './my-task-queue-event.factory';\n\nTaskModule.register({\n  taskQueueEventFactory: MyTaskQueueEventFactory,\n  enableController: true,\n})\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"taskQueueEventFactory"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Type<ITaskQueueEventFactory>"})}),(0,t.jsx)(n.td,{children:"Required"}),(0,t.jsx)(n.td,{children:"Factory class for transforming task queue events"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"enableController"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"Enable built-in task REST endpoints"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"taskQueueEventFactory"})," must implement the ",(0,t.jsx)(n.code,{children:"ITaskQueueEventFactory"})," interface. Both methods are optional - implement only what you need:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { ITaskQueueEventFactory, TaskQueueEvent, StepFunctionTaskEvent } from '@mbc-cqrs-serverless/task';\nimport { IEvent } from '@mbc-cqrs-serverless/core';\nimport { MyTaskEvent } from './my-task.event';\nimport { MyStepFunctionTaskEvent } from './my-sfn-task.event';\n\nexport class MyTaskQueueEventFactory implements ITaskQueueEventFactory {\n  // Optional: Transform SQS task queue events into domain events\n  async transformTask(event: TaskQueueEvent): Promise<IEvent[]> {\n    // Create domain-specific events from task queue events\n    return [new MyTaskEvent().fromSqsRecord(event)];\n  }\n\n  // Optional: Transform Step Function task events into domain events\n  async transformStepFunctionTask(event: StepFunctionTaskEvent): Promise<IEvent[]> {\n    // Check taskKey.sk to determine which event type to create\n    if (event.taskKey.sk.startsWith('MY_TASK')) {\n      return [new MyStepFunctionTaskEvent(event)];\n    }\n    return [];\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"importmodule",children:"ImportModule"}),"\n",(0,t.jsx)(n.p,{children:"The ImportModule provides CSV and API data import functionality. It requires defining import profiles that specify how data should be imported and processed for each entity type."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { ImportModule } from '@mbc-cqrs-serverless/import';\nimport { PolicyImportStrategy } from './strategies/policy-import.strategy';\nimport { PolicyProcessStrategy } from './strategies/policy-process.strategy';\nimport { PolicyModule } from './policy.module';\n\n@Module({\n  imports: [\n    ImportModule.register({\n      profiles: [\n        {\n          tableName: 'policy',\n          importStrategy: PolicyImportStrategy,\n          processStrategy: PolicyProcessStrategy,\n        },\n      ],\n      imports: [PolicyModule], // Modules that export providers needed by strategies\n      enableController: true,\n    }),\n  ],\n})\nexport class AppModule {}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"profiles"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ImportEntityProfile[]"})}),(0,t.jsx)(n.td,{children:"Required"}),(0,t.jsx)(n.td,{children:"Array of import profiles for each entity type"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"imports"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ModuleMetadata['imports']"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[]"})}),(0,t.jsx)(n.td,{children:"Modules that export providers needed by strategy classes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"enableController"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsxs)(n.td,{children:["Enable built-in ",(0,t.jsx)(n.code,{children:"/import"})," and ",(0,t.jsx)(n.code,{children:"/import/csv"})," endpoints"]})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Each ",(0,t.jsx)(n.code,{children:"ImportEntityProfile"})," requires:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tableName"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Unique identifier for the data type (e.g., 'policy', 'user')"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"importStrategy"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Type<IImportStrategy>"})}),(0,t.jsx)(n.td,{children:"Class implementing import logic (transform & validate)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"processStrategy"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Type<IProcessStrategy>"})}),(0,t.jsx)(n.td,{children:"Class implementing business processing logic (compare & map)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"settingmodule",children:"SettingModule"}),"\n",(0,t.jsx)(n.p,{children:"The SettingModule manages user interface settings. It can optionally expose REST endpoints for managing settings."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { SettingModule } from '@mbc-cqrs-serverless/ui-setting';\n\n@Module({\n  imports: [\n    SettingModule.register({\n      enableSettingController: true,\n      enableDataController: true,\n    }),\n  ],\n})\nexport class AppModule {}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"enableSettingController"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"Enable the setting controller for UI settings management"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"enableDataController"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"Enable the data setting controller for data-related settings"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"notificationmodule-static",children:"NotificationModule (Static)"}),"\n",(0,t.jsx)(n.p,{children:"The NotificationModule is a static (not dynamic) module that provides email notifications via SES and real-time updates via AppSync. It is automatically registered as a global module, so you only need to import it once in your AppModule."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { NotificationModule } from '@mbc-cqrs-serverless/core';\n\n@Module({\n  imports: [\n    NotificationModule, // No configuration needed - static module\n  ],\n})\nexport class AppModule {}\n"})}),"\n",(0,t.jsx)(n.p,{children:"This module exports:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"EmailService"})," - Send emails via Amazon SES"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AppSyncService"})," - Send real-time notifications via AppSync"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"creating-custom-modules",children:"Creating Custom Modules"}),"\n",(0,t.jsx)(n.h3,{id:"step-1-create-module-file",children:"Step 1: Create Module File"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/order/order.module.ts\nimport { Module } from '@nestjs/common';\nimport { CommandModule } from '@mbc-cqrs-serverless/core';\nimport { SequencesModule } from '@mbc-cqrs-serverless/sequence';\n\nimport { OrderController } from './order.controller';\nimport { OrderService } from './order.service';\nimport { OrderDataSyncHandler } from './handlers/order-data-sync.handler';\n\n@Module({\n  imports: [\n    CommandModule.register({\n      tableName: 'order',\n      dataSyncHandlers: [OrderDataSyncHandler],\n    }),\n    SequencesModule.register({\n      enableController: false,\n    }),\n  ],\n  controllers: [OrderController],\n  providers: [OrderService],\n  exports: [OrderService],\n})\nexport class OrderModule {}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-2-register-in-appmodule",children:"Step 2: Register in AppModule"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/app.module.ts\nimport { Module } from '@nestjs/common';\nimport { OrderModule } from './order/order.module';\n\n@Module({\n  imports: [OrderModule],\n})\nexport class AppModule {}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"One module per entity"}),": Create a dedicated module for each business entity"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Export services, not controllers"}),": Only export providers that other modules need"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use forRoot for global modules"}),": Register global configuration once in AppModule"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Keep modules focused"}),": Each module should have a single responsibility"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://docs.nestjs.com/modules",children:"NestJS Modules"}),": Official NestJS module documentation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/command-service",children:"CommandService"}),": Detailed CommandModule configuration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/event-handling-patterns",children:"Event Handling Patterns"}),": Creating data sync handlers"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>i});var s=r(6540);const t={},d=s.createContext(t);function l(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);