"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[3215],{1767:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"master","title":"Master","description":"Learn about the Master Service for managing master data and settings in a multi-tenant environment.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/master.md","sourceDirName":".","slug":"/master","permalink":"/docs/master","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"Learn about the Master Service for managing master data and settings in a multi-tenant environment."},"sidebar":"tutorialSidebar","previous":{"title":"Tenant","permalink":"/docs/tenant"},"next":{"title":"Directory","permalink":"/docs/directory"}}');var a=n(4848),s=n(8453);const o={description:"Learn about the Master Service for managing master data and settings in a multi-tenant environment."},r="Master",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Master Setting Service",id:"master-setting-service",level:3},{value:"Master Data Service",id:"master-data-service",level:3},{value:"Architecture",id:"architecture",level:2},{value:"Installation",id:"installation",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Module Options",id:"module-options",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"MasterSettingService",id:"mastersettingservice",level:3},{value:"<code>getSetting(dto: GetSettingDto, context: { invokeContext: IInvoke }): Promise&lt;MasterSettingEntity&gt;</code>",id:"getsettingdto-getsettingdto-context--invokecontext-iinvoke--promisemastersettingentity",level:5},{value:"<code>createCommonTenantSetting(dto: CommonSettingDto, context: { invokeContext: IInvoke }): Promise&lt;CommandModel&gt;</code>",id:"createcommontenantsettingdto-commonsettingdto-context--invokecontext-iinvoke--promisecommandmodel",level:4},{value:"<code>createTenantSetting(dto: TenantSettingDto, context: { invokeContext: IInvoke }): Promise&lt;CommandModel&gt;</code>",id:"createtenantsettingdto-tenantsettingdto-context--invokecontext-iinvoke--promisecommandmodel",level:4},{value:"<code>createGroupSetting(dto: GroupSettingDto, context: { invokeContext: IInvoke }): Promise&lt;CommandModel&gt;</code>",id:"creategroupsettingdto-groupsettingdto-context--invokecontext-iinvoke--promisecommandmodel",level:4},{value:"<code>createUserSetting(dto: UserSettingDto, context: { invokeContext: IInvoke }): Promise&lt;CommandModel&gt;</code>",id:"createusersettingdto-usersettingdto-context--invokecontext-iinvoke--promisecommandmodel",level:4},{value:"<code>updateSetting(params: DetailKey, dto: UpdateSettingDto, context: { invokeContext: IInvoke }): Promise&lt;CommandModel&gt;</code>",id:"updatesettingparams-detailkey-dto-updatesettingdto-context--invokecontext-iinvoke--promisecommandmodel",level:4},{value:"<code>deleteSetting(key: DetailKey, context: { invokeContext: IInvoke }): Promise&lt;CommandModel&gt;</code>",id:"deletesettingkey-detailkey-context--invokecontext-iinvoke--promisecommandmodel",level:4},{value:"<code>list(searchDto: MasterSettingSearchDto, invokeContext: IInvoke): Promise&lt;MasterRdsListEntity&gt;</code>",id:"listsearchdto-mastersettingsearchdto-invokecontext-iinvoke-promisemasterrdslistentity",level:4},{value:"<code>getDetail(key: DetailDto): Promise&lt;MasterRdsEntity&gt;</code>",id:"getdetailkey-detaildto-promisemasterrdsentity",level:4},{value:"<code>create(createDto: CommonSettingDto, invokeContext: IInvoke): Promise&lt;CommandModel&gt;</code>",id:"createcreatedto-commonsettingdto-invokecontext-iinvoke-promisecommandmodel",level:4},{value:"<code>createBulk(createDto: CommonSettingBulkDto, invokeContext: IInvoke): Promise&lt;CommandModel[]&gt;</code>",id:"createbulkcreatedto-commonsettingbulkdto-invokecontext-iinvoke-promisecommandmodel",level:4},{value:"<code>update(key: DetailDto, updateDto: MasterSettingUpdateDto, invokeContext: IInvoke): Promise&lt;CommandModel&gt;</code>",id:"updatekey-detaildto-updatedto-mastersettingupdatedto-invokecontext-iinvoke-promisecommandmodel",level:4},{value:"<code>delete(key: DetailDto, invokeContext: IInvoke): Promise&lt;CommandModel&gt;</code>",id:"deletekey-detaildto-invokecontext-iinvoke-promisecommandmodel",level:4},{value:"<code>checkExistCode(code: string, invokeContext: IInvoke): Promise&lt;boolean&gt;</code>",id:"checkexistcodecode-string-invokecontext-iinvoke-promiseboolean",level:4},{value:"<code>copy(masterCopyDto: MasterCopyDto, opts: { invokeContext: IInvoke }): Promise&lt;any&gt;</code>",id:"copymastercopydto-mastercopydto-opts--invokecontext-iinvoke--promiseany",level:4},{value:"MasterDataService",id:"masterdataservice",level:3},{value:"<code>list(searchDto: MasterDataSearchDto): Promise&lt;MasterDataListEntity&gt;</code>",id:"listsearchdto-masterdatasearchdto-promisemasterdatalistentity",level:4},{value:"<code>get(key: DetailDto): Promise&lt;MasterDataEntity&gt;</code>",id:"getkey-detaildto-promisemasterdataentity",level:4},{value:"<code>create(data: CreateMasterDataDto, context: { invokeContext: IInvoke }): Promise&lt;MasterDataEntity&gt;</code>",id:"createdata-createmasterdatadto-context--invokecontext-iinvoke--promisemasterdataentity",level:4},{value:"<code>update(key: DetailDto, updateDto: UpdateDataSettingDto, context: { invokeContext: IInvoke }): Promise&lt;MasterDataEntity&gt;</code>",id:"updatekey-detaildto-updatedto-updatedatasettingdto-context--invokecontext-iinvoke--promisemasterdataentity",level:4},{value:"<code>delete(key: DetailDto, opts: { invokeContext: IInvoke }): Promise&lt;MasterDataEntity&gt;</code>",id:"deletekey-detaildto-opts--invokecontext-iinvoke--promisemasterdataentity",level:4},{value:"<code>checkExistCode(tenantCode: string, type: string, code: string): Promise&lt;boolean&gt;</code>",id:"checkexistcodetenantcode-string-type-string-code-string-promiseboolean",level:4},{value:"<code>getDetail(key: DetailDto): Promise&lt;MasterRdsEntity&gt;</code>",id:"getdetailkey-detaildto-promisemasterrdsentity-1",level:4},{value:"<code>createSetting(createDto: MasterDataCreateDto, invokeContext: IInvoke): Promise&lt;MasterDataEntity&gt;</code>",id:"createsettingcreatedto-masterdatacreatedto-invokecontext-iinvoke-promisemasterdataentity",level:4},{value:"<code>createBulk(createDto: MasterDataCreateBulkDto, invokeContext: IInvoke): Promise&lt;MasterDataEntity[]&gt;</code>",id:"createbulkcreatedto-masterdatacreatebulkdto-invokecontext-iinvoke-promisemasterdataentity",level:4},{value:"<code>updateSetting(key: DetailDto, updateDto: MasterDataUpdateDto, invokeContext: IInvoke): Promise&lt;MasterDataEntity&gt;</code>",id:"updatesettingkey-detaildto-updatedto-masterdataupdatedto-invokecontext-iinvoke-promisemasterdataentity",level:4},{value:"<code>deleteSetting(key: DetailDto, invokeContext: IInvoke): Promise&lt;MasterDataEntity&gt;</code>",id:"deletesettingkey-detaildto-invokecontext-iinvoke-promisemasterdataentity",level:4},{value:"<code>listByRds(searchDto: CustomMasterDataSearchDto, context: { invokeContext: IInvoke }): Promise&lt;MasterRdsListEntity&gt;</code>",id:"listbyrdssearchdto-custommasterdatasearchdto-context--invokecontext-iinvoke--promisemasterrdslistentity",level:4},{value:"Search Parameters",id:"search-parameters",level:5}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"master",children:"Master"})}),"\n",(0,a.jsx)(t.p,{children:"The Master Service provides functionality for managing master data and settings in a multi-tenant environment"}),"\n",(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(t.p,{children:"The Master Service consists of two main components:"}),"\n",(0,a.jsx)(t.h3,{id:"master-setting-service",children:"Master Setting Service"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Implements hierarchical settings management"}),"\n",(0,a.jsx)(t.li,{children:"Supports creation of settings at all levels"}),"\n",(0,a.jsx)(t.li,{children:"Provides update and delete operations for tenant settings"}),"\n",(0,a.jsx)(t.li,{children:"Implements cascading settings retrieval"}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"master-data-service",children:"Master Data Service"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Implements CRUD operations for master data entities"}),"\n",(0,a.jsx)(t.li,{children:"Provides list and retrieval functionality"}),"\n",(0,a.jsx)(t.li,{children:"Includes code validation capabilities"}),"\n",(0,a.jsx)(t.li,{children:"Ensures data integrity across tenant boundaries"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"architecture",children:"Architecture"}),"\n",(0,a.jsx)(t.mermaid,{value:'graph TB\n    subgraph "Settings Hierarchy"\n        A["COMMON"] --\x3e B["Tenant"]\n        B --\x3e C["Group"]\n        C --\x3e D["User"]\n    end\n\n    subgraph "Master Data"\n        E["MasterDataService"] --\x3e F["Code Tables"]\n        E --\x3e G["Categories"]\n        E --\x3e H["Lookup Values"]\n    end'}),"\n",(0,a.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"npm install @mbc-cqrs-serverless/master\n"})}),"\n",(0,a.jsx)(t.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,a.jsxs)(t.p,{children:["The solution for customizing the behavior of the ",(0,a.jsx)(t.code,{children:"MasterModule"})," is to pass it an options ",(0,a.jsx)(t.code,{children:"object"})," in the static ",(0,a.jsx)(t.code,{children:"register()"})," method."]}),"\n",(0,a.jsx)(t.h3,{id:"module-options",children:"Module Options"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Option"}),(0,a.jsx)(t.th,{children:"Type"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"enableController"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"boolean"})}),(0,a.jsx)(t.td,{children:"Enable or disable default master controller"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"dataSyncHandlers"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"Type<IDataSyncHandler>[]"})}),(0,a.jsx)(t.td,{children:"Optional handlers to sync master data to external systems (e.g., RDS)"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"prismaService"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"Type<any>"})}),(0,a.jsxs)(t.td,{children:["Prisma service for RDS-backed queries. Required when ",(0,a.jsx)(t.code,{children:"enableController: true"})]})]})]})]}),"\n",(0,a.jsx)(t.admonition,{title:"prismaService Requirement",type:"warning",children:(0,a.jsxs)(t.p,{children:["When ",(0,a.jsx)(t.code,{children:"enableController: true"}),", the ",(0,a.jsx)(t.code,{children:"prismaService"})," parameter is ",(0,a.jsx)(t.strong,{children:"required"}),". The module will throw an error at startup if ",(0,a.jsx)(t.code,{children:"prismaService"})," is not provided when the controller is enabled."]})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:"import { MasterModule } from '@mbc-cqrs-serverless/master'\n\n@Module({\n  imports: [ MasterModule.register({\n      enableController: true,\n      dataSyncHandlers: [MasterDataRdsSyncHandler],\n      prismaService: PrismaService,\n    })],\n  controllers: [],\n  exports: [],\n})\n\n"})}),"\n",(0,a.jsx)(t.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,a.jsx)(t.h3,{id:"mastersettingservice",children:"MasterSettingService"}),"\n",(0,a.jsx)(t.p,{children:"The MasterSettingService interface manages settings at various levels user, group, tenant, common. It allows retrieving, updating, creating, and deleting settings."}),"\n",(0,a.jsx)(t.h5,{id:"getsettingdto-getsettingdto-context--invokecontext-iinvoke--promisemastersettingentity",children:(0,a.jsx)(t.code,{children:"getSetting(dto: GetSettingDto, context: { invokeContext: IInvoke }): Promise<MasterSettingEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Retrieves a specific setting based on the provided setting code."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterSetting = await this.masterSettingService.getSetting(\n  {\n    code: "service",\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"createcommontenantsettingdto-commonsettingdto-context--invokecontext-iinvoke--promisecommandmodel",children:(0,a.jsx)(t.code,{children:"createCommonTenantSetting(dto: CommonSettingDto, context: { invokeContext: IInvoke }): Promise<CommandModel>"})}),"\n",(0,a.jsx)(t.p,{children:"Creates a common tenant setting that is shared across the system."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterSetting = await this.masterSettingService.createCommonTenantSetting(\n  {\n    name: "common setting",\n    code: "service",\n    settingValue: {\n      region: "US",\n      plan: "common"\n    }\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"createtenantsettingdto-tenantsettingdto-context--invokecontext-iinvoke--promisecommandmodel",children:(0,a.jsx)(t.code,{children:"createTenantSetting(dto: TenantSettingDto, context: { invokeContext: IInvoke }): Promise<CommandModel>"})}),"\n",(0,a.jsx)(t.p,{children:"Creates a tenant-specific setting."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterSetting = await this.masterSettingService.createTenantSetting(\n  {\n    name: "tenant setting",\n    code: "service",\n    tenantCode: "mbc",\n    settingValue: {\n      region: "US",\n      plan: "tenant"\n    }\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"creategroupsettingdto-groupsettingdto-context--invokecontext-iinvoke--promisecommandmodel",children:(0,a.jsx)(t.code,{children:"createGroupSetting(dto: GroupSettingDto, context: { invokeContext: IInvoke }): Promise<CommandModel>"})}),"\n",(0,a.jsx)(t.p,{children:"Creates a group-specific setting within a tenant."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterSetting = await this.masterSettingService.createGroupSetting(\n  {\n    name: "group setting",\n    code: "service",\n    tenantCode: "mbc",\n    groupId: "12",\n    settingValue: {\n      region: "US",\n      plan: "USER"\n    }\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"createusersettingdto-usersettingdto-context--invokecontext-iinvoke--promisecommandmodel",children:(0,a.jsx)(t.code,{children:"createUserSetting(dto: UserSettingDto, context: { invokeContext: IInvoke }): Promise<CommandModel>"})}),"\n",(0,a.jsx)(t.p,{children:"Creates a user-specific setting within a tenant."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterSetting = await this.masterSettingService.createUserSetting(\n  {\n    name: "user setting",\n    code: "service",\n    tenantCode: "mbc",\n    userId: "92ca4f68-9ac6-4080-9ae2-2f02a86206a4",\n    settingValue: {\n      region: "US",\n      plan: "USER"\n    }\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"updatesettingparams-detailkey-dto-updatesettingdto-context--invokecontext-iinvoke--promisecommandmodel",children:(0,a.jsx)(t.code,{children:"updateSetting(params: DetailKey, dto: UpdateSettingDto, context: { invokeContext: IInvoke }): Promise<CommandModel>"})}),"\n",(0,a.jsx)(t.p,{children:"Updates an existing setting."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterSetting = await this.masterSettingService.updateSetting(\n  {\n    pk: "MASTER#abc",\n    sk: "MASTER_SETTING#service"\n  },\n  {\n    name: \'Example Master Setting\',\n    settingValue: {\n      homepage: "url",\n      desc: "string"\n    }\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"deletesettingkey-detailkey-context--invokecontext-iinvoke--promisecommandmodel",children:(0,a.jsx)(t.code,{children:"deleteSetting(key: DetailKey, context: { invokeContext: IInvoke }): Promise<CommandModel>"})}),"\n",(0,a.jsx)(t.p,{children:"Deletes a specific setting based on the provided key."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterSetting = await this.masterSettingService.deleteSetting(\n  {\n    pk: "MASTER#abc",\n    sk: "MASTER_SETTING#service"\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"listsearchdto-mastersettingsearchdto-invokecontext-iinvoke-promisemasterrdslistentity",children:(0,a.jsx)(t.code,{children:"list(searchDto: MasterSettingSearchDto, invokeContext: IInvoke): Promise<MasterRdsListEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Lists master settings with pagination and filtering. Requires RDS (Prisma) configuration."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const result = await this.masterSettingService.list(\n  {\n    name: "service",           // Partial match for name\n    code: "SVC",               // Partial match for code\n    keyword: "description",    // Search in attributes.description\n    page: 1,\n    pageSize: 10,\n    orderBys: ["-createdAt"],\n  },\n  invokeContext\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"getdetailkey-detaildto-promisemasterrdsentity",children:(0,a.jsx)(t.code,{children:"getDetail(key: DetailDto): Promise<MasterRdsEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Retrieves detailed master setting. Throws NotFoundException if not found."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterSetting = await this.masterSettingService.getDetail({\n  pk: "MASTER#mbc",\n  sk: "MASTER_SETTING#service"\n});\n'})}),"\n",(0,a.jsx)(t.h4,{id:"createcreatedto-commonsettingdto-invokecontext-iinvoke-promisecommandmodel",children:(0,a.jsx)(t.code,{children:"create(createDto: CommonSettingDto, invokeContext: IInvoke): Promise<CommandModel>"})}),"\n",(0,a.jsx)(t.p,{children:"Creates a new tenant setting. Wrapper for createTenantSetting with automatic tenant code extraction from context."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterSetting = await this.masterSettingService.create(\n  {\n    code: "service",\n    name: "Service Setting",\n    settingValue: { key: "value" }\n  },\n  invokeContext\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"createbulkcreatedto-commonsettingbulkdto-invokecontext-iinvoke-promisecommandmodel",children:(0,a.jsx)(t.code,{children:"createBulk(createDto: CommonSettingBulkDto, invokeContext: IInvoke): Promise<CommandModel[]>"})}),"\n",(0,a.jsx)(t.p,{children:"Creates multiple settings at once."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const settings = await this.masterSettingService.createBulk(\n  {\n    items: [\n      { code: "setting1", name: "Setting 1", settingValue: {} },\n      { code: "setting2", name: "Setting 2", settingValue: {} }\n    ]\n  },\n  invokeContext\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"updatekey-detaildto-updatedto-mastersettingupdatedto-invokecontext-iinvoke-promisecommandmodel",children:(0,a.jsx)(t.code,{children:"update(key: DetailDto, updateDto: MasterSettingUpdateDto, invokeContext: IInvoke): Promise<CommandModel>"})}),"\n",(0,a.jsx)(t.p,{children:"Updates a master setting."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const result = await this.masterSettingService.update(\n  { pk: "MASTER#mbc", sk: "MASTER_SETTING#service" },\n  {\n    name: "Updated Setting",\n    attributes: { newKey: "newValue" }\n  },\n  invokeContext\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"deletekey-detaildto-invokecontext-iinvoke-promisecommandmodel",children:(0,a.jsx)(t.code,{children:"delete(key: DetailDto, invokeContext: IInvoke): Promise<CommandModel>"})}),"\n",(0,a.jsx)(t.p,{children:"Deletes a master setting. Wrapper for deleteSetting."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'await this.masterSettingService.delete(\n  { pk: "MASTER#mbc", sk: "MASTER_SETTING#service" },\n  invokeContext\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"checkexistcodecode-string-invokecontext-iinvoke-promiseboolean",children:(0,a.jsx)(t.code,{children:"checkExistCode(code: string, invokeContext: IInvoke): Promise<boolean>"})}),"\n",(0,a.jsx)(t.p,{children:"Checks if a setting code already exists for the current tenant."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const exists = await this.masterSettingService.checkExistCode("service", invokeContext);\nif (exists) {\n  // Handle duplicate code\n}\n'})}),"\n",(0,a.jsx)(t.h4,{id:"copymastercopydto-mastercopydto-opts--invokecontext-iinvoke--promiseany",children:(0,a.jsx)(t.code,{children:"copy(masterCopyDto: MasterCopyDto, opts: { invokeContext: IInvoke }): Promise<any>"})}),"\n",(0,a.jsx)(t.p,{children:"Copies master settings and data to other tenants asynchronously using Step Functions. This is useful for initializing new tenants with existing master data."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const task = await this.masterSettingService.copy(\n  {\n    masterSettingId: "MASTER#mbc#MASTER_SETTING#service",\n    targetTenants: ["tenant1", "tenant2"],\n    copyType: CopyType.BOTH,   // CopyType.SETTING_ONLY, CopyType.DATA_ONLY, or CopyType.BOTH\n    dataCopyOption: {\n      mode: DataCopyMode.ALL,  // or DataCopyMode.PARTIAL\n      // id: ["id1", "id2"]    // Required when mode is PARTIAL\n    }\n  },\n  { invokeContext }\n);\n// Returns a task entity - the copy operation runs asynchronously\n'})}),"\n",(0,a.jsx)(t.p,{children:"Copy types:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"CopyType.SETTING_ONLY"}),": Copies only the setting"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"CopyType.DATA_ONLY"}),": Copies only the data"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"CopyType.BOTH"}),": Copies both setting and data"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Data copy modes (used when copyType is DATA_ONLY or BOTH):"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"DataCopyMode.ALL"}),": Copies all master data under the setting"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"DataCopyMode.PARTIAL"}),": Copies only specified IDs"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"masterdataservice",children:"MasterDataService"}),"\n",(0,a.jsx)(t.p,{children:"The MasterDataService service provides methods to manage master data and operations. This includes listing, retrieving, creating, updating, and deleting data, as well as checking for the existence of specific codes."}),"\n",(0,a.jsx)(t.h4,{id:"listsearchdto-masterdatasearchdto-promisemasterdatalistentity",children:(0,a.jsx)(t.code,{children:"list(searchDto: MasterDataSearchDto): Promise<MasterDataListEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Lists master data based on the provided search criteria. Note: This method does not require an invoke context."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterData = await this.masterDataService.list({\n  tenantCode: "mbc",\n  settingCode: "service"\n});\n'})}),"\n",(0,a.jsx)(t.h4,{id:"getkey-detaildto-promisemasterdataentity",children:(0,a.jsx)(t.code,{children:"get(key: DetailDto): Promise<MasterDataEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Get a master data by pk and sk."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterData = await this.masterDataService.get(\n  {\n    pk:"MASTER#abc", \n    sk:"MASTER_DATA#service#01"\n  }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"createdata-createmasterdatadto-context--invokecontext-iinvoke--promisemasterdataentity",children:(0,a.jsx)(t.code,{children:"create(data: CreateMasterDataDto, context: { invokeContext: IInvoke }): Promise<MasterDataEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Creates a new master data entity"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterData = await this.masterDataService.create(\n  {\n    code: \'MASTER001\',\n    name: \'Example Master Data\',\n    settingCode: "service",\n    tenantCode: "common",\n    attributes: {\n      homepage: "http://mbc.com",\n      desc: "description for mbc"\n    }\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"updatekey-detaildto-updatedto-updatedatasettingdto-context--invokecontext-iinvoke--promisemasterdataentity",children:(0,a.jsx)(t.code,{children:"update(key: DetailDto, updateDto: UpdateDataSettingDto, context: { invokeContext: IInvoke }): Promise<MasterDataEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Updates existing master data."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterData = await this.masterDataService.update(\n  {\n    pk: "MASTER#abc",\n    sk: "MASTER_DATA#service#01"\n  },\n  {\n    name: \'Example Master Data\',\n    attributes: {\n      homepage: "http://mbc.com",\n      desc: "description for mbc"\n    }\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"deletekey-detaildto-opts--invokecontext-iinvoke--promisemasterdataentity",children:(0,a.jsx)(t.code,{children:"delete(key: DetailDto, opts: { invokeContext: IInvoke }): Promise<MasterDataEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Deletes specific master data based on the provided key."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterData = await this.masterDataService.delete(\n  {\n    pk: "MASTER#abc",\n    sk: "MASTER_DATA#service#01"\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"checkexistcodetenantcode-string-type-string-code-string-promiseboolean",children:(0,a.jsx)(t.code,{children:"checkExistCode(tenantCode: string, type: string, code: string): Promise<boolean>"})}),"\n",(0,a.jsx)(t.p,{children:"Checks if a specific code exists within the given tenant and type."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const exists = await this.masterDataService.checkExistCode("mbc", "service", "01");\nif (exists) {\n  // Handle existing code\n}\n'})}),"\n",(0,a.jsx)(t.h4,{id:"getdetailkey-detaildto-promisemasterrdsentity-1",children:(0,a.jsx)(t.code,{children:"getDetail(key: DetailDto): Promise<MasterRdsEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Retrieves detailed master data including related information. Throws NotFoundException if not found."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterData = await this.masterDataService.getDetail({\n  pk: "MASTER#mbc",\n  sk: "MASTER_DATA#service#01"\n});\n'})}),"\n",(0,a.jsx)(t.h4,{id:"createsettingcreatedto-masterdatacreatedto-invokecontext-iinvoke-promisemasterdataentity",children:(0,a.jsx)(t.code,{children:"createSetting(createDto: MasterDataCreateDto, invokeContext: IInvoke): Promise<MasterDataEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Creates a new master data entity with automatic sequence generation if not provided."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterData = await this.masterDataService.createSetting(\n  {\n    code: \'MASTER001\',\n    name: \'Example Master Data\',\n    settingCode: "service",\n    tenantCode: "mbc",\n    attributes: {\n      homepage: "http://mbc.com",\n      desc: "description for mbc"\n    }\n  },\n  invokeContext\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"createbulkcreatedto-masterdatacreatebulkdto-invokecontext-iinvoke-promisemasterdataentity",children:(0,a.jsx)(t.code,{children:"createBulk(createDto: MasterDataCreateBulkDto, invokeContext: IInvoke): Promise<MasterDataEntity[]>"})}),"\n",(0,a.jsx)(t.p,{children:"Creates multiple master data entities in bulk."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:"const masterDataList = await this.masterDataService.createBulk(\n  {\n    items: [\n      {\n        code: 'MASTER001',\n        name: 'First Master Data',\n        settingCode: \"service\",\n        tenantCode: \"mbc\",\n        attributes: {}\n      },\n      {\n        code: 'MASTER002',\n        name: 'Second Master Data',\n        settingCode: \"service\",\n        tenantCode: \"mbc\",\n        attributes: {}\n      }\n    ]\n  },\n  invokeContext\n);\n"})}),"\n",(0,a.jsx)(t.h4,{id:"updatesettingkey-detaildto-updatedto-masterdataupdatedto-invokecontext-iinvoke-promisemasterdataentity",children:(0,a.jsx)(t.code,{children:"updateSetting(key: DetailDto, updateDto: MasterDataUpdateDto, invokeContext: IInvoke): Promise<MasterDataEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Updates an existing master data entity."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const masterData = await this.masterDataService.updateSetting(\n  {\n    pk: "MASTER#mbc",\n    sk: "MASTER_DATA#service#01"\n  },\n  {\n    name: \'Updated Master Data\',\n    attributes: {\n      homepage: "http://updated-mbc.com"\n    }\n  },\n  invokeContext\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"deletesettingkey-detaildto-invokecontext-iinvoke-promisemasterdataentity",children:(0,a.jsx)(t.code,{children:"deleteSetting(key: DetailDto, invokeContext: IInvoke): Promise<MasterDataEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Deletes a master data entity by key."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const result = await this.masterDataService.deleteSetting(\n  {\n    pk: "MASTER#mbc",\n    sk: "MASTER_DATA#service#01"\n  },\n  invokeContext\n);\n'})}),"\n",(0,a.jsx)(t.h4,{id:"listbyrdssearchdto-custommasterdatasearchdto-context--invokecontext-iinvoke--promisemasterrdslistentity",children:(0,a.jsx)(t.code,{children:"listByRds(searchDto: CustomMasterDataSearchDto, context: { invokeContext: IInvoke }): Promise<MasterRdsListEntity>"})}),"\n",(0,a.jsx)(t.p,{children:"Searches master data in RDS with filtering and pagination. This method is used when Prisma service is configured."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const result = await this.masterDataService.listByRds(\n  {\n    settingCode: "service",    // Exact match for master type code\n    keyword: "example",        // Partial match (case-insensitive) for name\n    code: "001",               // Partial match (case-insensitive) for master code\n    page: 1,\n    pageSize: 10,\n    orderBys: ["seq", "masterCode"],\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,a.jsx)(t.h5,{id:"search-parameters",children:"Search Parameters"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Parameter"}),(0,a.jsx)(t.th,{children:"Type"}),(0,a.jsx)(t.th,{children:"Required"}),(0,a.jsx)(t.th,{children:"Match Type"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"settingCode"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"string"})}),(0,a.jsx)(t.td,{children:"No"}),(0,a.jsx)(t.td,{children:"Exact match"}),(0,a.jsx)(t.td,{children:"Filter by master type code (masterTypeCode)"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"keyword"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"string"})}),(0,a.jsx)(t.td,{children:"No"}),(0,a.jsx)(t.td,{children:"Partial match (case-insensitive)"}),(0,a.jsx)(t.td,{children:"Filter by name field"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"code"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"string"})}),(0,a.jsx)(t.td,{children:"No"}),(0,a.jsx)(t.td,{children:"Partial match (case-insensitive)"}),(0,a.jsx)(t.td,{children:"Filter by master code"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"page"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"number"})}),(0,a.jsx)(t.td,{children:"No"}),(0,a.jsx)(t.td,{children:"-"}),(0,a.jsx)(t.td,{children:"Page number (default: 1)"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"pageSize"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"number"})}),(0,a.jsx)(t.td,{children:"No"}),(0,a.jsx)(t.td,{children:"-"}),(0,a.jsx)(t.td,{children:"Items per page (default: 10)"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"orderBys"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"string[]"})}),(0,a.jsx)(t.td,{children:"No"}),(0,a.jsx)(t.td,{children:"-"}),(0,a.jsx)(t.td,{children:'Sort order (default: ["seq", "masterCode"])'})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"isDeleted"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"boolean"})}),(0,a.jsx)(t.td,{children:"No"}),(0,a.jsx)(t.td,{children:"Exact match"}),(0,a.jsx)(t.td,{children:"Filter by deletion status"})]})]})]}),"\n",(0,a.jsxs)(t.admonition,{title:"Known Issue (Fixed in v1.0.17)",type:"warning",children:[(0,a.jsxs)(t.p,{children:["In versions prior to v1.0.17, the ",(0,a.jsx)(t.code,{children:"settingCode"})," parameter incorrectly used partial matching (",(0,a.jsx)(t.code,{children:"contains"}),') instead of exact matching. This caused unintended search results - for example, searching for "PRODUCT" would also return "PRODUCT_TYPE" and "MY_PRODUCT".']}),(0,a.jsxs)(t.p,{children:["If you are using v1.0.16 or earlier and need exact matching for ",(0,a.jsx)(t.code,{children:"settingCode"}),", upgrade to v1.0.17 or later."]}),(0,a.jsxs)(t.p,{children:["See also: ",(0,a.jsx)(t.a,{href:"./changelog#v1017",children:"Changelog v1.0.17"})]})]})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(6540);const a={},s=i.createContext(a);function o(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);