"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[8517],{5425:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"survey-web","title":"Survey Web","description":"Learn about the Survey Web package for building survey and questionnaire UI components.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/survey-web.md","sourceDirName":".","slug":"/survey-web","permalink":"/docs/survey-web","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"Learn about the Survey Web package for building survey and questionnaire UI components."},"sidebar":"tutorialSidebar","previous":{"title":"Master Web","permalink":"/docs/master-web"},"next":{"title":"Security Best Practices","permalink":"/docs/security-best-practices"}}');var r=t(4848),s=t(8453);const l={description:"Learn about the Survey Web package for building survey and questionnaire UI components."},a="Survey Web",d={},o=[{value:"Installation",id:"installation",level:2},{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Main Components",id:"main-components",level:2},{value:"SurveyTemplatePage",id:"surveytemplatepage",level:3},{value:"EditSurveyTemplatePage",id:"editsurveytemplatepage",level:3},{value:"SurveyForm",id:"surveyform",level:3},{value:"Question Types",id:"question-types",level:2},{value:"1. Short Text",id:"1-short-text",level:3},{value:"2. Long Text",id:"2-long-text",level:3},{value:"3. Single Choice",id:"3-single-choice",level:3},{value:"4. Multiple Choice",id:"4-multiple-choice",level:3},{value:"5. Dropdown",id:"5-dropdown",level:3},{value:"6. Linear Scale",id:"6-linear-scale",level:3},{value:"7. Rating",id:"7-rating",level:3},{value:"8. Date",id:"8-date",level:3},{value:"9. Time",id:"9-time",level:3},{value:"Custom Hooks",id:"custom-hooks",level:2},{value:"useSurveyTemplates",id:"usesurveytemplates",level:3},{value:"useEditSurveyTemplate",id:"useeditsurveytemplate",level:3},{value:"useDeleteSurveyTemplate",id:"usedeletesurveytemplate",level:3},{value:"Survey Template Structure",id:"survey-template-structure",level:2},{value:"SurveyTemplateDataEntity Type",id:"surveytemplatedataentity-type",level:2},{value:"Validation Rules",id:"validation-rules",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Styling",id:"styling",level:2},{value:"Dependencies",id:"dependencies",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"survey-web",children:"Survey Web"})}),"\n",(0,r.jsx)(n.p,{children:"Frontend component library for survey template management and form rendering in MBC CQRS Serverless applications."}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install @mbc-cqrs-serverless/survey-web\n"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["The Survey Web package (",(0,r.jsx)(n.code,{children:"@mbc-cqrs-serverless/survey-web"}),") provides React components for creating, editing, and rendering survey templates. It supports multiple question types, drag-and-drop section reordering, and real-time collaboration through AWS AppSync."]}),"\n",(0,r.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Template Management"}),": Create, edit, and delete survey templates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multiple Question Types"}),": 9 built-in question types for various data collection needs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Drag and Drop"}),": Reorder sections and questions with @dnd-kit"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Form Validation"}),": Zod-based validation with custom rules"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Real-time Updates"}),": AWS AppSync integration for collaborative editing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Responsive Design"}),": Mobile-friendly survey forms"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Section-based Structure"}),": Organize questions into logical sections"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"main-components",children:"Main Components"}),"\n",(0,r.jsx)(n.h3,{id:"surveytemplatepage",children:"SurveyTemplatePage"}),"\n",(0,r.jsx)(n.p,{children:"Displays a list of survey templates with search and management capabilities."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import { SurveyTemplatePage } from "@mbc-cqrs-serverless/survey-web/SurveyTemplatePage";\nimport "@mbc-cqrs-serverless/survey-web/styles.css";\n\nexport default function SurveyTemplatesPage() {\n  return <SurveyTemplatePage />;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"editsurveytemplatepage",children:"EditSurveyTemplatePage"}),"\n",(0,r.jsx)(n.p,{children:"Editor for creating and modifying survey templates with drag-and-drop functionality."}),"\n",(0,r.jsxs)(n.p,{children:["This component uses ",(0,r.jsx)(n.code,{children:"useParams()"})," from ",(0,r.jsx)(n.code,{children:"next/navigation"})," internally to get the survey ID from the URL. For new surveys (create mode), render on a route without an ID parameter. For editing existing surveys, render on a route with an ID parameter (e.g., ",(0,r.jsx)(n.code,{children:"/surveys/[id]/edit"}),")."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import { EditSurveyTemplatePage } from "@mbc-cqrs-serverless/survey-web/EditSurveyTemplatePage";\n\n// Route: /surveys/new (create mode)\n// Route: /surveys/[id]/edit (edit mode - ID extracted from URL via useParams)\nexport default function EditSurveyPage() {\n  return <EditSurveyTemplatePage />;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"surveyform",children:"SurveyForm"}),"\n",(0,r.jsx)(n.p,{children:"Renders a survey template as a fillable form for respondents."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import { SurveyForm } from "@mbc-cqrs-serverless/survey-web/SurveyForm";\n\n// Answer values can be string (single value) or string[] (multiple choice)\ntype SurveyAnswers = Record<string, string | string[] | undefined>;\n\n// Define schema type based on the Survey Template Structure section below\ninterface SurveySchema {\n  title: string;\n  description?: string;\n  items: SurveyItem[];\n}\n\ninterface Props {\n  schema: SurveySchema;\n}\n\nexport default function SurveyResponsePage({ schema }: Props) {\n  const handleSubmit = (answers: SurveyAnswers) => {\n    console.log("Survey answers:", answers);\n  };\n\n  return (\n    <SurveyForm\n      schema={schema}\n      onSubmit={handleSubmit}\n      disabled={false}\n    >\n      {/* {{Optional: Custom content rendered inside the current section}} */}\n    </SurveyForm>\n  );\n}\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Prop"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"schema"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"SurveySchema"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"The survey template schema to render"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onSubmit"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(answers: SurveyAnswers) => void"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Callback when survey is submitted with all answers"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"disabled"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Disable form interactions (default: false)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"children"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"React.ReactNode"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Optional content rendered inside the current section"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"question-types",children:"Question Types"}),"\n",(0,r.jsx)(n.p,{children:"The Survey Web package supports 9 question types:"}),"\n",(0,r.jsx)(n.h3,{id:"1-short-text",children:"1. Short Text"}),"\n",(0,r.jsx)(n.p,{children:"Single-line text input for brief responses."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "q1",\n  "type": "short-text",\n  "label": "What is your name?",\n  "validation": {\n    "required": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-long-text",children:"2. Long Text"}),"\n",(0,r.jsx)(n.p,{children:"Multi-line text area for detailed responses."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "q2",\n  "type": "long-text",\n  "label": "Please describe your experience",\n  "validation": {\n    "required": false,\n    "custom": {\n      "type": "length",\n      "rule": "max",\n      "value": 1000,\n      "customError": "Response must be 1000 characters or less"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-single-choice",children:"3. Single Choice"}),"\n",(0,r.jsx)(n.p,{children:"Radio button selection for mutually exclusive options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "q3",\n  "type": "single-choice",\n  "label": "What is your preferred contact method?",\n  "options": [\n    { "value": "email", "label": "Email" },\n    { "value": "phone", "label": "Phone" },\n    { "value": "mail", "label": "Mail" }\n  ],\n  "validation": {\n    "required": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-multiple-choice",children:"4. Multiple Choice"}),"\n",(0,r.jsx)(n.p,{children:"Checkbox selection for multiple options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "q4",\n  "type": "multiple-choice",\n  "label": "Which products are you interested in?",\n  "options": [\n    { "value": "product_a", "label": "Product A" },\n    { "value": "product_b", "label": "Product B" },\n    { "value": "product_c", "label": "Product C" }\n  ],\n  "validation": {\n    "required": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"5-dropdown",children:"5. Dropdown"}),"\n",(0,r.jsx)(n.p,{children:"Select dropdown for choosing from a list."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "q5",\n  "type": "dropdown",\n  "label": "Select your country",\n  "options": [\n    { "value": "jp", "label": "Japan" },\n    { "value": "us", "label": "United States" },\n    { "value": "uk", "label": "United Kingdom" }\n  ],\n  "validation": {\n    "required": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"6-linear-scale",children:"6. Linear Scale"}),"\n",(0,r.jsx)(n.p,{children:"Numeric scale for rating responses."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "q6",\n  "type": "linear-scale",\n  "label": "How likely are you to recommend us?",\n  "min": 0,\n  "max": 10,\n  "minLabel": "Not likely",\n  "maxLabel": "Very likely",\n  "validation": {\n    "required": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"7-rating",children:"7. Rating"}),"\n",(0,r.jsx)(n.p,{children:"Configurable star/heart/thumb rating input with 2-10 levels."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "q7",\n  "type": "rating",\n  "label": "Rate your overall satisfaction",\n  "levels": 5,\n  "symbol": "star",\n  "validation": {\n    "required": true\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"levels"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"5"})}),(0,r.jsx)(n.td,{children:"Number of rating levels (2-10)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"symbol"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"'star' | 'heart' | 'thumb'"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"'star'"})}),(0,r.jsx)(n.td,{children:"Symbol used for rating display"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"8-date",children:"8. Date"}),"\n",(0,r.jsx)(n.p,{children:"Date picker for date selection with configurable options."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "q8",\n  "type": "date",\n  "label": "When did you first use our service?",\n  "includeTime": false,\n  "includeYear": true,\n  "validation": {\n    "required": false\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"includeTime"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})}),(0,r.jsx)(n.td,{children:"Include time selection along with date"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"includeYear"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})}),(0,r.jsx)(n.td,{children:"Include year in date selection"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"9-time",children:"9. Time"}),"\n",(0,r.jsx)(n.p,{children:"Time picker for time or duration input."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "q9",\n  "type": "time",\n  "label": "What time works best for a callback?",\n  "answerType": "time",\n  "validation": {\n    "required": false\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"answerType"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"'time' | 'duration'"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"'time'"})}),(0,r.jsx)(n.td,{children:"Input mode: specific time or duration"})]})})]}),"\n",(0,r.jsx)(n.h2,{id:"custom-hooks",children:"Custom Hooks"}),"\n",(0,r.jsx)(n.admonition,{title:"Internal Hooks",type:"warning",children:(0,r.jsxs)(n.p,{children:["The hooks documented below (",(0,r.jsx)(n.code,{children:"useSurveyTemplates"}),", ",(0,r.jsx)(n.code,{children:"useEditSurveyTemplate"}),", ",(0,r.jsx)(n.code,{children:"useDeleteSurveyTemplate"}),") are internal hooks used by the page components. They are NOT exported from the main package index and cannot be imported directly. The import paths shown are for illustration purposes only. Use the page components (",(0,r.jsx)(n.code,{children:"SurveyTemplatePage"}),", ",(0,r.jsx)(n.code,{children:"EditSurveyTemplatePage"}),") instead for standard use cases."]})}),"\n",(0,r.jsx)(n.h3,{id:"usesurveytemplates",children:"useSurveyTemplates"}),"\n",(0,r.jsx)(n.p,{children:"Fetch and manage survey templates with pagination and search support."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'// IMPORTANT: This hook is internal and cannot be imported directly.\n// This code example is for reference only to show the hook\'s interface.\n// Use SurveyTemplatePage component instead for standard use cases.\n\nfunction TemplateList() {\n  const {\n    surveys,        // Array of survey templates (SurveyTemplateDataEntity[])\n    totalItems,     // Total number of templates\n    isLoading,\n    error,          // Error | null\n    refetch         // () => Promise<void> - Function to refresh the list\n  } = useSurveyTemplates({\n    page: 1,\n    pageSize: 10,\n    keyword: "",           // Optional: search keyword\n    orderBy: "createdAt",  // Optional: sort field\n    orderType: "desc"      // Optional: sort direction (\'asc\' | \'desc\')\n  });\n\n  if (isLoading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error.message}</div>;\n\n  return (\n    <div>\n      <p>Total: {totalItems}</p>\n      <ul>\n        {surveys.map((survey) => (\n          <li key={survey.id}>{survey.name}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"useeditsurveytemplate",children:"useEditSurveyTemplate"}),"\n",(0,r.jsx)(n.p,{children:"Hook for editing survey templates with schema management and submission handling."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'// IMPORTANT: This hook is internal and cannot be imported directly.\n// This code example is for reference only to show the hook\'s interface.\n// Use EditSurveyTemplatePage component instead for standard use cases.\n\nfunction TemplateEditor({ id }: { id?: string }) {\n  const {\n    surveyData,           // Current survey data from server (SurveyTemplateDataEntity | null)\n    currentSchema,        // Current editable schema (SurveySchemaType | null)\n    originalSchema,       // Original schema for change detection (SurveySchemaType | null)\n    isLoading,\n    isSubmitting,\n    error,\n    setCurrentSchema,     // Function to update current schema\n    handleCreateSurvey,   // {{(schema: SurveySchemaType) => Promise<void> - Create new survey}}\n    handleUpdateSurvey,   // {{(schema: SurveySchemaType) => Promise<void> - Update existing survey}}\n    retryFetchSurvey,     // () => Promise<void> - Retry fetching survey data\n    isSchemaChanged,      // boolean - True if schema differs from original\n    isButtonDisabled,     // boolean - True if submit should be disabled\n    submitButtonRef       // React.RefObject<HTMLButtonElement> - Ref for submit button\n  } = useEditSurveyTemplate({ id });\n\n  const handleSave = async () => {\n    if (!currentSchema) return;\n    if (id) {\n      await handleUpdateSurvey(currentSchema);\n    } else {\n      await handleCreateSurvey(currentSchema);\n    }\n  };\n\n  return (\n    <div>\n      {/* Editor UI */}\n      <button\n        ref={submitButtonRef}\n        onClick={handleSave}\n        disabled={isButtonDisabled}\n      >\n        {isSubmitting ? "Saving..." : "Save"}\n      </button>\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"usedeletesurveytemplate",children:"useDeleteSurveyTemplate"}),"\n",(0,r.jsx)(n.p,{children:"Hook for deleting survey templates with success callback."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'// IMPORTANT: This hook is internal and cannot be imported directly.\n// This code example is for reference only to show the hook\'s interface.\n\nfunction DeleteButton({ surveyId }: { surveyId: string }) {\n  const {\n    handleDeleteSurvey,  // (id: string) => Promise<void> - Delete survey by ID\n    isDeleting           // boolean - True while deletion is in progress\n  } = useDeleteSurveyTemplate({\n    onSuccess: () => {\n      console.log("Survey deleted successfully");\n      // Navigate back to list or refresh\n    }\n  });\n\n  return (\n    <button\n      onClick={() => handleDeleteSurvey(surveyId)}\n      disabled={isDeleting}\n    >\n      Delete\n    </button>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"survey-template-structure",children:"Survey Template Structure"}),"\n",(0,r.jsx)(n.p,{children:"Survey templates use a flat list structure with section headers:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'interface SurveySchema {\n  title: string;\n  description?: string;\n  items: SurveyItem[];  // Flat list of section headers and questions\n}\n\n// Section header item - acts as a bookmark or page break\ninterface SectionHeader {\n  id: string;\n  type: "section-header";\n  title: string;\n  description?: string;\n  action?: {\n    type: "submit";\n  } | {\n    type: "jump";\n    targetSectionId: string;  // ID of another section-header for conditional branching\n  };\n}\n\n// Question item\ninterface Question {\n  id: string;\n  type: QuestionType;  // short-text, long-text, single-choice, etc.\n  label: string;\n  description?: string;\n  options?: QuestionOption[];  // For choice-based questions\n  validation?: ValidationRules;\n}\n\n// Option for choice-based questions\ninterface QuestionOption {\n  value: string;        // Unique value for the option\n  label: string;        // Display label for the option\n  nextSectionId?: string;  // ID of section to jump to when this option is selected (for conditional branching)\n  isOther?: boolean;    // If true, shows a text input for custom "Other" response\n}\n\n// Union of all item types\ntype SurveyItem = SectionHeader | Question;\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example survey structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "Customer Feedback Survey",\n  "description": "Help us improve our service",\n  "items": [\n    {\n      "id": "section-intro",\n      "type": "section-header",\n      "title": "Introduction",\n      "description": "Please answer a few questions about yourself"\n    },\n    {\n      "id": "q1",\n      "type": "short-text",\n      "label": "What is your name?",\n      "validation": { "required": true }\n    },\n    {\n      "id": "section-feedback",\n      "type": "section-header",\n      "title": "Feedback",\n      "description": "Tell us about your experience"\n    },\n    {\n      "id": "q2",\n      "type": "linear-scale",\n      "label": "How satisfied are you?",\n      "min": 1,\n      "max": 10,\n      "minLabel": "Not satisfied",\n      "maxLabel": "Very satisfied",\n      "validation": { "required": true }\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"surveytemplatedataentity-type",children:"SurveyTemplateDataEntity Type"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"SurveyTemplateDataEntity"})," type represents the actual DynamoDB entity structure:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type SurveyTemplateDataEntity = {\n  // Primary keys\n  pk: string;                    // Partition key\n  sk: string;                    // Sort key\n\n  // Entity identifiers\n  id: string;                    // Unique identifier\n  code: string;                  // Template code\n  name: string;                  // Template name\n  version: number;               // Version number\n  tenantCode: string;            // Tenant code\n  type: string;                  // Entity type\n\n  // Audit fields (as strings)\n  createdAt?: string;            // Creation timestamp\n  updatedAt?: string;            // Last update timestamp\n  createdBy?: string;            // Creator user ID\n  updatedBy?: string;            // Last updater user ID\n\n  // Optional fields\n  cpk?: string;                  // Command partition key\n  csk?: string;                  // Command sort key\n  source?: string;               // Source identifier\n  requestId?: string;            // Request ID\n  createdIp?: string;            // Creator IP address\n  updatedIp?: string;            // Updater IP address\n  seq?: number;                  // Sequence number\n  ttl?: number;                  // Time to live\n  isDeleted?: boolean;           // Soft delete flag\n\n  // Survey template data\n  attributes: {\n    description?: string;        // Template description\n    surveyTemplate: {            // Survey template JSON structure\n      [key: string]: unknown;\n    };\n  };\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"validation-rules",children:"Validation Rules"}),"\n",(0,r.jsxs)(n.p,{children:["Validation rules are defined inside the ",(0,r.jsx)(n.code,{children:"validation"})," object with a discriminated union structure:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// Base validation rules - applies to all question types\ninterface BaseValidationRules {\n  required?: boolean;\n}\n\n// For short-text questions\ninterface ShortTextValidationRules extends BaseValidationRules {\n  custom?: CustomValidationRule;  // Supports all validation types\n}\n\n// For long-text questions\ninterface LongTextValidationRules extends BaseValidationRules {\n  custom?: LongTextValidationRule;  // Supports only LengthValidation and RegexValidation\n}\n\n// For single-choice, dropdown, and multiple-choice questions\ninterface ChoiceValidationRules extends BaseValidationRules {\n  shuffleOptions?: boolean;  // Randomize option order\n}\n\n// For multiple-choice questions\ninterface MultipleChoiceValidationRules extends ChoiceValidationRules {\n  custom?: MultipleChoiceValidationRule;  // For min/max/exact selection count\n}\n\n// Discriminated union for custom validation rules\n// Note: short-text supports all validation types\n// Note: long-text only supports LengthValidation and RegexValidation\ntype CustomValidationRule =\n  | NumberValidation   // short-text only\n  | TextValidation     // short-text only\n  | LengthValidation   // short-text and long-text\n  | RegexValidation;   // short-text and long-text\n\n// For long-text questions - subset of CustomValidationRule\ntype LongTextValidationRule =\n  | LengthValidation\n  | RegexValidation;\n\ninterface NumberValidation {\n  type: "number";\n  rule: "gt" | "gte" | "lt" | "lte" | "eq" | "neq" | "between" | "not_between" | "is_number" | "is_whole";\n  value?: number;\n  value2?: number;  // For \'between\' and \'not_between\' rules\n  customError?: string;\n}\n\ninterface TextValidation {\n  type: "text";\n  rule: "contains" | "not_contains" | "is_email" | "is_url";\n  value?: string;\n  customError?: string;\n}\n\ninterface LengthValidation {\n  type: "length";\n  rule: "min" | "max";\n  value: number;\n  customError?: string;\n}\n\ninterface RegexValidation {\n  type: "regex";\n  rule: "contains" | "not_contains" | "matches" | "not_matches";\n  value: string;\n  customError?: string;\n}\n\n// For multiple-choice questions\ninterface MultipleChoiceValidationRule {\n  rule: "min" | "max" | "exact";\n  value: number;\n  customError?: string;\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example with email validation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "email",\n  "type": "short-text",\n  "label": "Enter your email",\n  "validation": {\n    "required": true,\n    "custom": {\n      "type": "text",\n      "rule": "is_email",\n      "customError": "Please enter a valid email address"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example with number range validation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "age",\n  "type": "short-text",\n  "label": "Enter your age",\n  "validation": {\n    "required": true,\n    "custom": {\n      "type": "number",\n      "rule": "between",\n      "value": 18,\n      "value2": 120,\n      "customError": "Age must be between 18 and 120"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example with multiple choice validation (min/max selections):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "interests",\n  "type": "multiple-choice",\n  "label": "Select your interests (2-5 choices)",\n  "options": [\n    { "value": "sports", "label": "Sports" },\n    { "value": "music", "label": "Music" },\n    { "value": "reading", "label": "Reading" },\n    { "value": "travel", "label": "Travel" },\n    { "value": "cooking", "label": "Cooking" }\n  ],\n  "validation": {\n    "required": true,\n    "custom": {\n      "rule": "min",\n      "value": 2,\n      "customError": "Please select at least 2 options"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsx)(n.p,{children:"Configure the following environment variables:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Variable"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Required"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"API_URL"})}),(0,r.jsx)(n.td,{children:"Base URL for REST API endpoints (server-side only, takes precedence over NEXT_PUBLIC_API_URL)"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NEXT_PUBLIC_API_URL"})}),(0,r.jsx)(n.td,{children:"Base URL for REST API endpoints (client-side)"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NEXT_PUBLIC_TENANT_CODE"})}),(0,r.jsx)(n.td,{children:"Tenant code for x-tenant-code header (default: 'common')"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NEXT_PUBLIC_AWS_APPSYNC_GRAPHQLENDPOINT"})}),(0,r.jsx)(n.td,{children:"AWS AppSync GraphQL endpoint"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NEXT_PUBLIC_AWS_APPSYNC_APIKEY"})}),(0,r.jsx)(n.td,{children:"AWS AppSync API key for authentication"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NEXT_PUBLIC_AWS_APPSYNC_REGION"})}),(0,r.jsx)(n.td,{children:"AWS region for AppSync"}),(0,r.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Example ",(0,r.jsx)(n.code,{children:".env.local"})," configuration:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# REST API Configuration\n# API_URL is optional (server-side only), NEXT_PUBLIC_API_URL is required\nNEXT_PUBLIC_API_URL=https://api.example.com\n\n# Tenant Configuration\nNEXT_PUBLIC_TENANT_CODE=my-tenant\n\n# AWS AppSync Configuration\nNEXT_PUBLIC_AWS_APPSYNC_GRAPHQLENDPOINT=https://xxxxx.appsync-api.us-east-1.amazonaws.com/graphql\nNEXT_PUBLIC_AWS_APPSYNC_APIKEY=da2-xxxxxxxxxxxxxxxxxxxxxxxxxx\nNEXT_PUBLIC_AWS_APPSYNC_REGION=us-east-1\n"})}),"\n",(0,r.jsx)(n.h2,{id:"styling",children:"Styling"}),"\n",(0,r.jsx)(n.p,{children:"Import the package styles in your application:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'// In your layout or entry file\nimport "@mbc-cqrs-serverless/survey-web/styles.css";\n'})}),"\n",(0,r.jsx)(n.p,{children:"The components use Tailwind CSS. Ensure your project has Tailwind CSS configured with the following requirements:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tailwind CSS 3.x"}),"\n",(0,r.jsx)(n.li,{children:"tailwindcss-animate plugin"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"Key dependencies used by this package:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"React 18.x"}),"\n",(0,r.jsx)(n.li,{children:"Next.js 14.x"}),"\n",(0,r.jsx)(n.li,{children:"@dnd-kit for drag and drop"}),"\n",(0,r.jsx)(n.li,{children:"Apollo Client"}),"\n",(0,r.jsx)(n.li,{children:"Radix UI components"}),"\n",(0,r.jsx)(n.li,{children:"Tailwind CSS 3.x"}),"\n",(0,r.jsx)(n.li,{children:"react-hook-form"}),"\n",(0,r.jsx)(n.li,{children:"Zod for validation"}),"\n",(0,r.jsx)(n.li,{children:"date-fns for date handling"}),"\n",(0,r.jsx)(n.li,{children:"lucide-react for icons"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var i=t(6540);const r={},s=i.createContext(r);function l(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);