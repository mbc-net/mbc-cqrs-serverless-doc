"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[3678],{9984:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"environment-variables","title":"Environment Variables","description":"Learn how to add and validate your environment variables in your application.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/environment-variables.md","sourceDirName":".","slug":"/environment-variables","permalink":"/docs/environment-variables","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"Learn how to add and validate your environment variables in your application."},"sidebar":"tutorialSidebar","previous":{"title":"Configuring","permalink":"/docs/configuring"},"next":{"title":"Absolute Imports and Module Path Aliases","permalink":"/docs/absolute_imports_and_module_path_aliases"}}');var d=i(4848),s=i(8453);const t={description:"Learn how to add and validate your environment variables in your application."},l="Environment Variables",c={},o=[{value:"Loading Environment Variables",id:"loading-environment-variables",level:2},{value:"Core Configuration",id:"core-configuration",level:3},{value:"AWS Credentials",id:"aws-credentials",level:3},{value:"DynamoDB Configuration",id:"dynamodb-configuration",level:3},{value:"S3 Configuration",id:"s3-configuration",level:3},{value:"Step Functions Configuration",id:"step-functions-configuration",level:3},{value:"SNS Configuration",id:"sns-configuration",level:3},{value:"Cognito Configuration",id:"cognito-configuration",level:3},{value:"AppSync Configuration",id:"appsync-configuration",level:3},{value:"SES Email Configuration",id:"ses-email-configuration",level:3},{value:"Database Configuration (Prisma)",id:"database-configuration-prisma",level:3},{value:"Example .env file",id:"example-env-file",level:3},{value:"Validate Environment Variables",id:"validate-environment-variables",level:2}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"environment-variables",children:"Environment Variables"})}),"\n",(0,d.jsx)(n.p,{children:"MBC CQRS serverless framework comes with built-in support for environment variables, which allows you to do the following:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Use ",(0,d.jsx)(n.code,{children:".env"})," to load environment variables"]}),"\n",(0,d.jsx)(n.li,{children:"Validate environment variables"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"loading-environment-variables",children:"Loading Environment Variables"}),"\n",(0,d.jsxs)(n.p,{children:["MBC CQRS serverless framework has built-in support for loading environment variables from ",(0,d.jsx)(n.code,{children:".env*"})," files into ",(0,d.jsx)(n.code,{children:"process.env."})]}),"\n",(0,d.jsxs)(n.admonition,{title:"Core vs Application Variables",type:"info",children:[(0,d.jsx)(n.p,{children:"The environment variables listed below are categorized into two types:"}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Core Variables"}),": Variables validated by the framework's base ",(0,d.jsx)(n.code,{children:"EnvironmentVariables"})," class. These are essential for the framework to function."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Application Variables"}),": Variables that your application may need based on which features you use. Add validation for these in your custom ",(0,d.jsx)(n.code,{children:"EnvValidation"})," class."]}),"\n"]}),(0,d.jsx)(n.p,{children:'The "Required" column indicates the general expectation for typical applications. You should add validation rules for all variables your specific application depends on.'})]}),"\n",(0,d.jsx)(n.h3,{id:"core-configuration",children:"Core Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"NODE_ENV"})}),(0,d.jsx)(n.td,{children:"Running environment: local, dev, stg, prod"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"local"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"APP_NAME"})}),(0,d.jsx)(n.td,{children:"Application name used for table prefixes"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"demo"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"APP_PORT"})}),(0,d.jsx)(n.td,{children:"Application port for non-Lambda environments"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"3000"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"3000"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"LOG_LEVEL"})}),(0,d.jsx)(n.td,{children:"Log level: debug, verbose, info, warn, error, fatal"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"verbose"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"EVENT_SOURCE_DISABLED"})}),(0,d.jsx)(n.td,{children:"Disable event source route for API Gateway integration"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"REQUEST_BODY_SIZE_LIMIT"})}),(0,d.jsx)(n.td,{children:"Request body size limit for JSON and URL-encoded data"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"100kb"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"100kb"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"aws-credentials",children:"AWS Credentials"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"AWS_ACCESS_KEY_ID"})}),(0,d.jsx)(n.td,{children:"AWS access key ID for local development"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"local"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"AWS_SECRET_ACCESS_KEY"})}),(0,d.jsx)(n.td,{children:"AWS secret access key for local development"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"local"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"AWS_DEFAULT_REGION"})}),(0,d.jsx)(n.td,{children:"Default AWS region"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ap-northeast-1"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"dynamodb-configuration",children:"DynamoDB Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DYNAMODB_ENDPOINT"})}),(0,d.jsx)(n.td,{children:"DynamoDB endpoint URL for local development"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"http://localhost:8000"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DYNAMODB_REGION"})}),(0,d.jsx)(n.td,{children:"DynamoDB region"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ap-northeast-1"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ATTRIBUTE_LIMIT_SIZE"})}),(0,d.jsx)(n.td,{children:"Maximum size in bytes for DynamoDB item attributes"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"389120"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"s3-configuration",children:"S3 Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"S3_ENDPOINT"})}),(0,d.jsx)(n.td,{children:"S3 endpoint URL for local development"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"http://localhost:4566"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"S3_REGION"})}),(0,d.jsx)(n.td,{children:"S3 region"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ap-northeast-1"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"S3_BUCKET_NAME"})}),(0,d.jsx)(n.td,{children:"S3 bucket name for storing large DynamoDB attributes"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"local-bucket"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"step-functions-configuration",children:"Step Functions Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SFN_ENDPOINT"})}),(0,d.jsx)(n.td,{children:"Step Functions endpoint URL for local development"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"http://localhost:8083"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SFN_REGION"})}),(0,d.jsx)(n.td,{children:"Step Functions region"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ap-northeast-1"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SFN_COMMAND_ARN"})}),(0,d.jsx)(n.td,{children:"Step Functions state machine ARN for command processing"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"arn:aws:states:ap-northeast-1:101010101010:stateMachine:command"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"sns-configuration",children:"SNS Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SNS_ENDPOINT"})}),(0,d.jsx)(n.td,{children:"SNS endpoint URL for local development"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"http://localhost:4002"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SNS_REGION"})}),(0,d.jsx)(n.td,{children:"SNS region"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ap-northeast-1"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SNS_TOPIC_ARN"})}),(0,d.jsx)(n.td,{children:"Default SNS topic ARN for event notifications"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"arn:aws:sns:ap-northeast-1:101010101010:CqrsSnsTopic"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SNS_ALARM_TOPIC_ARN"})}),(0,d.jsx)(n.td,{children:"SNS topic ARN for alarm notifications (error alerts)"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"arn:aws:sns:ap-northeast-1:101010101010:AlarmSnsTopic"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"cognito-configuration",children:"Cognito Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"COGNITO_URL"})}),(0,d.jsx)(n.td,{children:"Cognito endpoint URL for local development"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"http://localhost:9229"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"COGNITO_USER_POOL_ID"})}),(0,d.jsx)(n.td,{children:"Cognito User Pool ID"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"local_2G7noHgW"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"COGNITO_USER_POOL_CLIENT_ID"})}),(0,d.jsx)(n.td,{children:"Cognito User Pool Client ID"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"dnk8y7ii3wled35p3lw0l2cd7"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"COGNITO_REGION"})}),(0,d.jsx)(n.td,{children:"Cognito region"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ap-northeast-1"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"appsync-configuration",children:"AppSync Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"APPSYNC_ENDPOINT"})}),(0,d.jsx)(n.td,{children:"AppSync GraphQL endpoint URL"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"http://localhost:4001/graphql"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"APPSYNC_API_KEY"})}),(0,d.jsx)(n.td,{children:"AppSync API key for local development"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"da2-fakeApiId123456"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"ses-email-configuration",children:"SES Email Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SES_ENDPOINT"})}),(0,d.jsx)(n.td,{children:"SES endpoint URL for local development"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"http://localhost:8005"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SES_REGION"})}),(0,d.jsx)(n.td,{children:"SES region"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ap-northeast-1"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SES_FROM_EMAIL"})}),(0,d.jsx)(n.td,{children:"Default sender email address"}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"email@example.com"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"database-configuration-prisma",children:"Database Configuration (Prisma)"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DATABASE_URL"})}),(0,d.jsx)(n.td,{children:"Database connection URL for Prisma ORM"}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"mysql://root:RootCqrs@localhost:3306/cqrs?schema=public&connection_limit=1"})})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"example-env-file",children:"Example .env file"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'# AWS Credentials\nAWS_ACCESS_KEY_ID=local\nAWS_SECRET_ACCESS_KEY=local\nAWS_DEFAULT_REGION=ap-northeast-1\n\n# Core Configuration\nNODE_ENV=local\nAPP_NAME=demo\nAPP_PORT=3000\nLOG_LEVEL=verbose\nEVENT_SOURCE_DISABLED=false\nREQUEST_BODY_SIZE_LIMIT=100kb\n\n# DynamoDB Configuration\nDYNAMODB_ENDPOINT=http://localhost:8000\nDYNAMODB_REGION=ap-northeast-1\nATTRIBUTE_LIMIT_SIZE=389120\n\n# S3 Configuration\nS3_ENDPOINT=http://localhost:4566\nS3_REGION=ap-northeast-1\nS3_BUCKET_NAME=local-bucket\n\n# Step Functions Configuration\nSFN_ENDPOINT=http://localhost:8083\nSFN_REGION=ap-northeast-1\nSFN_COMMAND_ARN=arn:aws:states:ap-northeast-1:101010101010:stateMachine:command\n\n# SNS Configuration\nSNS_ENDPOINT=http://localhost:4002\nSNS_REGION=ap-northeast-1\nSNS_TOPIC_ARN=arn:aws:sns:ap-northeast-1:101010101010:CqrsSnsTopic\nSNS_ALARM_TOPIC_ARN=arn:aws:sns:ap-northeast-1:101010101010:AlarmSnsTopic\n\n# Cognito Configuration\nCOGNITO_URL=http://localhost:9229\nCOGNITO_USER_POOL_ID=local_2G7noHgW\nCOGNITO_USER_POOL_CLIENT_ID=dnk8y7ii3wled35p3lw0l2cd7\nCOGNITO_REGION=ap-northeast-1\n\n# AppSync Configuration\nAPPSYNC_ENDPOINT=http://localhost:4001/graphql\nAPPSYNC_API_KEY=da2-fakeApiId123456\n\n# SES Configuration\nSES_ENDPOINT=http://localhost:8005\nSES_REGION=ap-northeast-1\nSES_FROM_EMAIL=email@example.com\n\n# Database Configuration\nDATABASE_URL="mysql://root:RootCqrs@localhost:3306/cqrs?schema=public&connection_limit=1"\n'})}),"\n",(0,d.jsx)(n.h2,{id:"validate-environment-variables",children:"Validate Environment Variables"}),"\n",(0,d.jsxs)(n.p,{children:["It is standard practice to throw an exception during application startup if required environment variables haven't been provided or if they don't meet certain validation rules. The ",(0,d.jsx)(n.code,{children:"@mbc-cqrs-serverless/core"})," package makes this easy to do."]}),"\n",(0,d.jsx)(n.p,{children:"First, we have to define:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"a class with validation constraints,"}),"\n",(0,d.jsx)(n.li,{children:"extend the EnvironmentVariables class."}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'// env.validation.ts\nimport { EnvironmentVariables } from "@mbc-cqrs-serverless/core";\nimport { IsUrl } from "class-validator";\n\nexport class EnvValidation extends EnvironmentVariables {\n  @IsUrl({\n    require_tld: false,\n  })\n  FRONT_BASE_URL: string;\n}\n'})}),"\n",(0,d.jsxs)(n.p,{children:["With this in place, you pass the ",(0,d.jsx)(n.code,{children:"EnvValidation"})," class as a configuration argument of the ",(0,d.jsx)(n.code,{children:"createHandler"})," function, as follows:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'import { createHandler } from "@mbc-cqrs-serverless/core";\n\nimport { EnvValidation } from "./env.validation";\nimport { MainModule } from "./main.module";\n\nexport const handler = createHandler({\n  rootModule: MainModule,\n  envCls: EnvValidation,\n});\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var r=i(6540);const d={},s=r.createContext(d);function t(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);