"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[1304],{1654:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"survey-template","title":"Survey Template","description":"Survey template management functionality for the MBC CQRS Serverless framework.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/survey-template.md","sourceDirName":".","slug":"/survey-template","permalink":"/docs/survey-template","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"SaaS Application Example","permalink":"/docs/saas-example"},"next":{"title":"AI Integration","permalink":"/docs/ai-integration"}}');var s=t(4848),i=t(8453);const a={sidebar_position:8},l="Survey Template",o={},d=[{value:"Installation",id:"installation",level:2},{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Basic Setup",id:"basic-setup",level:2},{value:"Module Configuration",id:"module-configuration",level:3},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Creating a Survey Template",id:"creating-a-survey-template",level:2},{value:"Question Types",id:"question-types",level:2},{value:"Text Question",id:"text-question",level:3},{value:"Multiple Choice",id:"multiple-choice",level:3},{value:"Rating Scale",id:"rating-scale",level:3},{value:"Yes/No Question",id:"yesno-question",level:3},{value:"Date Question",id:"date-question",level:3},{value:"Survey Template Structure",id:"survey-template-structure",level:2},{value:"Searching Templates",id:"searching-templates",level:2},{value:"Updating Templates",id:"updating-templates",level:2},{value:"Deleting Templates",id:"deleting-templates",level:2},{value:"Multi-tenant Usage",id:"multi-tenant-usage",level:2},{value:"Event Handling",id:"event-handling",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"survey-template",children:"Survey Template"})}),"\n",(0,s.jsx)(n.p,{children:"Survey template management functionality for the MBC CQRS Serverless framework."}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install @mbc-cqrs-serverless/survey-template\n"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The Survey Template package provides comprehensive survey template management in a multi-tenant CQRS architecture. It enables the creation, management, and storage of survey templates with flexible JSON-based definitions supporting various question types."}),"\n",(0,s.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Survey Template CRUD Operations"}),": Create, read, update, and delete survey templates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-tenant Support"}),": Tenant-isolated survey template management"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Flexible Survey Structure"}),": JSON-based survey template definitions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Various Question Types"}),": Support for text, multiple choice, rating, and more"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search and Filtering"}),": Advanced search capabilities with keyword matching"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Event-Driven Architecture"}),": Built on CQRS pattern with command/event handling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RESTful API"}),": Complete REST API for survey template operations"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,s.jsx)(n.h3,{id:"module-configuration",children:"Module Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { SurveyTemplateModule } from '@mbc-cqrs-serverless/survey-template';\nimport { Module } from '@nestjs/common';\n\n@Module({\n  imports: [\n    SurveyTemplateModule.register({\n      enableController: true,  // Enable REST API endpoints\n    }),\n  ],\n})\nexport class AppModule {}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Method"}),(0,s.jsx)(n.th,{children:"Endpoint"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"GET"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/survey-template/"})}),(0,s.jsx)(n.td,{children:"Search and list survey templates"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"POST"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/survey-template/"})}),(0,s.jsx)(n.td,{children:"Create a new survey template"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"GET"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/survey-template/:id"})}),(0,s.jsx)(n.td,{children:"Get a specific survey template"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"PUT"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/survey-template/:id"})}),(0,s.jsx)(n.td,{children:"Update a survey template"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"DELETE"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/survey-template/:id"})}),(0,s.jsx)(n.td,{children:"Delete a survey template"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-survey-template",children:"Creating a Survey Template"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { SurveyTemplateService } from '@mbc-cqrs-serverless/survey-template';\n\n@Injectable()\nexport class SurveyService {\n  constructor(\n    private readonly surveyTemplateService: SurveyTemplateService,\n  ) {}\n\n  async createTemplate(\n    tenantCode: string,\n    dto: CreateSurveyTemplateDto,\n    invokeContext: IInvoke,\n  ): Promise<SurveyTemplateEntity> {\n    return this.surveyTemplateService.create(tenantCode, dto, { invokeContext });\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"question-types",children:"Question Types"}),"\n",(0,s.jsx)(n.h3,{id:"text-question",children:"Text Question"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "type": "text",\n  "text": "Please describe your experience",\n  "required": true,\n  "maxLength": 1000,\n  "placeholder": "Enter your response..."\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"multiple-choice",children:"Multiple Choice"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "type": "multiple_choice",\n  "text": "Which products do you use?",\n  "required": true,\n  "allowMultiple": true,\n  "options": [\n    { "value": "product_a", "label": "Product A" },\n    { "value": "product_b", "label": "Product B" },\n    { "value": "product_c", "label": "Product C" }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"rating-scale",children:"Rating Scale"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "type": "rating",\n  "text": "Rate your experience",\n  "required": true,\n  "min": 1,\n  "max": 10,\n  "labels": {\n    "1": "Poor",\n    "5": "Average",\n    "10": "Excellent"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"yesno-question",children:"Yes/No Question"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "type": "boolean",\n  "text": "Would you recommend us to a friend?",\n  "required": true\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"date-question",children:"Date Question"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "type": "date",\n  "text": "When did you first use our service?",\n  "required": false,\n  "minDate": "2020-01-01",\n  "maxDate": "today"\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"survey-template-structure",children:"Survey Template Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface SurveyTemplate {\n  id: string;\n  name: string;\n  description?: string;\n  sections: Section[];\n  settings?: TemplateSettings;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\ninterface Section {\n  title: string;\n  description?: string;\n  questions: Question[];\n}\n\ninterface TemplateSettings {\n  allowAnonymous: boolean;\n  showProgressBar: boolean;\n  randomizeQuestions: boolean;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"searching-templates",children:"Searching Templates"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"async searchTemplates(\n  tenantCode: string,\n  searchDto: SearchDto,\n): Promise<SurveyTemplateEntity[]> {\n  return this.surveyTemplateService.searchData(tenantCode, searchDto);\n}\n\nasync getTemplate(key: DetailKey): Promise<SurveyTemplateEntity> {\n  return this.surveyTemplateService.findOne(key);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"updating-templates",children:"Updating Templates"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"async updateTemplate(\n  key: DetailKey,\n  dto: UpdateSurveyTemplateDto,\n  invokeContext: IInvoke,\n): Promise<SurveyTemplateEntity> {\n  return this.surveyTemplateService.update(key, dto, { invokeContext });\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"deleting-templates",children:"Deleting Templates"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"async deleteTemplate(\n  key: DetailKey,\n  invokeContext: IInvoke,\n): Promise<SurveyTemplateEntity> {\n  return this.surveyTemplateService.remove(key, { invokeContext });\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"multi-tenant-usage",children:"Multi-tenant Usage"}),"\n",(0,s.jsx)(n.p,{children:"Templates are automatically isolated by tenant through the invoke context:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"@Controller('api/survey-template')\nexport class SurveyTemplateController {\n  constructor(\n    private readonly surveyTemplateService: SurveyTemplateService,\n  ) {}\n\n  @Get()\n  async searchData(\n    @Query() searchDto: SearchDto,\n    @INVOKE_CONTEXT() invokeContext: IInvoke,\n  ): Promise<SurveyTemplateEntity[]> {\n    const { tenantCode } = getUserContext(invokeContext);\n    return this.surveyTemplateService.searchData(tenantCode, searchDto);\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"event-handling",children:"Event Handling"}),"\n",(0,s.jsx)(n.p,{children:"Handle survey template data synchronization using data sync handlers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { IDataSyncHandler, DataEntity } from '@mbc-cqrs-serverless/core';\n\nexport class SurveyTemplateDataSyncHandler implements IDataSyncHandler {\n  async onCreated(data: DataEntity): Promise<void> {\n    console.log('Survey template created:', data.name);\n    // Sync to RDS, notify users, etc.\n  }\n\n  async onUpdated(data: DataEntity): Promise<void> {\n    console.log('Survey template updated:', data.name);\n  }\n\n  async onDeleted(data: DataEntity): Promise<void> {\n    console.log('Survey template deleted:', data.name);\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use Sections"}),": Organize questions into logical sections for better user experience"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validate Questions"}),": Ensure required fields are properly marked"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Limit Options"}),": For multiple choice, keep options to a reasonable number"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Version Templates"}),": Create new versions instead of modifying existing templates in use"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Test Templates"}),": Preview templates before deployment"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var r=t(6540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);