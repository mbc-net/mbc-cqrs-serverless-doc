"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[2943],{6317:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"helpers","title":"Helper Functions","description":"Reference guide for helper functions available in MBC CQRS Serverless.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/helpers.md","sourceDirName":".","slug":"/helpers","permalink":"/docs/helpers","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"Reference guide for helper functions available in MBC CQRS Serverless."},"sidebar":"tutorialSidebar","previous":{"title":"AI Prompts Library","permalink":"/docs/ai-prompts"},"next":{"title":"Interfaces","permalink":"/docs/interfaces"}}');var r=t(4848),i=t(8453);const o={description:"Reference guide for helper functions available in MBC CQRS Serverless."},a="Helper Functions",c={},l=[{value:"Key Helpers",id:"key-helpers",level:2},{value:"<code>addSortKeyVersion(sk: string, version: number): string</code>",id:"addsortkeyversionsk-string-version-number-string",level:3},{value:"<code>getSortKeyVersion(sk: string): number</code>",id:"getsortkeyversionsk-string-number",level:3},{value:"<code>removeSortKeyVersion(sk: string): string</code>",id:"removesortkeyversionsk-string-string",level:3},{value:"<code>generateId(pk: string, sk: string): string</code>",id:"generateidpk-string-sk-string-string",level:3},{value:"<code>getTenantCode(pk: string): string | undefined</code>",id:"gettenantcodepk-string-string--undefined",level:3},{value:"<code>masterPk(tenantCode?: string): string</code>",id:"masterpktenantcode-string-string",level:3},{value:"<code>seqPk(tenantCode?: string): string</code>",id:"seqpktenantcode-string-string",level:3},{value:"<code>ttlSk(tableName: string): string</code>",id:"ttlsktablename-string-string",level:3},{value:"S3 Attribute Helpers",id:"s3-attribute-helpers",level:2},{value:"<code>isS3AttributeKey(attributes: any): boolean</code>",id:"iss3attributekeyattributes-any-boolean",level:3},{value:"<code>toS3AttributeKey(bucket: string, key: string): string</code>",id:"tos3attributekeybucket-string-key-string-string",level:3},{value:"<code>parseS3AttributeKey(s3Uri: string): { bucket: string; key: string }</code>",id:"parses3attributekeys3uri-string--bucket-string-key-string-",level:3},{value:"Context Helpers",id:"context-helpers",level:2},{value:"<code>getUserContext(ctx: IInvoke | ExecutionContext): UserContext</code>",id:"getusercontextctx-iinvoke--executioncontext-usercontext",level:3},{value:"<code>extractInvokeContext(ctx?: ExecutionContext): IInvoke</code>",id:"extractinvokecontextctx-executioncontext-iinvoke",level:3},{value:"<code>getAuthorizerClaims(ctx: IInvoke): JwtClaims</code>",id:"getauthorizerclaimsctx-iinvoke-jwtclaims",level:3},{value:"UserContext Class",id:"usercontext-class",level:2},{value:"JwtClaims Interface",id:"jwtclaims-interface",level:2},{value:"DateTime Helpers",id:"datetime-helpers",level:2},{value:"<code>toISOString(date: Date): string | undefined</code>",id:"toisostringdate-date-string--undefined",level:3},{value:"<code>toISOStringWithTimezone(date: Date): string | undefined</code>",id:"toisostringwithtimezonedate-date-string--undefined",level:3},{value:"<code>isISOString(val: string): boolean</code>",id:"isisostringval-string-boolean",level:3},{value:"<code>isISOStringWithTimezone(val: string): boolean</code>",id:"isisostringwithtimezoneval-string-boolean",level:3},{value:"Event-Type Helpers",id:"event-type-helpers",level:2},{value:"<code>getEventTypeFromArn(source: string): string | null</code>",id:"geteventtypefromarnsource-string-string--null",level:3},{value:"<code>getResourceNameFromArn(source: string): string</code>",id:"getresourcenamefromarnsource-string-string",level:3},{value:"Object Helpers",id:"object-helpers",level:2},{value:"<code>isObject(item: any): boolean</code>",id:"isobjectitem-any-boolean",level:3},{value:"<code>mergeDeep(target: any, ...sources: any[]): any</code>",id:"mergedeeptarget-any-sources-any-any",level:3},{value:"<code>objectBytes(obj: any): number</code>",id:"objectbytesobj-any-number",level:3},{value:"<code>pickKeys(obj: any, keys: string[]): object</code>",id:"pickkeysobj-any-keys-string-object",level:3},{value:"<code>omitKeys(obj: any, keys: string[]): object</code>",id:"omitkeysobj-any-keys-string-object",level:3},{value:"Serializer Helpers",id:"serializer-helpers",level:2},{value:"SerializerOptions Interface",id:"serializeroptions-interface",level:3},{value:"<code>serializeToExternal&lt;T extends CommandEntity | DataEntity&gt;(item: T | null | undefined, options?: SerializerOptions): Record&lt;string, any&gt; | null</code>",id:"serializetoexternalt-extends-commandentity--dataentityitem-t--null--undefined-options-serializeroptions-recordstring-any--null",level:3},{value:"<code>deserializeToInternal&lt;T extends CommandEntity | DataEntity&gt;(data: Record&lt;string, any&gt; | null | undefined, EntityClass: new () =&gt; T): T | null</code>",id:"deserializetointernalt-extends-commandentity--dataentitydata-recordstring-any--null--undefined-entityclass-new---t-t--null",level:3},{value:"Source Helper",id:"source-helper",level:2},{value:"<code>getCommandSource(moduleName: string, controllerName: string, method: string): string</code>",id:"getcommandsourcemodulename-string-controllername-string-method-string-string",level:3},{value:"Constants",id:"constants",level:2},{value:"<code>IS_LAMBDA_RUNNING: boolean</code>",id:"is_lambda_running-boolean",level:3},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"helper-functions",children:"Helper Functions"})}),"\n",(0,r.jsx)(n.p,{children:"The framework provides various helper functions for common operations."}),"\n",(0,r.jsx)(n.h2,{id:"key-helpers",children:"Key Helpers"}),"\n",(0,r.jsx)(n.p,{children:"Functions for working with DynamoDB keys."}),"\n",(0,r.jsx)(n.h3,{id:"addsortkeyversionsk-string-version-number-string",children:(0,r.jsx)(n.code,{children:"addSortKeyVersion(sk: string, version: number): string"})}),"\n",(0,r.jsx)(n.p,{children:"Adds a version suffix to a sort key."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { addSortKeyVersion } from '@mbc-cqrs-serverless/core';\n\nconst versionedSk = addSortKeyVersion('CAT#001', 1);\n// Result: 'CAT#001@1'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getsortkeyversionsk-string-number",children:(0,r.jsx)(n.code,{children:"getSortKeyVersion(sk: string): number"})}),"\n",(0,r.jsx)(n.p,{children:"Extracts the version number from a sort key. Returns VERSION_LATEST if no version suffix exists."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { getSortKeyVersion } from '@mbc-cqrs-serverless/core';\n\nconst version = getSortKeyVersion('CAT#001@3');\n// Result: 3\n\nconst latestVersion = getSortKeyVersion('CAT#001');\n// Result: VERSION_LATEST (-1)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"removesortkeyversionsk-string-string",children:(0,r.jsx)(n.code,{children:"removeSortKeyVersion(sk: string): string"})}),"\n",(0,r.jsx)(n.p,{children:"Removes the version suffix from a sort key."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { removeSortKeyVersion } from '@mbc-cqrs-serverless/core';\n\nconst sk = removeSortKeyVersion('CAT#001@3');\n// Result: 'CAT#001'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"generateidpk-string-sk-string-string",children:(0,r.jsx)(n.code,{children:"generateId(pk: string, sk: string): string"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a unique ID by combining partition key and sort key (without version)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { generateId } from '@mbc-cqrs-serverless/core';\n\nconst id = generateId('TENANT#mbc', 'CAT#001@3');\n// Result: 'TENANT#mbc#CAT#001'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"gettenantcodepk-string-string--undefined",children:(0,r.jsx)(n.code,{children:"getTenantCode(pk: string): string | undefined"})}),"\n",(0,r.jsx)(n.p,{children:"Extracts the tenant code from a partition key."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { getTenantCode } from '@mbc-cqrs-serverless/core';\n\nconst tenantCode = getTenantCode('TENANT#mbc');\n// Result: 'mbc'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"masterpktenantcode-string-string",children:(0,r.jsx)(n.code,{children:"masterPk(tenantCode?: string): string"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a partition key for master data."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { masterPk } from '@mbc-cqrs-serverless/core';\n\nconst pk = masterPk('mbc');\n// Result: 'MASTER#mbc'\n\nconst commonPk = masterPk();\n// Result: 'MASTER#single' (DEFAULT_TENANT_CODE)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"seqpktenantcode-string-string",children:(0,r.jsx)(n.code,{children:"seqPk(tenantCode?: string): string"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a partition key for sequences."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { seqPk } from '@mbc-cqrs-serverless/core';\n\nconst pk = seqPk('mbc');\n// Result: 'SEQ#mbc'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ttlsktablename-string-string",children:(0,r.jsx)(n.code,{children:"ttlSk(tableName: string): string"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a TTL sort key for a table. Used to identify TTL-related records."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { ttlSk } from '@mbc-cqrs-serverless/core';\n\nconst sk = ttlSk('my-table');\n// Result: 'TTL#my-table'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"s3-attribute-helpers",children:"S3 Attribute Helpers"}),"\n",(0,r.jsx)(n.p,{children:"Functions for working with S3 URI attributes."}),"\n",(0,r.jsx)(n.h3,{id:"iss3attributekeyattributes-any-boolean",children:(0,r.jsx)(n.code,{children:"isS3AttributeKey(attributes: any): boolean"})}),"\n",(0,r.jsx)(n.p,{children:"Checks if an attribute value is an S3 URI."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { isS3AttributeKey } from '@mbc-cqrs-serverless/core';\n\nconst isS3 = isS3AttributeKey('s3://my-bucket/path/to/file.pdf');\n// Result: true\n\nconst isNotS3 = isS3AttributeKey('regular string');\n// Result: false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"tos3attributekeybucket-string-key-string-string",children:(0,r.jsx)(n.code,{children:"toS3AttributeKey(bucket: string, key: string): string"})}),"\n",(0,r.jsx)(n.p,{children:"Creates an S3 URI from bucket and key."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { toS3AttributeKey } from '@mbc-cqrs-serverless/core';\n\nconst s3Uri = toS3AttributeKey('my-bucket', 'path/to/file.pdf');\n// Result: 's3://my-bucket/path/to/file.pdf'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"parses3attributekeys3uri-string--bucket-string-key-string-",children:(0,r.jsx)(n.code,{children:"parseS3AttributeKey(s3Uri: string): { bucket: string; key: string }"})}),"\n",(0,r.jsx)(n.p,{children:"Parses an S3 URI into bucket and key components."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { parseS3AttributeKey } from '@mbc-cqrs-serverless/core';\n\nconst { bucket, key } = parseS3AttributeKey('s3://my-bucket/path/to/file.pdf');\n// bucket: 'my-bucket', key: 'path/to/file.pdf'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"context-helpers",children:"Context Helpers"}),"\n",(0,r.jsx)(n.p,{children:"Functions for working with invocation context and user information."}),"\n",(0,r.jsx)(n.h3,{id:"getusercontextctx-iinvoke--executioncontext-usercontext",children:(0,r.jsx)(n.code,{children:"getUserContext(ctx: IInvoke | ExecutionContext): UserContext"})}),"\n",(0,r.jsx)(n.p,{children:"Extracts user context from the invocation context. Returns userId, tenantCode, and tenantRole."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { getUserContext } from '@mbc-cqrs-serverless/core';\n\nconst userContext = getUserContext(invokeContext);\n// {{Returns: { userId: '...', tenantCode: 'mbc', tenantRole: 'admin' }}}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"extractinvokecontextctx-executioncontext-iinvoke",children:(0,r.jsx)(n.code,{children:"extractInvokeContext(ctx?: ExecutionContext): IInvoke"})}),"\n",(0,r.jsx)(n.p,{children:"Extracts the invocation context from a NestJS execution context. Supports both Lambda and local development environments."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { extractInvokeContext } from '@mbc-cqrs-serverless/core';\n\n@Get()\nasync getItem(@Req() request: Request) {\n  const ctx = extractInvokeContext(this.executionContext);\n  // Use ctx for further operations\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getauthorizerclaimsctx-iinvoke-jwtclaims",children:(0,r.jsx)(n.code,{children:"getAuthorizerClaims(ctx: IInvoke): JwtClaims"})}),"\n",(0,r.jsx)(n.p,{children:"Extracts JWT claims from the authorizer in the invocation context."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { getAuthorizerClaims } from '@mbc-cqrs-serverless/core';\n\nconst claims = getAuthorizerClaims(invokeContext);\n// Returns JWT claims including sub, email, custom:tenant, etc.\n"})}),"\n",(0,r.jsx)(n.h2,{id:"usercontext-class",children:"UserContext Class"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"class UserContext {\n  userId: string;      // User's unique identifier (sub claim)\n  tenantCode: string;  // Current tenant code\n  tenantRole: string;  // User's role in the current tenant\n\n  constructor(partial: Partial<UserContext>);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"jwtclaims-interface",children:"JwtClaims Interface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"interface JwtClaims {\n  sub: string;                     // User's unique identifier\n  iss: string;                     // Token issuer URL\n  username?: string;               // Username\n  'cognito:groups'?: string[];     // Cognito user groups\n  'cognito:username': string;      // Cognito username\n  origin_jti?: string;             // Original JWT ID\n  client_id?: string;              // OAuth client ID\n  scope?: string;                  // OAuth scopes\n  aud: string;                     // Token audience\n  event_id: string;                // Cognito event ID\n  token_use: string;               // Token type (access/id)\n  auth_time: number;               // Authentication timestamp\n  name: string;                    // User's name\n  'custom:tenant'?: string;        // User's default tenant code\n  'custom:roles'?: string;         // JSON array of tenant roles\n  exp: number;                     // Expiration timestamp\n  email: string;                   // User's email address\n  email_verified?: boolean;        // Email verification status\n  iat: number;                     // Issued at timestamp\n  jti: string;                     // JWT ID\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"datetime-helpers",children:"DateTime Helpers"}),"\n",(0,r.jsx)(n.p,{children:"Functions for working with dates and ISO strings."}),"\n",(0,r.jsx)(n.h3,{id:"toisostringdate-date-string--undefined",children:(0,r.jsx)(n.code,{children:"toISOString(date: Date): string | undefined"})}),"\n",(0,r.jsx)(n.p,{children:"Converts a Date to ISO string format. Returns undefined if date is null/undefined."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { toISOString } from '@mbc-cqrs-serverless/core';\n\nconst isoString = toISOString(new Date('2024-01-15T10:30:00Z'));\n// Result: '2024-01-15T10:30:00.000Z'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"toisostringwithtimezonedate-date-string--undefined",children:(0,r.jsx)(n.code,{children:"toISOStringWithTimezone(date: Date): string | undefined"})}),"\n",(0,r.jsx)(n.p,{children:"Converts a Date to ISO string format with timezone offset. Returns undefined if date is null/undefined."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { toISOStringWithTimezone } from '@mbc-cqrs-serverless/core';\n\nconst isoString = toISOStringWithTimezone(new Date('2024-01-15T10:30:00'));\n// Result: '2024-01-15T10:30:00+09:00' (in JST timezone)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"isisostringval-string-boolean",children:(0,r.jsx)(n.code,{children:"isISOString(val: string): boolean"})}),"\n",(0,r.jsx)(n.p,{children:"Checks if a string is a valid ISO date string."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { isISOString } from '@mbc-cqrs-serverless/core';\n\nisISOString('2024-01-15T10:30:00.000Z'); // true\nisISOString('2024-01-15');               // false\nisISOString('invalid');                  // false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"isisostringwithtimezoneval-string-boolean",children:(0,r.jsx)(n.code,{children:"isISOStringWithTimezone(val: string): boolean"})}),"\n",(0,r.jsx)(n.p,{children:"Checks if a string is a valid ISO date string with timezone."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { isISOStringWithTimezone } from '@mbc-cqrs-serverless/core';\n\nisISOStringWithTimezone('2024-01-15T10:30:00+09:00'); // true\nisISOStringWithTimezone('2024-01-15T10:30:00.000Z'); // false\n"})}),"\n",(0,r.jsx)(n.h2,{id:"event-type-helpers",children:"Event-Type Helpers"}),"\n",(0,r.jsx)(n.p,{children:"Functions for working with AWS event source ARNs."}),"\n",(0,r.jsx)(n.h3,{id:"geteventtypefromarnsource-string-string--null",children:(0,r.jsx)(n.code,{children:"getEventTypeFromArn(source: string): string | null"})}),"\n",(0,r.jsx)(n.p,{children:"Extracts the event type from an AWS ARN. Returns 'sqs', 'sns', 'dynamodb', 'event-bridge', or null."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { getEventTypeFromArn } from '@mbc-cqrs-serverless/core';\n\nconst eventType = getEventTypeFromArn('arn:aws:dynamodb:ap-northeast-1:123456789:table/my-table/stream/...');\n// Result: 'dynamodb'\n\nconst sqsType = getEventTypeFromArn('arn:aws:sqs:ap-northeast-1:123456789:my-queue');\n// Result: 'sqs'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getresourcenamefromarnsource-string-string",children:(0,r.jsx)(n.code,{children:"getResourceNameFromArn(source: string): string"})}),"\n",(0,r.jsx)(n.p,{children:"Extracts the resource name from an AWS ARN."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { getResourceNameFromArn } from '@mbc-cqrs-serverless/core';\n\nconst tableName = getResourceNameFromArn('arn:aws:dynamodb:ap-northeast-1:123456789:table/my-table/stream/...');\n// Result: 'my-table'\n\nconst queueName = getResourceNameFromArn('arn:aws:sqs:ap-northeast-1:123456789:my-queue');\n// Result: 'my-queue'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"object-helpers",children:"Object Helpers"}),"\n",(0,r.jsx)(n.p,{children:"Functions for working with objects."}),"\n",(0,r.jsx)(n.h3,{id:"isobjectitem-any-boolean",children:(0,r.jsx)(n.code,{children:"isObject(item: any): boolean"})}),"\n",(0,r.jsx)(n.p,{children:"Checks if the value is a plain object (not array, not null)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { isObject } from '@mbc-cqrs-serverless/core';\n\nisObject({ key: 'value' }); // true\nisObject([1, 2, 3]);        // false\nisObject(null);             // false\nisObject('string');         // false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"mergedeeptarget-any-sources-any-any",children:(0,r.jsx)(n.code,{children:"mergeDeep(target: any, ...sources: any[]): any"})}),"\n",(0,r.jsx)(n.p,{children:"Deep merges objects without mutating the original objects."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { mergeDeep } from '@mbc-cqrs-serverless/core';\n\nconst result = mergeDeep(\n  { a: 1, b: { c: 2 } },\n  { b: { d: 3 }, e: 4 }\n);\n// {{Result: { a: 1, b: { c: 2, d: 3 }, e: 4 }}}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"objectbytesobj-any-number",children:(0,r.jsx)(n.code,{children:"objectBytes(obj: any): number"})}),"\n",(0,r.jsx)(n.p,{children:"Calculates the byte size of a JSON-serialized object."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { objectBytes } from '@mbc-cqrs-serverless/core';\n\nconst size = objectBytes({ name: 'test', value: 123 });\n// Result: byte size of JSON string\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pickkeysobj-any-keys-string-object",children:(0,r.jsx)(n.code,{children:"pickKeys(obj: any, keys: string[]): object"})}),"\n",(0,r.jsx)(n.p,{children:"Creates a new object with only the specified keys."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { pickKeys } from '@mbc-cqrs-serverless/core';\n\nconst result = pickKeys({ a: 1, b: 2, c: 3 }, ['a', 'c']);\n// {{Result: { a: 1, c: 3 }}}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"omitkeysobj-any-keys-string-object",children:(0,r.jsx)(n.code,{children:"omitKeys(obj: any, keys: string[]): object"})}),"\n",(0,r.jsx)(n.p,{children:"Creates a new object without the specified keys."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { omitKeys } from '@mbc-cqrs-serverless/core';\n\nconst result = omitKeys({ a: 1, b: 2, c: 3 }, ['b']);\n// {{Result: { a: 1, c: 3 }}}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"serializer-helpers",children:"Serializer Helpers"}),"\n",(0,r.jsx)(n.p,{children:"Functions for converting between internal DynamoDB structure and external flat structure."}),"\n",(0,r.jsx)(n.h3,{id:"serializeroptions-interface",children:"SerializerOptions Interface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"interface SerializerOptions {\n  keepAttributes?: boolean;  // Reserved for future use\n  flattenDepth?: number;     // Reserved for future use\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"SerializerOptions"})," interface is defined for future extensibility but is not currently used by the function. The function always flattens attributes to the top level."]})}),"\n",(0,r.jsx)(n.h3,{id:"serializetoexternalt-extends-commandentity--dataentityitem-t--null--undefined-options-serializeroptions-recordstring-any--null",children:(0,r.jsx)(n.code,{children:"serializeToExternal<T extends CommandEntity | DataEntity>(item: T | null | undefined, options?: SerializerOptions): Record<string, any> | null"})}),"\n",(0,r.jsx)(n.p,{children:"Converts internal DynamoDB entity to external flat structure. Flattens the attributes object into the root level. Returns null if input is null or undefined."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { serializeToExternal } from '@mbc-cqrs-serverless/core';\n\nconst entity = {\n  pk: 'TENANT#mbc',\n  sk: 'CAT#001',\n  id: 'TENANT#mbc#CAT#001',\n  code: '001',\n  name: 'Category 1',\n  version: 1,\n  tenantCode: 'mbc',\n  type: 'CAT',\n  isDeleted: false,\n  attributes: { color: 'red', size: 'large' }\n};\n\nconst external = serializeToExternal(entity);\n// Result:\n// {\n//   id: 'TENANT#mbc#CAT#001',\n//   pk: 'TENANT#mbc',\n//   sk: 'CAT#001',\n//   code: '001',\n//   name: 'Category 1',\n//   version: 1,\n//   tenantCode: 'mbc',\n//   type: 'CAT',\n//   isDeleted: false,\n//   color: 'red',        // Flattened from attributes\n//   size: 'large'        // Flattened from attributes\n// }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"deserializetointernalt-extends-commandentity--dataentitydata-recordstring-any--null--undefined-entityclass-new---t-t--null",children:(0,r.jsx)(n.code,{children:"deserializeToInternal<T extends CommandEntity | DataEntity>(data: Record<string, any> | null | undefined, EntityClass: new () => T): T | null"})}),"\n",(0,r.jsx)(n.p,{children:"Converts external flat structure back to internal DynamoDB entity structure. Returns null if input is null or undefined."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { deserializeToInternal, DataEntity } from '@mbc-cqrs-serverless/core';\n\nconst external = {\n  id: 'TENANT#mbc#CAT#001',\n  name: 'Category 1',\n  color: 'red',\n  size: 'large'\n};\n\nconst entity = deserializeToInternal(external, DataEntity);\n// {{Result: DataEntity with pk, sk, name, and attributes: { color, size }}}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"source-helper",children:"Source Helper"}),"\n",(0,r.jsx)(n.p,{children:"Function for generating command source identifiers."}),"\n",(0,r.jsx)(n.h3,{id:"getcommandsourcemodulename-string-controllername-string-method-string-string",children:(0,r.jsx)(n.code,{children:"getCommandSource(moduleName: string, controllerName: string, method: string): string"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a standardized source string for commands."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { getCommandSource } from '@mbc-cqrs-serverless/core';\n\nconst source = getCommandSource('CatalogModule', 'CatalogController', 'create');\n// Result: '[CatalogModule]:CatalogController.create'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"constants",children:"Constants"}),"\n",(0,r.jsx)(n.h3,{id:"is_lambda_running-boolean",children:(0,r.jsx)(n.code,{children:"IS_LAMBDA_RUNNING: boolean"})}),"\n",(0,r.jsx)(n.p,{children:"A constant that indicates whether the code is running in an AWS Lambda environment."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { IS_LAMBDA_RUNNING } from '@mbc-cqrs-serverless/core';\n\nif (IS_LAMBDA_RUNNING) {\n  // Lambda-specific logic\n} else {\n  // Local development logic\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./command-service",children:"Command Service"})," - Using helpers in command operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./data-service",children:"Data Service"})," - Using helpers in data queries"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(6540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);