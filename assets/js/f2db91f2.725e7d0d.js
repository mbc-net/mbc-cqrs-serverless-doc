"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[4975],{9420:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"key-patterns","title":"Key Design Patterns","description":"Learn about partition key (PK) and sort key (SK) design patterns for DynamoDB.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/key-patterns.md","sourceDirName":".","slug":"/key-patterns","permalink":"/docs/key-patterns","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"Learn about partition key (PK) and sort key (SK) design patterns for DynamoDB."},"sidebar":"tutorialSidebar","previous":{"title":"Event Sourcing Pattern","permalink":"/docs/architecture/event-sourcing"},"next":{"title":"Entity Definition Patterns","permalink":"/docs/entity-patterns"}}');var r=t(4848),i=t(8453);const d={description:"Learn about partition key (PK) and sort key (SK) design patterns for DynamoDB."},a="Key Design Patterns",o={},c=[{value:"When to Use This Guide",id:"when-to-use-this-guide",level:2},{value:"Problems This Pattern Solves",id:"problems-this-pattern-solves",level:2},{value:"Pattern Selection Guide",id:"pattern-selection",level:2},{value:"Decision Matrix",id:"decision-matrix",level:3},{value:"Decision Tree",id:"decision-tree",level:3},{value:"Key Structure Overview",id:"key-structure-overview",level:2},{value:"Framework Constants",id:"framework-constants",level:3},{value:"Built-in Key Generators",id:"built-in-generators",level:3},{value:"Basic Key Generation",id:"basic-key-generation",level:2},{value:"Generating Keys",id:"generating-keys",level:3},{value:"Version Handling",id:"version-handling",level:3},{value:"Tenant Code Extraction",id:"tenant-code-extraction",level:3},{value:"Common Key Patterns",id:"common-key-patterns",level:2},{value:"Pattern 1: Simple Entity",id:"pattern-1-simple-entity",level:3},{value:"Use Case: Product Catalog",id:"use-case-product-catalog",level:4},{value:"Pattern 2: Hierarchical Entity",id:"pattern-2-hierarchical-entity",level:3},{value:"Use Case: Order with Line Items",id:"use-case-order-with-line-items",level:4},{value:"Pattern 3: User with Multiple Auth Providers",id:"pattern-3-user-with-multiple-auth-providers",level:3},{value:"Use Case: Unified User Identity",id:"use-case-unified-user-identity",level:4},{value:"Pattern 4: Multi-Tenant Association",id:"pattern-4-multi-tenant-association",level:3},{value:"Use Case: User Belongs to Multiple Organizations",id:"use-case-user-belongs-to-multiple-organizations",level:4},{value:"Pattern 5: Master Data with Categories",id:"pattern-5-master-data-with-categories",level:3},{value:"Use Case: Application Settings and Configuration",id:"use-case-application-settings-and-configuration",level:4},{value:"Pattern 6: Time-Series Data",id:"pattern-6-time-series-data",level:3},{value:"Use Case: Activity Logs and Audit Trail",id:"use-case-activity-logs-and-audit-trail",level:4},{value:"Key Helper Functions",id:"key-helper-functions",level:2},{value:"Version Management",id:"version-management",level:2},{value:"Query Patterns",id:"query-patterns",level:2},{value:"Query by PK",id:"query-by-pk",level:3},{value:"Query with SK Prefix",id:"query-with-sk-prefix",level:3},{value:"Query with SK Range",id:"query-with-sk-range",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Consistent Prefixes",id:"1-use-consistent-prefixes",level:3},{value:"2. Use ULID for Sortable IDs",id:"2-use-ulid-for-sortable-ids",level:3},{value:"3. Design for Query Patterns",id:"3-design-for-query-patterns",level:3},{value:"4. Keep PK Cardinality Manageable",id:"4-keep-pk-cardinality-manageable",level:3},{value:"5. Include Tenant in PK",id:"5-include-tenant-in-pk",level:3},{value:"6. Use Common Tenant for Shared Data",id:"6-use-common-tenant-for-shared-data",level:3},{value:"Anti-Patterns to Avoid",id:"anti-patterns-to-avoid",level:2},{value:"1. Embedding Too Much in Keys",id:"1-embedding-too-much-in-keys",level:3},{value:"2. Using Mutable Data in Keys",id:"2-using-mutable-data-in-keys",level:3},{value:"3. Inconsistent Separators",id:"3-inconsistent-separators",level:3},{value:"4. Version Suffix in Data Operations",id:"4-version-suffix-in-data-operations",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Key Functions",id:"key-functions",level:3},{value:"Constants",id:"constants",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"key-design-patterns",children:"Key Design Patterns"})}),"\n",(0,r.jsx)(n.p,{children:"This guide explains how to design partition keys (PK) and sort keys (SK) for your entities in DynamoDB. Proper key design is critical for performance, scalability, and query efficiency."}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use-this-guide",children:"When to Use This Guide"}),"\n",(0,r.jsx)(n.p,{children:"Use this guide when you need to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Design keys for a new entity type"}),"\n",(0,r.jsx)(n.li,{children:"Model parent-child relationships (Order \u2192 OrderItems)"}),"\n",(0,r.jsx)(n.li,{children:"Support multi-tenant data isolation"}),"\n",(0,r.jsx)(n.li,{children:"Enable efficient query patterns (list by tenant, filter by date)"}),"\n",(0,r.jsx)(n.li,{children:"Handle versioning for optimistic locking"}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Related Documentation",type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/entity-patterns",children:"Entity Definition Patterns"})," - How to define entities that use these key patterns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/multi-tenant-patterns",children:"Multi-Tenant Patterns"})," - Tenant isolation and cross-tenant operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/backend-development",children:"Backend Development Guide"})," - Complete module implementation patterns"]}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"problems-this-pattern-solves",children:"Problems This Pattern Solves"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Problem"}),(0,r.jsx)(n.th,{children:"Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Querying all items for a tenant is slow"}),(0,r.jsx)(n.td,{children:"Include tenant code in PK for partition-level isolation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Can't list child items without knowing all keys"}),(0,r.jsx)(n.td,{children:"Use shared PK with different SK prefixes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"IDs are not sortable by creation time"}),(0,r.jsx)(n.td,{children:"Use ULID which is both unique and time-sortable"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Version conflicts in concurrent updates"}),(0,r.jsx)(n.td,{children:"Version suffix in SK enables optimistic locking"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"pattern-selection",children:"Pattern Selection Guide"}),"\n",(0,r.jsx)(n.p,{children:"Use this decision tree to choose the right key pattern for your use case:"}),"\n",(0,r.jsx)(n.h3,{id:"decision-matrix",children:"Decision Matrix"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Requirement"}),(0,r.jsx)(n.th,{children:"Recommended Pattern"}),(0,r.jsx)(n.th,{children:"PK Structure"}),(0,r.jsx)(n.th,{children:"SK Structure"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Simple CRUD with tenant isolation"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#pattern-1-simple-entity",children:"Simple Entity"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ENTITY#tenantCode"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ulid()"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Parent with multiple children"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#pattern-2-hierarchical-entity",children:"Hierarchical"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PARENT#tenantCode"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TYPE#parentId[#childId]"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Multiple entity variants"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#pattern-3-user-with-multiple-auth-providers",children:"Composite SK"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ENTITY#tenantCode"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"variant#identifier"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cross-tenant shared data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#pattern-4-multi-tenant-association",children:"Common Tenant"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ENTITY#common"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"tenantCode#identifier"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Categorized configurations"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#pattern-5-master-data-with-categories",children:"Master Data"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"MASTER#tenantCode"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TYPE#category#code"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Time-based queries"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#pattern-6-time-series-data",children:"Time-Series"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"LOG#tenantCode#YYYY-MM"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"timestamp#eventId"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"decision-tree",children:"Decision Tree"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Start: What type of data are you storing?\n\u2502\n\u251c\u2500 Standalone entity (Product, Customer)\n\u2502  \u2514\u2500 Use Simple Entity Pattern\n\u2502\n\u251c\u2500 Parent-child relationship (Order \u2192 Items)\n\u2502  \u2514\u2500 Do children need independent access?\n\u2502     \u251c\u2500 Yes \u2192 Use separate PK with reference\n\u2502     \u2514\u2500 No \u2192 Use Hierarchical Pattern (shared PK)\n\u2502\n\u251c\u2500 Configuration/Master data\n\u2502  \u2514\u2500 Use Master Data Pattern\n\u2502\n\u251c\u2500 Time-based events (logs, audit)\n\u2502  \u2514\u2500 Use Time-Series Pattern\n\u2502\n\u2514\u2500 User/Entity with multiple variants\n   \u2514\u2500 Use Composite SK Pattern\n"})}),"\n",(0,r.jsx)(n.h2,{id:"key-structure-overview",children:"Key Structure Overview"}),"\n",(0,r.jsx)(n.p,{children:"The framework uses a consistent key structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"PK = PREFIX#TENANT_CODE\nSK = IDENTIFIER[@VERSION]\nID = PK#SK (without version)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"KEY_SEPARATOR"})," constant (",(0,r.jsx)(n.code,{children:"#"}),") is used to separate key components."]}),"\n",(0,r.jsx)(n.h3,{id:"framework-constants",children:"Framework Constants"}),"\n",(0,r.jsxs)(n.p,{children:["The framework provides these constants in ",(0,r.jsx)(n.code,{children:"@mbc-cqrs-serverless/core"}),":"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Constant"}),(0,r.jsx)(n.th,{children:"Value"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"KEY_SEPARATOR"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#"})}),(0,r.jsx)(n.td,{children:"Separates key components (PK segments, SK segments, ID)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VER_SEPARATOR"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@"})}),(0,r.jsx)(n.td,{children:"Separates sort key from version number"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VERSION_FIRST"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})}),(0,r.jsx)(n.td,{children:"Initial version for new entities"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VERSION_LATEST"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-1"})}),(0,r.jsx)(n.td,{children:"Indicates query for latest version"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TENANT_COMMON"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"common"})}),(0,r.jsx)(n.td,{children:"Tenant code for shared/cross-tenant data"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DEFAULT_TENANT_CODE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"single"})}),(0,r.jsx)(n.td,{children:"Default tenant for single-tenant mode"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{title:"Consistent Tenant Code Format",type:"tip",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@mbc-cqrs-serverless/master"})," and ",(0,r.jsx)(n.code,{children:"@mbc-cqrs-serverless/tenant"})," packages use ",(0,r.jsx)(n.code,{children:"SettingTypeEnum.TENANT_COMMON = 'common'"})," (lowercase), which is consistent with the tenant code normalization in ",(0,r.jsx)(n.code,{children:"getUserContext()"}),". This ensures that data saved by ",(0,r.jsx)(n.code,{children:"createCommonTenantSetting()"})," or ",(0,r.jsx)(n.code,{children:"createCommonTenant()"})," methods can be correctly queried."]})}),"\n",(0,r.jsx)(n.h3,{id:"built-in-generators",children:"Built-in Key Generators"}),"\n",(0,r.jsx)(n.p,{children:"The framework provides these pre-built key generators:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { masterPk, seqPk, ttlSk } from "@mbc-cqrs-serverless/core";\n\n// Master data partition key\nmasterPk("tenant001");      // "MASTER#tenant001"\nmasterPk();                 // "MASTER#single" (default tenant)\n\n// Sequence partition key\nseqPk("tenant001");         // "SEQ#tenant001"\n\n// TTL sort key for table-level TTL settings\nttlSk("product");           // "TTL#product"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"basic-key-generation",children:"Basic Key Generation"}),"\n",(0,r.jsx)(n.p,{children:"Import utilities from the core package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import {\n  generateId,\n  getTenantCode,\n  KEY_SEPARATOR,\n  VER_SEPARATOR,\n  removeSortKeyVersion,\n  addSortKeyVersion,\n  getSortKeyVersion,\n  VERSION_FIRST,\n  VERSION_LATEST,\n  TENANT_COMMON,\n} from "@mbc-cqrs-serverless/core";\nimport { ulid } from "ulid";\n'})}),"\n",(0,r.jsx)(n.h3,{id:"generating-keys",children:"Generating Keys"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'const PRODUCT_PK_PREFIX = "PRODUCT";\n\n// Generate PK\nconst pk = `${PRODUCT_PK_PREFIX}${KEY_SEPARATOR}${tenantCode}`;\n// Result: "PRODUCT#tenant001"\n\n// Generate SK (using ULID for uniqueness and sortability)\nconst sk = ulid();\n// Result: "01HX7MBJK3V9WQBZ7XNDK5ZT2M"\n\n// Generate ID (combination of PK and SK)\nconst id = generateId(pk, sk);\n// Result: "PRODUCT#tenant001#01HX7MBJK3V9WQBZ7XNDK5ZT2M"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"version-handling",children:"Version Handling"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// Add version to SK\nconst skWithVersion = addSortKeyVersion(sk, 3);\n// Result: "01HX7MBJK3V9WQBZ7XNDK5ZT2M@3"\n\n// Remove version from SK\nconst baseSk = removeSortKeyVersion(skWithVersion);\n// Result: "01HX7MBJK3V9WQBZ7XNDK5ZT2M"\n\n// Get version number from SK\nconst version = getSortKeyVersion(skWithVersion);\n// Result: 3\n\n// Get version from SK without version suffix\nconst latestVersion = getSortKeyVersion(sk);\n// Result: -1 (VERSION_LATEST)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"tenant-code-extraction",children:"Tenant Code Extraction"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { getTenantCode } from "@mbc-cqrs-serverless/core";\n\n// Extract tenant code from PK\nconst tenantCode = getTenantCode("PRODUCT#tenant001");\n// Result: "tenant001"\n\n// Returns undefined if no separator found\nconst noTenant = getTenantCode("PRODUCT");\n// Result: undefined\n'})}),"\n",(0,r.jsx)(n.h2,{id:"common-key-patterns",children:"Common Key Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"pattern-1-simple-entity",children:"Pattern 1: Simple Entity"}),"\n",(0,r.jsx)(n.h4,{id:"use-case-product-catalog",children:"Use Case: Product Catalog"}),"\n",(0,r.jsx)(n.p,{children:"Scenario: Store products that belong to a tenant with unique IDs."}),"\n",(0,r.jsx)(n.p,{children:"When to use: Standalone entities without parent-child relationships."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Key Structure\nPK: PRODUCT#<tenantCode>\nSK: <ulid>\n\n// Example\nPK: PRODUCT#tenant001\nSK: 01HX7MBJK3V9WQBZ7XNDK5ZT2M\nID: PRODUCT#tenant001#01HX7MBJK3V9WQBZ7XNDK5ZT2M\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const pk = `PRODUCT${KEY_SEPARATOR}${tenantCode}`;\nconst sk = ulid();\nconst id = generateId(pk, sk);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pattern-2-hierarchical-entity",children:"Pattern 2: Hierarchical Entity"}),"\n",(0,r.jsx)(n.h4,{id:"use-case-order-with-line-items",children:"Use Case: Order with Line Items"}),"\n",(0,r.jsx)(n.p,{children:"Scenario: An order contains multiple items. Need to query all items for an order efficiently."}),"\n",(0,r.jsx)(n.p,{children:"Solution: Share PK between parent and children, use SK prefix to distinguish item types."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Order Key Structure\nPK: ORDER#<tenantCode>\nSK: ORDER#<orderId>\n\n// Order Item Key Structure (same PK, different SK prefix)\nPK: ORDER#<tenantCode>\nSK: ORDER_ITEM#<orderId>#<itemId>\n\n// Example\nOrder:\n  PK: ORDER#tenant001\n  SK: ORDER#01HX7MBJK3V9WQBZ7XNDK5ZT2M\n\nOrder Items:\n  PK: ORDER#tenant001\n  SK: ORDER_ITEM#01HX7MBJK3V9WQBZ7XNDK5ZT2M#001\n  SK: ORDER_ITEM#01HX7MBJK3V9WQBZ7XNDK5ZT2M#002\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'const ORDER_SK_PREFIX = "ORDER";\nconst ORDER_ITEM_SK_PREFIX = "ORDER_ITEM";\n\n// Create order\nconst orderPk = `ORDER${KEY_SEPARATOR}${tenantCode}`;\nconst orderId = ulid();\nconst orderSk = `${ORDER_SK_PREFIX}${KEY_SEPARATOR}${orderId}`;\n\n// Create order item\nconst itemSk = `${ORDER_ITEM_SK_PREFIX}${KEY_SEPARATOR}${orderId}${KEY_SEPARATOR}${itemId}`;\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pattern-3-user-with-multiple-auth-providers",children:"Pattern 3: User with Multiple Auth Providers"}),"\n",(0,r.jsx)(n.h4,{id:"use-case-unified-user-identity",children:"Use Case: Unified User Identity"}),"\n",(0,r.jsx)(n.p,{children:"Scenario: Users can sign in with local password, SSO, or OAuth. Need to link all auth methods to one user."}),"\n",(0,r.jsx)(n.p,{children:"Solution: Same PK for all user records, SK prefix indicates authentication provider."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Key Structure\nPK: USER#<tenantCode>\nSK: <provider>#<userId>\n\n// Examples\nPK: USER#common\nSK: local#user123           // Local authentication\nSK: sso#abc123def456        // SSO provider\nSK: oauth#google789         // OAuth provider\nSK: temp#session456         // Temporary session\nSK: profile#user123         // User profile data\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'type AuthProvider = "local" | "sso" | "oauth" | "temp" | "profile";\n\nfunction generateUserSk(provider: AuthProvider, userId: string): string {\n  return `${provider}${KEY_SEPARATOR}${userId}`;\n}\n\nconst pk = `USER${KEY_SEPARATOR}common`;\nconst sk = generateUserSk("sso", cognitoSubId);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pattern-4-multi-tenant-association",children:"Pattern 4: Multi-Tenant Association"}),"\n",(0,r.jsx)(n.h4,{id:"use-case-user-belongs-to-multiple-organizations",children:"Use Case: User Belongs to Multiple Organizations"}),"\n",(0,r.jsx)(n.p,{children:"Scenario: In a SaaS application, one user can belong to multiple tenants/organizations."}),"\n",(0,r.jsx)(n.p,{children:"Solution: Use a common tenant with SK that combines tenant and user codes."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Key Structure\nPK: USER_TENANT#<commonTenant>\nSK: <tenantCode>#<userCode>\n\n// Example\nPK: USER_TENANT#common\nSK: tenant001#user123\nSK: tenant002#user123   // Same user in different tenant\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const pk = `USER_TENANT${KEY_SEPARATOR}common`;\nconst sk = `${tenantCode}${KEY_SEPARATOR}${userCode}`;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pattern-5-master-data-with-categories",children:"Pattern 5: Master Data with Categories"}),"\n",(0,r.jsx)(n.h4,{id:"use-case-application-settings-and-configuration",children:"Use Case: Application Settings and Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Scenario: Store email templates, product categories, and application settings."}),"\n",(0,r.jsx)(n.p,{children:"Solution: Use type prefix (SETTING, DATA) in SK to organize different configuration types."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Key Structure\nPK: MASTER#<tenantCode>\nSK: <type>#<category>#<code>\n\n// Types: SETTING, DATA, COPY\n// Examples\nPK: MASTER#tenant001\nSK: SETTING#notification#email_template\nSK: DATA#product_category#electronics\nSK: DATA#product_category#clothing\nSK: COPY#backup#2024-01-01\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'const SETTING_PREFIX = "SETTING";\nconst DATA_PREFIX = "DATA";\n\nfunction generateMasterSk(type: string, category: string, code: string): string {\n  return `${type}${KEY_SEPARATOR}${category}${KEY_SEPARATOR}${code}`;\n}\n\nconst pk = `MASTER${KEY_SEPARATOR}${tenantCode}`;\nconst sk = generateMasterSk(DATA_PREFIX, "product_category", "electronics");\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pattern-6-time-series-data",children:"Pattern 6: Time-Series Data"}),"\n",(0,r.jsx)(n.h4,{id:"use-case-activity-logs-and-audit-trail",children:"Use Case: Activity Logs and Audit Trail"}),"\n",(0,r.jsx)(n.p,{children:"Scenario: Store time-stamped events that need to be queried by date range."}),"\n",(0,r.jsx)(n.p,{children:"Solution: Include date in PK for time-based partitioning, timestamp in SK for sorting."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Key Structure\nPK: LOG#<tenantCode>#<year-month>\nSK: <timestamp>#<eventId>\n\n// Example\nPK: LOG#tenant001#2024-01\nSK: 2024-01-15T10:30:00Z#evt001\nSK: 2024-01-15T10:31:00Z#evt002\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'function generateLogKeys(tenantCode: string, timestamp: Date, eventId: string) {\n  const yearMonth = timestamp.toISOString().slice(0, 7); // "2024-01"\n  const pk = `LOG${KEY_SEPARATOR}${tenantCode}${KEY_SEPARATOR}${yearMonth}`;\n  const sk = `${timestamp.toISOString()}${KEY_SEPARATOR}${eventId}`;\n  return { pk, sk };\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"key-helper-functions",children:"Key Helper Functions"}),"\n",(0,r.jsx)(n.p,{children:"Create a helpers file for consistent key generation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// helpers/key.ts\nimport { KEY_SEPARATOR, generateId } from "@mbc-cqrs-serverless/core";\nimport { ulid } from "ulid";\n\n// Entity prefixes\nexport const PRODUCT_PK_PREFIX = "PRODUCT";\nexport const ORDER_PK_PREFIX = "ORDER";\nexport const ORDER_SK_PREFIX = "ORDER";\nexport const ORDER_ITEM_SK_PREFIX = "ORDER_ITEM";\nexport const USER_PK_PREFIX = "USER";\nexport const MASTER_PK_PREFIX = "MASTER";\nexport const NOTIFICATION_PK_PREFIX = "NOTIFICATION";\n\n// Key generators\nexport function generateProductPk(tenantCode: string): string {\n  return `${PRODUCT_PK_PREFIX}${KEY_SEPARATOR}${tenantCode}`;\n}\n\nexport function generateOrderPk(tenantCode: string): string {\n  return `${ORDER_PK_PREFIX}${KEY_SEPARATOR}${tenantCode}`;\n}\n\nexport function generateOrderSk(orderId?: string): string {\n  const id = orderId ?? ulid();\n  return `${ORDER_SK_PREFIX}${KEY_SEPARATOR}${id}`;\n}\n\nexport function generateOrderItemSk(orderId: string, itemId: string): string {\n  return `${ORDER_ITEM_SK_PREFIX}${KEY_SEPARATOR}${orderId}${KEY_SEPARATOR}${itemId}`;\n}\n\n// Key parsers\nexport function parseOrderSk(sk: string): { prefix: string; orderId: string } {\n  const parts = sk.split(KEY_SEPARATOR);\n  return {\n    prefix: parts[0],\n    orderId: parts[1],\n  };\n}\n\nexport function parseOrderItemSk(sk: string): {\n  prefix: string;\n  orderId: string;\n  itemId: string;\n} {\n  const parts = sk.split(KEY_SEPARATOR);\n  return {\n    prefix: parts[0],\n    orderId: parts[1],\n    itemId: parts[2],\n  };\n}\n\n// ID generator with entity type\nexport function generateEntityId(\n  prefix: string,\n  tenantCode: string,\n  sk?: string,\n): { pk: string; sk: string; id: string } {\n  const pk = `${prefix}${KEY_SEPARATOR}${tenantCode}`;\n  const finalSk = sk ?? ulid();\n  const id = generateId(pk, finalSk);\n  return { pk, sk: finalSk, id };\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"version-management",children:"Version Management"}),"\n",(0,r.jsx)(n.p,{children:"The framework uses versioning for optimistic locking:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// DynamoDB Tables\n// Command table: Stores all versions with @version suffix\n// Data table: Stores latest version only (no version suffix)\n\n// Version in SK (Command table)\nSK: ORDER#01HX7MBJK3V9WQBZ7XNDK5ZT2M@1  // Version 1\nSK: ORDER#01HX7MBJK3V9WQBZ7XNDK5ZT2M@2  // Version 2\nSK: ORDER#01HX7MBJK3V9WQBZ7XNDK5ZT2M@3  // Version 3\n\n// Data table SK (no version suffix)\nSK: ORDER#01HX7MBJK3V9WQBZ7XNDK5ZT2M\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import {\n  VERSION_FIRST,\n  VERSION_LATEST,\n  addSortKeyVersion,\n  removeSortKeyVersion,\n} from "@mbc-cqrs-serverless/core";\n\n// Creating first version\nconst command = new OrderCommandDto({\n  pk,\n  sk,\n  version: VERSION_FIRST, // 0\n  // ...\n});\n\n// Reading specific version from history\nconst skWithVersion = addSortKeyVersion(baseSk, 2);\nconst historicalItem = await historyService.getItem({ pk, sk: skWithVersion });\n\n// In Data Sync Handler - always remove version for RDS storage\nasync up(cmd: CommandModel): Promise<any> {\n  const sk = removeSortKeyVersion(cmd.sk);\n  // Store sk without version in RDS\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"query-patterns",children:"Query Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"query-by-pk",children:"Query by PK"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Get all products for a tenant\nconst items = await dataService.listItemsByPk(\n  `PRODUCT${KEY_SEPARATOR}${tenantCode}`,\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"query-with-sk-prefix",children:"Query with SK Prefix"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Get all order items for a specific order\nconst items = await dataService.listItemsByPk(\n  `ORDER${KEY_SEPARATOR}${tenantCode}`,\n  {\n    sk: {\n      skExpession: 'begins_with(sk, :skPrefix)',\n      skAttributeValues: { ':skPrefix': `ORDER_ITEM${KEY_SEPARATOR}${orderId}` },\n    },\n  },\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"query-with-sk-range",children:"Query with SK Range"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Get orders within a date range (if using timestamp in SK)\nconst items = await dataService.listItemsByPk(\n  `ORDER${KEY_SEPARATOR}${tenantCode}`,\n  {\n    sk: {\n      skExpession: 'sk BETWEEN :start AND :end',\n      skAttributeValues: { ':start': startDate, ':end': endDate },\n    },\n  },\n);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-use-consistent-prefixes",children:"1. Use Consistent Prefixes"}),"\n",(0,r.jsx)(n.p,{children:"Define prefixes as constants:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// Good\nexport const PRODUCT_PK_PREFIX = "PRODUCT";\nconst pk = `${PRODUCT_PK_PREFIX}${KEY_SEPARATOR}${tenantCode}`;\n\n// Avoid\nconst pk = `PRODUCT#${tenantCode}`; // Magic string\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-use-ulid-for-sortable-ids",children:"2. Use ULID for Sortable IDs"}),"\n",(0,r.jsx)(n.p,{children:"ULID provides both uniqueness and time-based sorting:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { ulid } from "ulid";\n\nconst sk = ulid();\n// Result: "01HX7MBJK3V9WQBZ7XNDK5ZT2M"\n// Sortable by creation time\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-design-for-query-patterns",children:"3. Design for Query Patterns"}),"\n",(0,r.jsx)(n.p,{children:"Structure keys based on how you'll query data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// If you need to query all items for an order:\nPK: ORDER#tenant001\nSK: ORDER_ITEM#orderId#itemId  // Query by SK prefix\n\n// If you need to query items by product across orders:\n// Consider a GSI or separate table\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-keep-pk-cardinality-manageable",children:"4. Keep PK Cardinality Manageable"}),"\n",(0,r.jsx)(n.p,{children:"Avoid too many unique PKs to prevent hot partitions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Good - bounded by tenants\nPK: PRODUCT#tenant001\n\n// Avoid - unbounded by users\nPK: USER_ACTIVITY#user123  // Could create millions of partitions\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-include-tenant-in-pk",children:"5. Include Tenant in PK"}),"\n",(0,r.jsx)(n.p,{children:"Always include tenant code in PK for multi-tenant isolation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Good\nPK: PRODUCT#tenant001\n\n// Avoid\nPK: PRODUCT  // No tenant isolation\nSK: tenant001#productId  // Tenant in SK is less efficient\n"})}),"\n",(0,r.jsxs)(n.admonition,{title:"Tenant Code Normalization - Breaking Change",type:"danger",children:[(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"getUserContext()"})," function normalizes ",(0,r.jsx)(n.code,{children:"tenantCode"})," to lowercase. This affects partition key generation:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// User\'s Cognito has uppercase tenant\ncustom:tenant = "MY_TENANT"\n\n// getUserContext() returns lowercase\ntenantCode = "my_tenant"\n\n// Generated PK uses lowercase\nPK: PRODUCT#my_tenant\n'})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact on existing data:"})," If your existing data was saved with uppercase tenant codes in PK (e.g., ",(0,r.jsx)(n.code,{children:"PRODUCT#MY_TENANT"}),"), queries using normalized tenant codes will NOT find that data."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Migration required:"})," See ",(0,r.jsx)(n.a,{href:"/docs/data-migration-patterns#tenant-code-normalization-migration",children:"Tenant Code Normalization Migration"})," for migration strategies, or the ",(0,r.jsx)(n.a,{href:"/docs/migration/v1.1.0",children:"v1.1.0 Migration Guide"})," for complete upgrade instructions."]})]}),"\n",(0,r.jsx)(n.h3,{id:"6-use-common-tenant-for-shared-data",children:"6. Use Common Tenant for Shared Data"}),"\n",(0,r.jsx)(n.p,{children:"Use a common tenant code for data shared across tenants:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// User data (shared across tenants)\nPK: USER#common\nSK: sso#userId\n\n// User-tenant association\nPK: USER_TENANT#common\nSK: tenant001#userId\n"})}),"\n",(0,r.jsx)(n.h2,{id:"anti-patterns-to-avoid",children:"Anti-Patterns to Avoid"}),"\n",(0,r.jsx)(n.h3,{id:"1-embedding-too-much-in-keys",children:"1. Embedding Too Much in Keys"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// Avoid - too complex\nSK: ORDER#2024-01-15#electronics#high-priority#01HX7M...\n\n// Better - use attributes for filtering\nSK: ORDER#01HX7MBJK3V9WQBZ7XNDK5ZT2M\nattributes: {\n  date: "2024-01-15",\n  category: "electronics",\n  priority: "high"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-using-mutable-data-in-keys",children:"2. Using Mutable Data in Keys"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// Avoid - status changes\nSK: ORDER#pending#01HX7M...  // What happens when status changes?\n\n// Better - use attributes\nSK: ORDER#01HX7MBJK3V9WQBZ7XNDK5ZT2M\nattributes: { status: "pending" }\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-inconsistent-separators",children:"3. Inconsistent Separators"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Avoid - mixed separators\nSK: ORDER-01HX7M_item:001\n\n// Better - consistent separator\nSK: ORDER#01HX7M#ITEM#001\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-version-suffix-in-data-operations",children:"4. Version Suffix in Data Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// Avoid - including version in data table SK\nawait dataService.getItem({\n  pk: "PRODUCT#tenant001",\n  sk: "01HX7MBJK3V9WQBZ7XNDK5ZT2M@3"  // Version should not be here\n});\n\n// Better - always use removeSortKeyVersion\nconst cleanSk = removeSortKeyVersion(skWithVersion);\nawait dataService.getItem({ pk, sk: cleanSk });\n'})}),"\n",(0,r.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,r.jsx)(n.h3,{id:"key-functions",children:"Key Functions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Function"}),(0,r.jsx)(n.th,{children:"Signature"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"generateId"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(pk: string, sk: string) => string"})}),(0,r.jsx)(n.td,{children:"Combines PK and SK into ID, removes version from SK"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getTenantCode"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(pk: string) => string | undefined"})}),(0,r.jsx)(n.td,{children:"Extracts tenant code from PK"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"addSortKeyVersion"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(sk: string, version: number) => string"})}),(0,r.jsx)(n.td,{children:"Adds version suffix to SK"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"removeSortKeyVersion"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(sk: string) => string"})}),(0,r.jsx)(n.td,{children:"Removes version suffix from SK"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getSortKeyVersion"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(sk: string) => number"})}),(0,r.jsx)(n.td,{children:"Gets version number from SK (returns -1 if no version)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"masterPk"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(tenantCode?: string) => string"})}),(0,r.jsx)(n.td,{children:"Generates MASTER#tenantCode PK"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"seqPk"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(tenantCode?: string) => string"})}),(0,r.jsx)(n.td,{children:"Generates SEQ#tenantCode PK"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ttlSk"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(tableName: string) => string"})}),(0,r.jsx)(n.td,{children:"Generates TTL#tableName SK"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"constants",children:"Constants"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Constant"}),(0,r.jsx)(n.th,{children:"Value"}),(0,r.jsx)(n.th,{children:"Usage"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"KEY_SEPARATOR"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#"})}),(0,r.jsx)(n.td,{children:"Use for joining key components"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VER_SEPARATOR"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@"})}),(0,r.jsx)(n.td,{children:"Used internally for version suffix"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VERSION_FIRST"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})}),(0,r.jsx)(n.td,{children:"Use when creating new entities"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"VERSION_LATEST"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-1"})}),(0,r.jsx)(n.td,{children:"Returned when SK has no version"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TENANT_COMMON"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"common"})}),(0,r.jsx)(n.td,{children:"Use for cross-tenant shared data"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DEFAULT_TENANT_CODE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"single"})}),(0,r.jsx)(n.td,{children:"Default for single-tenant mode"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>a});var s=t(6540);const r={},i=s.createContext(r);function d(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);