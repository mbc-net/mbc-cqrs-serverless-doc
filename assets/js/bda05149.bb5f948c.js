"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[3129],{7224:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"build-todo-app","title":"Build a Todo App","description":"Build a complete Todo application step by step, learning CQRS patterns along the way.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/build-todo-app.md","sourceDirName":".","slug":"/build-todo-app","permalink":"/docs/build-todo-app","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"Build a complete Todo application step by step, learning CQRS patterns along the way."},"sidebar":"tutorialSidebar","previous":{"title":"Quickstart Tutorial","permalink":"/docs/quickstart-tutorial"},"next":{"title":"Architecture","permalink":"/docs/architecture"}}');var r=t(4848),s=t(8453);const a={description:"Build a complete Todo application step by step, learning CQRS patterns along the way."},i="Build a Todo App",d={},c=[{value:"What You&#39;ll Build",id:"what-youll-build",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Running the Samples",id:"running-the-samples",level:2},{value:"Part 1: Basic CQRS Implementation (step-02-create)",id:"part-1-basic-cqrs-implementation-step-02-create",level:2},{value:"Step 1: Create Helper Functions",id:"step-1-create-helper-functions",level:3},{value:"Step 2: Define DTOs",id:"step-2-define-dtos",level:3},{value:"Step 3: Define Entities",id:"step-3-define-entities",level:3},{value:"Step 4: Implement the Service",id:"step-4-implement-the-service",level:3},{value:"Step 5: Create the Controller",id:"step-5-create-the-controller",level:3},{value:"Step 6: Create the Module",id:"step-6-create-the-module",level:3},{value:"Part 2: RDS Data Synchronization (step-03-rds-sync)",id:"part-2-rds-data-synchronization-step-03-rds-sync",level:2},{value:"Update Prisma Schema",id:"update-prisma-schema",level:3},{value:"Create Data Sync Handler",id:"create-data-sync-handler",level:3},{value:"Register Handler in Module",id:"register-handler-in-module",level:3},{value:"Part 3: Read Operations (step-04-read)",id:"part-3-read-operations-step-04-read",level:2},{value:"Update Service",id:"update-service",level:3},{value:"Update Controller",id:"update-controller",level:3},{value:"Part 4: Search Operations (step-05-search)",id:"part-4-search-operations-step-05-search",level:2},{value:"Create Search DTO",id:"create-search-dto",level:3},{value:"Update Service",id:"update-service-1",level:3},{value:"Update Controller",id:"update-controller-1",level:3},{value:"Part 5: Update and Delete (step-06-update-delete)",id:"part-5-update-and-delete-step-06-update-delete",level:2},{value:"Update DTO",id:"update-dto",level:3},{value:"Update Service",id:"update-service-2",level:3},{value:"Update Controller",id:"update-controller-2",level:3},{value:"Part 6: Sequence Numbers (step-07-sequence)",id:"part-6-sequence-numbers-step-07-sequence",level:2},{value:"Install Sequence Module",id:"install-sequence-module",level:3},{value:"Update Module",id:"update-module",level:3},{value:"Update Service",id:"update-service-3",level:3},{value:"Part 7: Async Task Processing (complete/with-task)",id:"part-7-async-task-processing-completewith-task",level:2},{value:"Install Task Module",id:"install-task-module",level:3},{value:"Create Task Event",id:"create-task-event",level:3},{value:"Create Task Handler",id:"create-task-handler",level:3},{value:"Create Task Queue Event Factory",id:"create-task-queue-event-factory",level:3},{value:"Create Task Module",id:"create-task-module",level:3},{value:"Testing Your Application",id:"testing-your-application",level:2},{value:"Run Locally",id:"run-locally",level:3},{value:"Test API Endpoints",id:"test-api-endpoints",level:3},{value:"Unit Tests",id:"unit-tests",level:3},{value:"E2E Tests",id:"e2e-tests",level:3},{value:"Sample Code Repository",id:"sample-code-repository",level:2},{value:"Next Steps",id:"next-steps",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"build-a-todo-app",children:"Build a Todo App"})}),"\n",(0,r.jsx)(n.p,{children:"This tutorial guides you through building a complete Todo application using MBC CQRS Serverless. You'll learn CQRS patterns, event handling, and progressive feature additions."}),"\n",(0,r.jsxs)(n.p,{children:["This tutorial follows the ",(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples",children:"sample code"})," which is organized into progressive steps."]}),"\n",(0,r.jsx)(n.h2,{id:"what-youll-build",children:"What You'll Build"}),"\n",(0,r.jsx)(n.p,{children:"A fully functional Todo application with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CRUD operations for todos"}),"\n",(0,r.jsx)(n.li,{children:"CQRS pattern with Command/Query separation"}),"\n",(0,r.jsx)(n.li,{children:"Event-driven data synchronization to RDS"}),"\n",(0,r.jsx)(n.li,{children:"Optional: Sequence numbers for todos"}),"\n",(0,r.jsx)(n.li,{children:"Optional: Async task processing"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Completed the ",(0,r.jsx)(n.a,{href:"./quickstart-tutorial",children:"Quickstart Tutorial"})]}),"\n",(0,r.jsx)(n.li,{children:"Basic understanding of NestJS"}),"\n",(0,r.jsx)(n.li,{children:"Docker running for local development"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"running-the-samples",children:"Running the Samples"}),"\n",(0,r.jsx)(n.p,{children:"Each step has a complete working sample. To run any sample:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to the step directory\ncd step-02-create  # or any other step\n\n# Install dependencies\nnpm install\n\n# Terminal 1: Start Docker services\nnpm run offline:docker\n\n# Terminal 2: Run database migrations\nnpm run migrate\n\n# Terminal 3: Start the serverless offline server\nnpm run offline:sls\n"})}),"\n",(0,r.jsx)(n.h2,{id:"part-1-basic-cqrs-implementation-step-02-create",children:"Part 1: Basic CQRS Implementation (step-02-create)"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-create-helper-functions",children:"Step 1: Create Helper Functions"}),"\n",(0,r.jsxs)(n.p,{children:["First, create helper functions for managing partition keys and sort keys (",(0,r.jsx)(n.code,{children:"src/helpers/id.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { KEY_SEPARATOR } from '@mbc-cqrs-serverless/core'\nimport { ulid } from 'ulid'\n\nexport const TODO_PK_PREFIX = 'TODO'\n\nexport function generateTodoPk(tenantCode: string): string {\n  return `${TODO_PK_PREFIX}${KEY_SEPARATOR}${tenantCode}`\n}\n\nexport function generateTodoSk(): string {\n  return ulid() // ULID provides time-ordered unique identifiers\n}\n\nexport function parsePk(pk: string): { type: string; tenantCode: string } {\n  if (pk.split(KEY_SEPARATOR).length !== 2) {\n    throw new Error('Invalid PK')\n  }\n  const [type, tenantCode] = pk.split(KEY_SEPARATOR)\n  return { type, tenantCode }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-define-dtos",children:"Step 2: Define DTOs"}),"\n",(0,r.jsxs)(n.p,{children:["Create the todo attributes DTO (",(0,r.jsx)(n.code,{children:"dto/todo-attributes.dto.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { ApiProperty } from '@nestjs/swagger'\nimport { IsDateString, IsEnum, IsOptional, IsString } from 'class-validator'\n\n// TodoStatus enum (will be synced with Prisma in step-03)\nexport enum TodoStatus {\n  PENDING = 'PENDING',\n  IN_PROGRESS = 'IN_PROGRESS',\n  COMPLETED = 'COMPLETED',\n  CANCELED = 'CANCELED',\n}\n\nexport class TodoAttributes {\n  @IsOptional()\n  @IsString()\n  description?: string\n\n  @IsOptional()\n  @ApiProperty({ enum: TodoStatus })\n  @IsEnum(TodoStatus)\n  status?: TodoStatus\n\n  @IsOptional()\n  @IsDateString()\n  dueDate?: string\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Create the input DTO (",(0,r.jsx)(n.code,{children:"dto/create-todo.dto.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { Type } from 'class-transformer'\nimport { IsOptional, IsString, ValidateNested } from 'class-validator'\nimport { TodoAttributes } from './todo-attributes.dto'\n\nexport class CreateTodoDto {\n  @IsString()\n  name: string // The name field is required by CommandEntity\n\n  @Type(() => TodoAttributes)\n  @ValidateNested()\n  @IsOptional()\n  attributes?: TodoAttributes\n\n  constructor(partial: Partial<CreateTodoDto>) {\n    Object.assign(this, partial)\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-define-entities",children:"Step 3: Define Entities"}),"\n",(0,r.jsxs)(n.p,{children:["Create the command entity (",(0,r.jsx)(n.code,{children:"entity/todo-command.entity.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { CommandEntity } from '@mbc-cqrs-serverless/core'\nimport { TodoAttributes } from '../dto/todo-attributes.dto'\n\nexport class TodoCommandEntity extends CommandEntity {\n  attributes: TodoAttributes\n\n  constructor(partial: Partial<TodoCommandEntity>) {\n    super()\n    Object.assign(this, partial)\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Create the command DTO (",(0,r.jsx)(n.code,{children:"dto/todo-command.dto.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { CommandDto } from '@mbc-cqrs-serverless/core'\nimport { Type } from 'class-transformer'\nimport { IsOptional, ValidateNested } from 'class-validator'\nimport { TodoAttributes } from './todo-attributes.dto'\n\nexport class TodoCommandDto extends CommandDto {\n  @Type(() => TodoAttributes)\n  @ValidateNested()\n  @IsOptional()\n  attributes?: TodoAttributes\n\n  constructor(partial: Partial<TodoCommandDto>) {\n    super()\n    Object.assign(this, partial)\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Create the data entity (",(0,r.jsx)(n.code,{children:"entity/todo-data.entity.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { DataEntity } from '@mbc-cqrs-serverless/core'\nimport { TodoAttributes } from '../dto/todo-attributes.dto'\n\nexport class TodoDataEntity extends DataEntity {\n  attributes: TodoAttributes\n\n  constructor(partial: Partial<TodoDataEntity>) {\n    super(partial)\n    Object.assign(this, partial)\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-implement-the-service",children:"Step 4: Implement the Service"}),"\n",(0,r.jsxs)(n.p,{children:["Create the todo service (",(0,r.jsx)(n.code,{children:"todo.service.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import {\n  CommandService,\n  generateId,\n  getUserContext,\n  IInvoke,\n  VERSION_FIRST,\n} from '@mbc-cqrs-serverless/core'\nimport { Injectable, Logger } from '@nestjs/common'\nimport { generateTodoPk, generateTodoSk, TODO_PK_PREFIX } from 'src/helpers'\nimport { CreateTodoDto } from './dto/create-todo.dto'\nimport { TodoCommandDto } from './dto/todo-command.dto'\nimport { TodoDataEntity } from './entity/todo-data.entity'\n\n@Injectable()\nexport class TodoService {\n  private readonly logger = new Logger(TodoService.name)\n\n  constructor(private readonly commandService: CommandService) {}\n\n  async create(\n    createDto: CreateTodoDto,\n    opts: { invokeContext: IInvoke },\n  ): Promise<TodoDataEntity> {\n    // Get tenant code from user context (JWT token)\n    const { tenantCode } = getUserContext(opts.invokeContext)\n\n    // Generate partition key and sort key\n    const pk = generateTodoPk(tenantCode)\n    const sk = generateTodoSk()\n\n    // Create command DTO\n    const todo = new TodoCommandDto({\n      pk,\n      sk,\n      id: generateId(pk, sk),\n      tenantCode,\n      code: sk,\n      type: TODO_PK_PREFIX,\n      version: VERSION_FIRST, // Version for optimistic locking\n      name: createDto.name,\n      attributes: createDto.attributes,\n    })\n\n    this.logger.debug('Creating todo:', todo)\n\n    // Publish command to DynamoDB\n    const item = await this.commandService.publishAsync(todo, opts)\n\n    return new TodoDataEntity(item as TodoDataEntity)\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-5-create-the-controller",children:"Step 5: Create the Controller"}),"\n",(0,r.jsxs)(n.p,{children:["Create the controller (",(0,r.jsx)(n.code,{children:"todo.controller.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { IInvoke, INVOKE_CONTEXT } from '@mbc-cqrs-serverless/core'\nimport { Body, Controller, Logger, Post } from '@nestjs/common'\nimport { ApiTags } from '@nestjs/swagger'\nimport { CreateTodoDto } from './dto/create-todo.dto'\nimport { TodoDataEntity } from './entity/todo-data.entity'\nimport { TodoService } from './todo.service'\n\n@Controller('api/todo')\n@ApiTags('todo')\nexport class TodoController {\n  private readonly logger = new Logger(TodoController.name)\n\n  constructor(private readonly todoService: TodoService) {}\n\n  @Post('/')\n  async create(\n    @INVOKE_CONTEXT() invokeContext: IInvoke,\n    @Body() createDto: CreateTodoDto,\n  ): Promise<TodoDataEntity> {\n    this.logger.debug('createDto:', createDto)\n    return this.todoService.create(createDto, { invokeContext })\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-6-create-the-module",children:"Step 6: Create the Module"}),"\n",(0,r.jsxs)(n.p,{children:["Create the module (",(0,r.jsx)(n.code,{children:"todo.module.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { CommandModule } from '@mbc-cqrs-serverless/core'\nimport { Module } from '@nestjs/common'\nimport { TodoController } from './todo.controller'\nimport { TodoService } from './todo.service'\n\n@Module({\n  imports: [\n    CommandModule.register({\n      tableName: 'todo',\n      // Data sync handlers will be added in step-03-rds-sync\n      // dataSyncHandlers: [TodoDataSyncRdsHandler],\n    }),\n  ],\n  controllers: [TodoController],\n  providers: [TodoService],\n})\nexport class TodoModule {}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"part-2-rds-data-synchronization-step-03-rds-sync",children:"Part 2: RDS Data Synchronization (step-03-rds-sync)"}),"\n",(0,r.jsx)(n.p,{children:"Implement automatic data synchronization from DynamoDB to RDS."}),"\n",(0,r.jsx)(n.h3,{id:"update-prisma-schema",children:"Update Prisma Schema"}),"\n",(0,r.jsxs)(n.p,{children:["Add TodoStatus enum and Todo model to ",(0,r.jsx)(n.code,{children:"prisma/schema.prisma"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-prisma",children:'// Todo status enum\nenum TodoStatus {\n  PENDING\n  IN_PROGRESS\n  COMPLETED\n  CANCELED\n}\n\n// Todo model for RDS (MySQL) - synchronized from DynamoDB\nmodel Todo {\n  id         String   @id                        // Unique ID (generated from pk#sk)\n  cpk        String                              // Command partition key\n  csk        String                              // Command sort key (with version)\n  pk         String                              // Data partition key: TODO#tenantCode\n  sk         String                              // Data sort key: ULID\n  tenantCode String   @map("tenant_code")        // Tenant code for multi-tenancy\n  seq        Int      @default(0)                // Sequence number (for ordering)\n  code       String                              // Record code (same as sk)\n  name       String                              // Todo name/title\n  version    Int                                 // Version for optimistic locking\n  isDeleted  Boolean  @default(false) @map("is_deleted")  // Soft delete flag\n  createdBy  String   @default("") @map("created_by")     // Created by user\n  createdIp  String   @default("") @map("created_ip")     // Created from IP\n  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamp(0)\n  updatedBy  String   @default("") @map("updated_by")     // Updated by user\n  updatedIp  String   @default("") @map("updated_ip")     // Updated from IP\n  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamp(0)\n\n  // Todo-specific attributes\n  description String?    @default("") @map("description")  // Description\n  status      TodoStatus @default(PENDING) @map("status")  // Status\n  dueDate     DateTime?  @map("due_date")                  // Due date\n\n  // Indexes for efficient queries\n  @@unique([cpk, csk])           // Command table unique constraint\n  @@unique([pk, sk])             // Data table unique constraint\n  @@unique([tenantCode, code])   // Tenant + code unique constraint\n  @@index([tenantCode, name])    // Search by tenant and name\n  @@map("todos")                 // Table name in database\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"create-data-sync-handler",children:"Create Data Sync Handler"}),"\n",(0,r.jsxs)(n.p,{children:["Create the RDS sync handler (",(0,r.jsx)(n.code,{children:"handler/todo-rds.handler.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import {\n  CommandModel,\n  IDataSyncHandler,\n  removeSortKeyVersion,\n} from '@mbc-cqrs-serverless/core'\nimport { Injectable, Logger } from '@nestjs/common'\nimport { PrismaService } from 'src/prisma'\nimport { TodoAttributes } from '../dto/todo-attributes.dto'\n\n@Injectable()\nexport class TodoDataSyncRdsHandler implements IDataSyncHandler {\n  private readonly logger = new Logger(TodoDataSyncRdsHandler.name)\n\n  constructor(private readonly prismaService: PrismaService) {}\n\n  // Called when data is created or updated in DynamoDB\n  async up(cmd: CommandModel): Promise<any> {\n    this.logger.debug('Syncing to RDS:', cmd)\n\n    // Remove version suffix from sort key for the data table\n    const sk = removeSortKeyVersion(cmd.sk)\n    const attrs = cmd.attributes as TodoAttributes\n\n    await this.prismaService.todo.upsert({\n      where: { id: cmd.id },\n      // Update existing record\n      update: {\n        csk: cmd.sk,\n        name: cmd.name,\n        version: cmd.version,\n        seq: cmd.seq,\n        isDeleted: cmd.isDeleted || false,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n        updatedIp: cmd.updatedIp,\n        description: attrs?.description,\n        status: attrs?.status,\n        dueDate: attrs?.dueDate,\n      },\n      // Create new record\n      create: {\n        id: cmd.id,\n        cpk: cmd.pk,\n        csk: cmd.sk,\n        pk: cmd.pk,\n        sk,\n        code: sk,\n        name: cmd.name,\n        version: cmd.version,\n        tenantCode: cmd.tenantCode,\n        seq: cmd.seq,\n        createdAt: cmd.createdAt,\n        createdBy: cmd.createdBy,\n        createdIp: cmd.createdIp,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n        updatedIp: cmd.updatedIp,\n        description: attrs?.description,\n        status: attrs?.status,\n        dueDate: attrs?.dueDate,\n      },\n    })\n  }\n\n  // Called when data needs to be rolled back\n  async down(cmd: CommandModel): Promise<any> {\n    this.logger.debug('Rollback requested:', cmd)\n    // Implement rollback logic if needed\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"register-handler-in-module",children:"Register Handler in Module"}),"\n",(0,r.jsxs)(n.p,{children:["Update ",(0,r.jsx)(n.code,{children:"todo.module.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { CommandModule } from '@mbc-cqrs-serverless/core'\nimport { Module } from '@nestjs/common'\nimport { TodoDataSyncRdsHandler } from './handler/todo-rds.handler'\nimport { TodoController } from './todo.controller'\nimport { TodoService } from './todo.service'\n\n@Module({\n  imports: [\n    CommandModule.register({\n      tableName: 'todo',\n      // Register RDS sync handler to synchronize DynamoDB data to MySQL\n      dataSyncHandlers: [TodoDataSyncRdsHandler],\n    }),\n  ],\n  controllers: [TodoController],\n  providers: [TodoService],\n})\nexport class TodoModule {}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"part-3-read-operations-step-04-read",children:"Part 3: Read Operations (step-04-read)"}),"\n",(0,r.jsx)(n.p,{children:"Add methods to retrieve single items from DynamoDB."}),"\n",(0,r.jsx)(n.h3,{id:"update-service",children:"Update Service"}),"\n",(0,r.jsxs)(n.p,{children:["Add ",(0,r.jsx)(n.code,{children:"findOne"})," method to ",(0,r.jsx)(n.code,{children:"todo.service.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { DataService, NotFoundException } from '@mbc-cqrs-serverless/core'\n\n@Injectable()\nexport class TodoService {\n  constructor(\n    private readonly commandService: CommandService,\n    private readonly dataService: DataService, // Inject DataService\n  ) {}\n\n  // ... create method ...\n\n  async findOne(pk: string, sk: string): Promise<TodoDataEntity> {\n    this.logger.debug(`Finding todo: pk=${pk}, sk=${sk}`)\n\n    const item = await this.dataService.getItem({ pk, sk })\n\n    if (!item) {\n      throw new NotFoundException(`Todo not found: pk=${pk}, sk=${sk}`)\n    }\n\n    return new TodoDataEntity(item as TodoDataEntity)\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-controller",children:"Update Controller"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Get(':pk/:sk')\nasync findOne(\n  @Param('pk') pk: string,\n  @Param('sk') sk: string,\n): Promise<TodoDataEntity> {\n  this.logger.debug(`findOne: pk=${pk}, sk=${sk}`)\n  return this.todoService.findOne(pk, sk)\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"part-4-search-operations-step-05-search",children:"Part 4: Search Operations (step-05-search)"}),"\n",(0,r.jsx)(n.p,{children:"Implement search using RDS for efficient queries."}),"\n",(0,r.jsx)(n.h3,{id:"create-search-dto",children:"Create Search DTO"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { ApiPropertyOptional } from '@nestjs/swagger'\nimport { TodoStatus } from '@prisma/client' // Import from Prisma generated types\nimport { IsEnum, IsInt, IsOptional, IsString, Max, Min } from 'class-validator'\nimport { Transform, Type } from 'class-transformer'\n\nexport class SearchTodoDto {\n  @IsOptional()\n  @IsString()\n  @ApiPropertyOptional({ description: 'Search by name (partial match)' })\n  name?: string\n\n  @IsOptional()\n  @IsEnum(TodoStatus)\n  @ApiPropertyOptional({ enum: TodoStatus, description: 'Filter by status' })\n  status?: TodoStatus\n\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(1)\n  @ApiPropertyOptional({ description: 'Page number (1-based)', default: 1 })\n  page?: number = 1\n\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(1)\n  @Max(100)\n  @ApiPropertyOptional({ description: 'Items per page', default: 10 })\n  limit?: number = 10\n\n  @IsOptional()\n  @IsString()\n  @ApiPropertyOptional({\n    description: 'Sort field',\n    default: 'createdAt',\n    enum: ['name', 'status', 'createdAt', 'updatedAt'],\n  })\n  sortBy?: string = 'createdAt'\n\n  @IsOptional()\n  @IsString()\n  @Transform(({ value }) => value?.toUpperCase())\n  @ApiPropertyOptional({\n    description: 'Sort order',\n    default: 'DESC',\n    enum: ['ASC', 'DESC'],\n  })\n  sortOrder?: 'ASC' | 'DESC' = 'DESC'\n}\n\nexport class SearchTodoResultDto<T> {\n  data: T[]\n  total: number\n  page: number\n  limit: number\n  totalPages: number\n\n  constructor(data: T[], total: number, page: number, limit: number) {\n    this.data = data\n    this.total = total\n    this.page = page\n    this.limit = limit\n    this.totalPages = Math.ceil(total / limit)\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-service-1",children:"Update Service"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { Prisma } from '@prisma/client'\n\nasync findAll(\n  tenantCode: string,\n  searchDto: SearchTodoDto,\n): Promise<SearchTodoResultDto<TodoDataEntity>> {\n  this.logger.debug(`Searching todos for tenant: ${tenantCode}`, searchDto)\n\n  const { name, status, page = 1, limit = 10, sortBy = 'createdAt', sortOrder = 'DESC' } = searchDto\n\n  // Build where clause dynamically\n  const where: Prisma.TodoWhereInput = {\n    tenantCode,\n    isDeleted: false,\n  }\n\n  // Add name filter (partial match)\n  if (name) {\n    where.name = { contains: name }\n  }\n\n  // Add status filter (exact match)\n  if (status) {\n    where.status = status\n  }\n\n  // Build orderBy clause\n  const orderBy: Prisma.TodoOrderByWithRelationInput = {\n    [sortBy]: sortOrder.toLowerCase(),\n  }\n\n  // Calculate skip for pagination\n  const skip = (page - 1) * limit\n\n  // Execute query with pagination\n  const [data, total] = await Promise.all([\n    this.prismaService.todo.findMany({\n      where,\n      orderBy,\n      skip,\n      take: limit,\n    }),\n    this.prismaService.todo.count({ where }),\n  ])\n\n  // Map Prisma results to TodoDataEntity\n  const todos = data.map((item) => new TodoDataEntity({\n    ...item,\n    type: TODO_PK_PREFIX,\n    attributes: {\n      description: item.description,\n      status: item.status,\n      dueDate: item.dueDate?.toISOString(),\n    },\n  } as unknown as TodoDataEntity))\n\n  return new SearchTodoResultDto(todos, total, page, limit)\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-controller-1",children:"Update Controller"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Get('/')\nasync findAll(\n  @INVOKE_CONTEXT() invokeContext: IInvoke,\n  @Query() searchDto: SearchTodoDto,\n): Promise<SearchTodoResultDto<TodoDataEntity>> {\n  const { tenantCode } = getUserContext(invokeContext)\n  this.logger.debug(`findAll: tenantCode=${tenantCode}`, searchDto)\n  return this.todoService.findAll(tenantCode, searchDto)\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"part-5-update-and-delete-step-06-update-delete",children:"Part 5: Update and Delete (step-06-update-delete)"}),"\n",(0,r.jsx)(n.h3,{id:"update-dto",children:"Update DTO"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { ApiPropertyOptional } from '@nestjs/swagger'\nimport { IsInt, IsOptional, IsString, Min } from 'class-validator'\nimport { Type } from 'class-transformer'\nimport { TodoAttributes } from './todo-attributes.dto'\n\nexport class UpdateTodoDto {\n  @IsOptional()\n  @IsString()\n  @ApiPropertyOptional({ description: 'Todo name/title' })\n  name?: string\n\n  @IsOptional()\n  @ApiPropertyOptional({ description: 'Todo attributes (description, status, dueDate)' })\n  attributes?: TodoAttributes\n\n  @Type(() => Number)\n  @IsInt()\n  @Min(1)\n  @ApiPropertyOptional({ description: 'Version for optimistic locking' })\n  version: number // Required for optimistic locking\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-service-2",children:"Update Service"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { CommandPartialInputModel } from '@mbc-cqrs-serverless/core'\n\nasync update(\n  pk: string,\n  sk: string,\n  updateDto: UpdateTodoDto,\n  opts: { invokeContext: IInvoke },\n): Promise<TodoDataEntity> {\n  this.logger.debug(`Updating todo: pk=${pk}, sk=${sk}`, updateDto)\n\n  // First, verify the item exists\n  const currentItem = await this.dataService.getItem({ pk, sk })\n  if (!currentItem) {\n    throw new NotFoundException(`Todo not found: pk=${pk}, sk=${sk}`)\n  }\n\n  // Build the partial update object\n  const partialUpdate: CommandPartialInputModel = {\n    pk,\n    sk,\n    version: updateDto.version, // Required for optimistic locking\n    ...(updateDto.name !== undefined && { name: updateDto.name }),\n    ...(updateDto.attributes !== undefined && { attributes: updateDto.attributes }),\n  }\n\n  // Publish partial update command\n  const item = await this.commandService.publishPartialUpdateAsync(partialUpdate, opts)\n\n  return new TodoDataEntity(item as TodoDataEntity)\n}\n\nasync remove(\n  pk: string,\n  sk: string,\n  version: number,\n  opts: { invokeContext: IInvoke },\n): Promise<TodoDataEntity> {\n  this.logger.debug(`Removing todo: pk=${pk}, sk=${sk}, version=${version}`)\n\n  // First, verify the item exists\n  const currentItem = await this.dataService.getItem({ pk, sk })\n  if (!currentItem) {\n    throw new NotFoundException(`Todo not found: pk=${pk}, sk=${sk}`)\n  }\n\n  // Soft delete by setting isDeleted flag\n  const item = await this.commandService.publishPartialUpdateAsync(\n    {\n      pk,\n      sk,\n      version,\n      isDeleted: true,\n    },\n    opts,\n  )\n\n  return new TodoDataEntity(item as TodoDataEntity)\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-controller-2",children:"Update Controller"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Patch(':pk/:sk')\nasync update(\n  @INVOKE_CONTEXT() invokeContext: IInvoke,\n  @Param('pk') pk: string,\n  @Param('sk') sk: string,\n  @Body() updateDto: UpdateTodoDto,\n): Promise<TodoDataEntity> {\n  this.logger.debug(`update: pk=${pk}, sk=${sk}`, updateDto)\n  return this.todoService.update(pk, sk, updateDto, { invokeContext })\n}\n\n@Delete(':pk/:sk')\nasync remove(\n  @INVOKE_CONTEXT() invokeContext: IInvoke,\n  @Param('pk') pk: string,\n  @Param('sk') sk: string,\n  @Query('version') version: number,\n): Promise<TodoDataEntity> {\n  this.logger.debug(`remove: pk=${pk}, sk=${sk}, version=${version}`)\n  return this.todoService.remove(pk, sk, version, { invokeContext })\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"part-6-sequence-numbers-step-07-sequence",children:"Part 6: Sequence Numbers (step-07-sequence)"}),"\n",(0,r.jsx)(n.p,{children:"Add auto-incrementing todo numbers."}),"\n",(0,r.jsx)(n.h3,{id:"install-sequence-module",children:"Install Sequence Module"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install @mbc-cqrs-serverless/sequence\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-module",children:"Update Module"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { SequencesModule } from '@mbc-cqrs-serverless/sequence'\n\n@Module({\n  imports: [\n    CommandModule.register({\n      tableName: 'todo',\n      dataSyncHandlers: [TodoDataSyncRdsHandler],\n    }),\n    SequencesModule, // Add SequencesModule\n  ],\n  // ...\n})\nexport class TodoModule {}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-service-3",children:"Update Service"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { SequencesService } from '@mbc-cqrs-serverless/sequence'\n\n@Injectable()\nexport class TodoService {\n  constructor(\n    private readonly commandService: CommandService,\n    private readonly dataService: DataService,\n    private readonly prismaService: PrismaService,\n    private readonly sequencesService: SequencesService, // Inject SequencesService\n  ) {}\n\n  async create(\n    createDto: CreateTodoDto,\n    opts: { invokeContext: IInvoke },\n  ): Promise<TodoDataEntity> {\n    const { tenantCode } = getUserContext(opts.invokeContext)\n\n    // Generate sequential number\n    const seqItem = await this.sequencesService.generateSequenceItem(\n      {\n        tenantCode,\n        typeCode: TODO_PK_PREFIX,\n      },\n      opts,\n    )\n\n    this.logger.debug(`Generated sequence number: ${seqItem.formattedNo} for tenant: ${tenantCode}`)\n\n    const pk = generateTodoPk(tenantCode)\n    const sk = generateTodoSk() // SK is still ULID\n\n    const todo = new TodoCommandDto({\n      pk,\n      sk,\n      id: generateId(pk, sk),\n      tenantCode,\n      code: sk,\n      type: TODO_PK_PREFIX,\n      version: VERSION_FIRST,\n      seq: seqItem.no, // Store sequence number in seq field\n      name: createDto.name,\n      attributes: createDto.attributes,\n    })\n\n    this.logger.debug('Creating todo with sequence:', todo)\n\n    const item = await this.commandService.publishAsync(todo, opts)\n    return new TodoDataEntity(item as TodoDataEntity)\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"part-7-async-task-processing-completewith-task",children:"Part 7: Async Task Processing (complete/with-task)"}),"\n",(0,r.jsx)(n.p,{children:"Process long-running todo operations asynchronously."}),"\n",(0,r.jsx)(n.h3,{id:"install-task-module",children:"Install Task Module"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install @mbc-cqrs-serverless/task\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-task-event",children:"Create Task Event"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/todo/handler/todo-task.event.ts\nimport { TaskQueueEvent } from '@mbc-cqrs-serverless/task'\n\nexport class TodoTaskEvent extends TaskQueueEvent {}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-task-handler",children:"Create Task Handler"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/todo/handler/todo-task.event.handler.ts\nimport { EventHandler, IEventHandler } from '@mbc-cqrs-serverless/core'\nimport { Logger } from '@nestjs/common'\nimport { TodoTaskEvent } from './todo-task.event'\n\n@EventHandler(TodoTaskEvent)\nexport class TodoTaskEventHandler implements IEventHandler<TodoTaskEvent> {\n  private readonly logger = new Logger(TodoTaskEventHandler.name)\n\n  async execute(event: TodoTaskEvent): Promise<any> {\n    this.logger.debug('Processing todo task:', event)\n\n    // Implement your async task processing here\n    // e.g., send notification, sync to external system\n\n    return { processed: true }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-task-queue-event-factory",children:"Create Task Queue Event Factory"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/my-task/task-queue-event-factory.ts\nimport {\n  ITaskQueueEventFactory,\n  TaskQueueEvent,\n} from '@mbc-cqrs-serverless/task'\nimport { TodoTaskEvent } from '../todo/handler/todo-task.event'\n\nexport class TaskQueueEventFactory implements ITaskQueueEventFactory {\n  async transformTask(event: TaskQueueEvent): Promise<any[]> {\n    return [new TodoTaskEvent().fromSqsRecord(event)]\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-task-module",children:"Create Task Module"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/my-task/my-task.module.ts\nimport { TaskModule } from '@mbc-cqrs-serverless/task'\nimport { Module } from '@nestjs/common'\nimport { TaskQueueEventFactory } from './task-queue-event-factory'\n\n@Module({\n  imports: [\n    TaskModule.register({\n      taskQueueEventFactory: TaskQueueEventFactory,\n    }),\n  ],\n  exports: [TaskModule],\n})\nexport class MyTaskModule {}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"testing-your-application",children:"Testing Your Application"}),"\n",(0,r.jsx)(n.h3,{id:"run-locally",children:"Run Locally"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Start Docker services\nnpm run offline:docker\n\n# Terminal 2: Run database migrations\nnpm run migrate\n\n# Terminal 3: Start serverless offline\nnpm run offline:sls\n"})}),"\n",(0,r.jsx)(n.h3,{id:"test-api-endpoints",children:"Test API Endpoints"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Create a todo\ncurl -X POST http://localhost:3000/api/todo \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer <your-token>" \\\n  -d \'{"name": "My First Todo", "attributes": {"description": "Testing CQRS", "status": "PENDING"}}\'\n\n# List todos\ncurl "http://localhost:3000/api/todo?page=1&limit=10" \\\n  -H "Authorization: Bearer <your-token>"\n\n# Get a todo (Note: # in pk must be URL-encoded as %23)\ncurl "http://localhost:3000/api/todo/TODO%23MBC/<sk>" \\\n  -H "Authorization: Bearer <your-token>"\n\n# Update a todo\ncurl -X PATCH "http://localhost:3000/api/todo/TODO%23MBC/<sk>" \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer <your-token>" \\\n  -d \'{"name": "Updated Todo", "version": 1}\'\n\n# Delete a todo\ncurl -X DELETE "http://localhost:3000/api/todo/TODO%23MBC/<sk>?version=1" \\\n  -H "Authorization: Bearer <your-token>"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,r.jsxs)(n.p,{children:["Create unit tests for the service (",(0,r.jsx)(n.code,{children:"todo.service.spec.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { Test, TestingModule } from '@nestjs/testing'\nimport { NotFoundException } from '@nestjs/common'\nimport { CommandService, DataService } from '@mbc-cqrs-serverless/core'\nimport { TodoService } from './todo.service'\nimport { PrismaService } from '../prisma/prisma.service'\n\n// Mock getUserContext\njest.mock('@mbc-cqrs-serverless/core', () => ({\n  ...jest.requireActual('@mbc-cqrs-serverless/core'),\n  getUserContext: jest.fn().mockReturnValue({\n    tenantCode: 'test',\n    userId: 'user-123',\n  }),\n}))\n\ndescribe('TodoService', () => {\n  let service: TodoService\n  let commandService: jest.Mocked<CommandService>\n  let dataService: jest.Mocked<DataService>\n\n  beforeEach(async () => {\n    const mockCommandService = {\n      publishAsync: jest.fn(),\n      publishPartialUpdateAsync: jest.fn(),\n    }\n\n    const mockDataService = {\n      getItem: jest.fn(),\n    }\n\n    const mockPrismaService = {\n      todo: {\n        findMany: jest.fn(),\n        count: jest.fn(),\n      },\n    }\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        TodoService,\n        { provide: CommandService, useValue: mockCommandService },\n        { provide: DataService, useValue: mockDataService },\n        { provide: PrismaService, useValue: mockPrismaService },\n      ],\n    }).compile()\n\n    service = module.get<TodoService>(TodoService)\n    commandService = module.get(CommandService)\n    dataService = module.get(DataService)\n  })\n\n  describe('findOne', () => {\n    it('should return a todo when found', async () => {\n      const mockTodo = { pk: 'TODO#test', sk: '01HXY', name: 'Test' }\n      dataService.getItem.mockResolvedValue(mockTodo as any)\n\n      const result = await service.findOne('TODO#test', '01HXY')\n\n      expect(dataService.getItem).toHaveBeenCalledWith({\n        pk: 'TODO#test',\n        sk: '01HXY',\n      })\n      expect(result.name).toBe('Test')\n    })\n\n    it('should throw NotFoundException when not found', async () => {\n      dataService.getItem.mockResolvedValue(null)\n\n      await expect(service.findOne('TODO#test', 'nonexistent'))\n        .rejects.toThrow(NotFoundException)\n    })\n  })\n})\n"})}),"\n",(0,r.jsx)(n.p,{children:"Run unit tests:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm test\n"})}),"\n",(0,r.jsx)(n.h3,{id:"e2e-tests",children:"E2E Tests"}),"\n",(0,r.jsxs)(n.p,{children:["Create E2E tests (",(0,r.jsx)(n.code,{children:"test/todo.e2e-spec.ts"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { Test, TestingModule } from '@nestjs/testing'\nimport { INestApplication, ValidationPipe } from '@nestjs/common'\nimport request from 'supertest'\nimport { TodoController } from '../src/todo/todo.controller'\nimport { TodoService } from '../src/todo/todo.service'\n\n// Mock getUserContext\njest.mock('@mbc-cqrs-serverless/core', () => ({\n  ...jest.requireActual('@mbc-cqrs-serverless/core'),\n  getUserContext: jest.fn().mockReturnValue({\n    tenantCode: 'test',\n    userId: 'user-123',\n  }),\n  INVOKE_CONTEXT: () => () => {}, // Decorator stub\n}))\n\ndescribe('TodoController (e2e)', () => {\n  let app: INestApplication\n\n  const mockTodoData = {\n    pk: 'TODO#test',\n    sk: '01HXY',\n    name: 'Test Todo',\n    version: 1,\n  }\n\n  beforeAll(async () => {\n    const mockTodoService = {\n      create: jest.fn().mockResolvedValue(mockTodoData),\n      findOne: jest.fn().mockResolvedValue(mockTodoData),\n      findAll: jest.fn().mockResolvedValue({ data: [mockTodoData], total: 1 }),\n      update: jest.fn().mockResolvedValue(mockTodoData),\n      remove: jest.fn().mockResolvedValue({ ...mockTodoData, isDeleted: true }),\n    }\n\n    const moduleFixture: TestingModule = await Test.createTestingModule({\n      controllers: [TodoController],\n      providers: [{ provide: TodoService, useValue: mockTodoService }],\n    }).compile()\n\n    app = moduleFixture.createNestApplication()\n    app.useGlobalPipes(new ValidationPipe({ whitelist: true, transform: true }))\n    await app.init()\n  })\n\n  afterAll(async () => {\n    await app.close()\n  })\n\n  it('POST /api/todo - should create a todo', () => {\n    return request(app.getHttpServer())\n      .post('/api/todo')\n      .send({ name: 'New Todo', attributes: { status: 'PENDING' } })\n      .expect(201)\n  })\n\n  it('GET /api/todo/:pk/:sk - should return a todo', () => {\n    return request(app.getHttpServer())\n      .get('/api/todo/TODO%23TEST/01HXY')\n      .expect(200)\n  })\n\n  it('PATCH /api/todo/:pk/:sk - should update a todo', () => {\n    return request(app.getHttpServer())\n      .patch('/api/todo/TODO%23TEST/01HXY')\n      .send({ name: 'Updated', version: 1 })\n      .expect(200)\n  })\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Configure Jest for E2E tests (",(0,r.jsx)(n.code,{children:"test/jest-e2e.json"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "moduleFileExtensions": ["js", "json", "ts"],\n  "rootDir": ".",\n  "testEnvironment": "node",\n  "testRegex": ".e2e-spec.ts$",\n  "transform": {\n    "^.+\\\\.(t|j)s$": ["ts-jest", { "tsconfig": "<rootDir>/../tsconfig.json" }]\n  },\n  "moduleNameMapper": {\n    "^src/(.*)$": "<rootDir>/../src/$1"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Run E2E tests:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run test:e2e\n"})}),"\n",(0,r.jsx)(n.h2,{id:"sample-code-repository",children:"Sample Code Repository"}),"\n",(0,r.jsx)(n.p,{children:"The complete source code for each step is available at:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples/tree/main/step-01-setup",children:"step-01-setup"})," - Environment setup"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples/tree/main/step-02-create",children:"step-02-create"})," - Create operation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples/tree/main/step-03-rds-sync",children:"step-03-rds-sync"})," - RDS synchronization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples/tree/main/step-04-read",children:"step-04-read"})," - Read operation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples/tree/main/step-05-search",children:"step-05-search"})," - Search operation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples/tree/main/step-06-update-delete",children:"step-06-update-delete"})," - Update and delete"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples/tree/main/step-07-sequence",children:"step-07-sequence"})," - Sequence numbers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples/tree/main/complete/basic",children:"complete/basic"})," - Full basic implementation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/mbc-net/mbc-cqrs-serverless-samples/tree/main/complete/with-task",children:"complete/with-task"})," - With async task processing"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./deployment-guide",children:"Deployment Guide"})," - Deploy to AWS"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./testing",children:"Testing"})," - Write unit and e2e tests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./monitoring-logging",children:"Monitoring"})," - Add observability"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var o=t(6540);const r={},s=o.createContext(r);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);