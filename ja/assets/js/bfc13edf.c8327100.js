"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[2213],{9862:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"data-sync-handler-examples","title":"Data Sync Handler\u306e\u5b9f\u88c5\u4f8b","description":"\u69d8\u3005\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u304a\u3051\u308bData Sync Handler\u306e\u5b9f\u88c5\u4f8b\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/data-sync-handler-examples.md","sourceDirName":".","slug":"/data-sync-handler-examples","permalink":"/ja/docs/data-sync-handler-examples","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"\u69d8\u3005\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u304a\u3051\u308bData Sync Handler\u306e\u5b9f\u88c5\u4f8b\u3002"},"sidebar":"tutorialSidebar","previous":{"title":"\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\u30d1\u30bf\u30fc\u30f3","permalink":"/ja/docs/event-handling-patterns"},"next":{"title":"Service\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3","permalink":"/ja/docs/service-patterns"}}');var s=t(4848),d=t(8453);const a={description:"\u69d8\u3005\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u304a\u3051\u308bData Sync Handler\u306e\u5b9f\u88c5\u4f8b\u3002"},i="Data Sync Handler\u306e\u5b9f\u88c5\u4f8b",c={},o=[{value:"\u3053\u306e\u30ac\u30a4\u30c9\u3092\u4f7f\u7528\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0",id:"\u3053\u306e\u30ac\u30a4\u30c9\u3092\u4f7f\u7528\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0",level:2},{value:"\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u89e3\u6c7a\u3059\u308b\u554f\u984c",id:"\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u89e3\u6c7a\u3059\u308b\u554f\u984c",level:2},{value:"\u57fa\u672c\u69cb\u9020",id:"\u57fa\u672c\u69cb\u9020",level:2},{value:"\u4f8b1: \u30b7\u30f3\u30d7\u30eb\u306a\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540c\u671f",id:"\u4f8b1-\u30b7\u30f3\u30d7\u30eb\u306a\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540c\u671f",level:2},{value:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: \u691c\u7d22\u3068\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3092\u53ef\u80fd\u306b\u3059\u308b\u88fd\u54c1\u540c\u671f",id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-\u691c\u7d22\u3068\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3092\u53ef\u80fd\u306b\u3059\u308b\u88fd\u54c1\u540c\u671f",level:3},{value:"\u4f8b2: SK\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306b\u3088\u308b\u6761\u4ef6\u51e6\u7406",id:"\u4f8b2-sk\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306b\u3088\u308b\u6761\u4ef6\u51e6\u7406",level:2},{value:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: \u540c\u3058DynamoDB\u30c6\u30fc\u30d6\u30eb\u5185\u306eOrder\u3068OrderItem",id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-\u540c\u3058dynamodb\u30c6\u30fc\u30d6\u30eb\u5185\u306eorder\u3068orderitem",level:3},{value:"\u4f8b3: \u8907\u96d1\u306a\u5c5e\u6027\u5909\u63db",id:"\u4f8b3-\u8907\u96d1\u306a\u5c5e\u6027\u5909\u63db",level:2},{value:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: \u7570\u306a\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u30bf\u30a4\u30d7\u3092\u6301\u3064\u901a\u77e5",id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-\u7570\u306a\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u30bf\u30a4\u30d7\u3092\u6301\u3064\u901a\u77e5",level:3},{value:"\u4f8b4: PK\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0",id:"\u4f8b4-pk\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0",level:2},{value:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: \u5171\u6709\u30c6\u30fc\u30d6\u30eb\u5185\u306e\u30e6\u30fc\u30b6\u30fc\u30ec\u30b3\u30fc\u30c9",id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-\u5171\u6709\u30c6\u30fc\u30d6\u30eb\u5185\u306e\u30e6\u30fc\u30b6\u30fc\u30ec\u30b3\u30fc\u30c9",level:3},{value:"\u4f8b5: SK\u304b\u3089\u306e\u30c7\u30fc\u30bf\u62bd\u51fa",id:"\u4f8b5-sk\u304b\u3089\u306e\u30c7\u30fc\u30bf\u62bd\u51fa",level:2},{value:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: SK\u306b\u30ab\u30c6\u30b4\u30ea\u60c5\u5831\u3092\u6301\u3064\u30de\u30b9\u30bf\u30fc\u30c7\u30fc\u30bf",id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-sk\u306b\u30ab\u30c6\u30b4\u30ea\u60c5\u5831\u3092\u6301\u3064\u30de\u30b9\u30bf\u30fc\u30c7\u30fc\u30bf",level:3},{value:"\u8907\u6570\u30cf\u30f3\u30c9\u30e9\u30fc\u306e\u767b\u9332",id:"\u8907\u6570\u30cf\u30f3\u30c9\u30e9\u30fc\u306e\u767b\u9332",level:2},{value:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",id:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",level:2},{value:"1. SK\u304b\u3089\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5fc5\u305a\u524a\u9664\u3059\u308b",id:"1-sk\u304b\u3089\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5fc5\u305a\u524a\u9664\u3059\u308b",level:3},{value:"2. undefined isDeleted\u3092\u51e6\u7406\u3059\u308b",id:"2-undefined-isdeleted\u3092\u51e6\u7406\u3059\u308b",level:3},{value:"3. \u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u30af\u30ea\u30fc\u30f3\u306a\u30ad\u30fc\u306e\u4e21\u65b9\u3092\u4fdd\u5b58\u3059\u308b",id:"3-\u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u30af\u30ea\u30fc\u30f3\u306a\u30ad\u30fc\u306e\u4e21\u65b9\u3092\u4fdd\u5b58\u3059\u308b",level:3},{value:"4. \u5c5e\u6027\u306b\u578b\u3092\u5b9a\u7fa9\u3059\u308b",id:"4-\u5c5e\u6027\u306b\u578b\u3092\u5b9a\u7fa9\u3059\u308b",level:3},{value:"5. Null/Undefined\u3092\u9069\u5207\u306b\u51e6\u7406\u3059\u308b",id:"5-nullundefined\u3092\u9069\u5207\u306b\u51e6\u7406\u3059\u308b",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"data-sync-handler\u306e\u5b9f\u88c5\u4f8b",children:"Data Sync Handler\u306e\u5b9f\u88c5\u4f8b"})}),"\n",(0,s.jsx)(n.p,{children:"\u3053\u306e\u30ac\u30a4\u30c9\u3067\u306f\u3001DynamoDB\uff08\u30b3\u30de\u30f3\u30c9\u30bd\u30fc\u30b9\uff09\u304b\u3089RDS\uff08\u30af\u30a8\u30ea\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\uff09\u306b\u30c7\u30fc\u30bf\u3092\u81ea\u52d5\u7684\u306b\u540c\u671f\u3059\u308bData Sync Handler\u306e\u5b9f\u88c5\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\u3053\u308c\u306fCQRS\u8aad\u307f\u53d6\u308a\u30e2\u30c7\u30eb\u3092\u53ef\u80fd\u306b\u3059\u308b\u4e2d\u6838\u7684\u306a\u30e1\u30ab\u30cb\u30ba\u30e0\u3067\u3059\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u3053\u306e\u30ac\u30a4\u30c9\u3092\u4f7f\u7528\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0",children:"\u3053\u306e\u30ac\u30a4\u30c9\u3092\u4f7f\u7528\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0"}),"\n",(0,s.jsx)(n.p,{children:"\u4ee5\u4e0b\u306e\u5834\u5408\u306b\u3053\u306e\u30ac\u30a4\u30c9\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8907\u96d1\u306a\u30af\u30a8\u30ea\u306e\u305f\u3081\u306b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30c7\u30fc\u30bf\u3092DynamoDB\u304b\u3089MySQL/PostgreSQL\u306b\u540c\u671f\u3059\u308b"}),"\n",(0,s.jsx)(n.li,{children:"\u30cd\u30b9\u30c8\u3055\u308c\u305fJSON\u5c5e\u6027\u3092\u30ea\u30ec\u30fc\u30b7\u30e7\u30ca\u30eb\u30ab\u30e9\u30e0\u306b\u5909\u63db\u3059\u308b"}),"\n",(0,s.jsx)(n.li,{children:"\u540c\u3058DynamoDB\u30c6\u30fc\u30d6\u30eb\u5185\u306e\u7570\u306a\u308b\u30ec\u30b3\u30fc\u30c9\u30bf\u30a4\u30d7\u3092\u51e6\u7406\u3059\u308b"}),"\n",(0,s.jsx)(n.li,{children:"\u89aa\u5b50\u95a2\u4fc2\uff08Order\u3001OrderItem\uff09\u3092\u500b\u5225\u306b\u51e6\u7406\u3059\u308b"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u89e3\u6c7a\u3059\u308b\u554f\u984c",children:"\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u89e3\u6c7a\u3059\u308b\u554f\u984c"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u554f\u984c"}),(0,s.jsx)(n.th,{children:"\u89e3\u6c7a\u7b56"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"DynamoDB\u306fJOIN\u3084\u8907\u96d1\u306a\u30d5\u30a3\u30eb\u30bf\u30fc\u304c\u3067\u304d\u306a\u3044"}),(0,s.jsx)(n.td,{children:"SQL\u30af\u30a8\u30ea\u306e\u305f\u3081\u306b\u30c7\u30fc\u30bf\u3092RDS\u306b\u540c\u671f"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"SK\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30b5\u30d5\u30a3\u30c3\u30af\u30b9\u304c\u91cd\u8907\u30ec\u30b3\u30fc\u30c9\u3092\u5f15\u304d\u8d77\u3053\u3059"}),(0,s.jsx)(n.td,{children:"upsert\u524d\u306bremoveSortKeyVersion()\u3092\u4f7f\u7528"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u7570\u306a\u308b\u30ec\u30b3\u30fc\u30c9\u30bf\u30a4\u30d7\u306f\u7570\u306a\u308bRDS\u30c6\u30fc\u30d6\u30eb\u304c\u5fc5\u8981"}),(0,s.jsx)(n.td,{children:"\u30cf\u30f3\u30c9\u30e9\u30fc\u3067SK\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306b\u3088\u308a\u30d5\u30a3\u30eb\u30bf\u30fc"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"JSON\u5c5e\u6027\u3092\u691c\u7d22\u53ef\u80fd\u306a\u30ab\u30e9\u30e0\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b"}),(0,s.jsx)(n.td,{children:"\u5c5e\u6027\u3092\u500b\u5225\u306eRDS\u30ab\u30e9\u30e0\u306b\u30de\u30c3\u30d4\u30f3\u30b0"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"\u57fa\u672c\u69cb\u9020",children:"\u57fa\u672c\u69cb\u9020"}),"\n",(0,s.jsx)(n.p,{children:"\u3059\u3079\u3066\u306eData Sync Handler\u306f\u4ee5\u4e0b\u306e\u57fa\u672c\u69cb\u9020\u306b\u5f93\u3044\u307e\u3059\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import { CommandModel, IDataSyncHandler, removeSortKeyVersion } from "@mbc-cqrs-serverless/core";\nimport { Injectable, Logger } from "@nestjs/common";\nimport { PrismaService } from "src/prisma";\n\n@Injectable()\nexport class EntityDataSyncRdsHandler implements IDataSyncHandler {\n  private readonly logger = new Logger(EntityDataSyncRdsHandler.name);\n\n  constructor(private readonly prismaService: PrismaService) {}\n\n  async up(cmd: CommandModel): Promise<any> {\n    // Sync data to RDS\n  }\n\n  async down(cmd: CommandModel): Promise<any> {\n    // Optional: Handle rollback (usually just logs)\n    this.logger.debug(cmd);\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f8b1-\u30b7\u30f3\u30d7\u30eb\u306a\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540c\u671f",children:"\u4f8b1: \u30b7\u30f3\u30d7\u30eb\u306a\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540c\u671f"}),"\n",(0,s.jsx)(n.h3,{id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-\u691c\u7d22\u3068\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3092\u53ef\u80fd\u306b\u3059\u308b\u88fd\u54c1\u540c\u671f",children:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: \u691c\u7d22\u3068\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3092\u53ef\u80fd\u306b\u3059\u308b\u88fd\u54c1\u540c\u671f"}),"\n",(0,s.jsx)(n.p,{children:"\u30b7\u30ca\u30ea\u30aa: DynamoDB\u306b\u4fdd\u5b58\u3055\u308c\u305f\u88fd\u54c1\u3092\u30ab\u30c6\u30b4\u30ea\u3001\u4fa1\u683c\u5e2f\u3001\u30c6\u30ad\u30b9\u30c8\u3067\u691c\u7d22\u53ef\u80fd\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u89e3\u6c7a\u7b56: RDS\u306b\u540c\u671f\u3057\u3001\u52b9\u7387\u7684\u306a\u30af\u30a8\u30ea\u306e\u305f\u3081\u306b\u5c5e\u6027\u3092\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u4ed8\u304d\u30ab\u30e9\u30e0\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import {\n  CommandModel,\n  IDataSyncHandler,\n  removeSortKeyVersion\n} from "@mbc-cqrs-serverless/core";\nimport { Injectable, Logger } from "@nestjs/common";\nimport { PrismaService } from "src/prisma";\n\ninterface ProductAttributes {\n  name: string;\n  description: string;\n  price: number;\n  category: string;\n  inStock: boolean;\n}\n\n@Injectable()\nexport class ProductDataSyncRdsHandler implements IDataSyncHandler {\n  private readonly logger = new Logger(ProductDataSyncRdsHandler.name);\n\n  constructor(private readonly prismaService: PrismaService) {}\n\n  async up(cmd: CommandModel): Promise<any> {\n    // Remove version suffix from sort key (e.g., "PROD001@1" -> "PROD001")\n    const sk = removeSortKeyVersion(cmd.sk);\n    const attrs = cmd.attributes as ProductAttributes;\n\n    await this.prismaService.product.upsert({\n      where: { id: cmd.id },\n      update: {\n        pk: cmd.pk,\n        sk: sk,\n        name: cmd.name,\n        code: cmd.code,\n        version: cmd.version,\n        tenantCode: cmd.tenantCode,\n        // Map attributes to columns\n        description: attrs.description,\n        price: attrs.price,\n        category: attrs.category,\n        inStock: attrs.inStock,\n        // Audit fields\n        isDeleted: cmd.isDeleted ?? false,\n        createdAt: cmd.createdAt,\n        createdBy: cmd.createdBy,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n      create: {\n        id: cmd.id,\n        pk: cmd.pk,\n        sk: sk,\n        // Also store original keys with version for reference\n        cpk: cmd.pk,\n        csk: cmd.sk,\n        name: cmd.name,\n        code: cmd.code,\n        version: cmd.version,\n        tenantCode: cmd.tenantCode,\n        description: attrs.description,\n        price: attrs.price,\n        category: attrs.category,\n        inStock: attrs.inStock,\n        isDeleted: cmd.isDeleted ?? false,\n        createdAt: cmd.createdAt,\n        createdBy: cmd.createdBy,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n    });\n  }\n\n  async down(cmd: CommandModel): Promise<any> {\n    this.logger.debug(cmd);\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f8b2-sk\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306b\u3088\u308b\u6761\u4ef6\u51e6\u7406",children:"\u4f8b2: SK\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306b\u3088\u308b\u6761\u4ef6\u51e6\u7406"}),"\n",(0,s.jsx)(n.h3,{id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-\u540c\u3058dynamodb\u30c6\u30fc\u30d6\u30eb\u5185\u306eorder\u3068orderitem",children:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: \u540c\u3058DynamoDB\u30c6\u30fc\u30d6\u30eb\u5185\u306eOrder\u3068OrderItem"}),"\n",(0,s.jsx)(n.p,{children:"\u30b7\u30ca\u30ea\u30aa: Order\u3068\u305d\u306e\u30a2\u30a4\u30c6\u30e0\u306fPK\u3092\u5171\u6709\u3059\u308b\u304cSK\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u304c\u7570\u306a\u308b\u3002\u305d\u308c\u305e\u308c\u7570\u306a\u308bRDS\u30c6\u30fc\u30d6\u30eb\u306b\u4fdd\u5b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u89e3\u6c7a\u7b56: SK\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u9069\u5207\u306a\u540c\u671f\u30ed\u30b8\u30c3\u30af\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import {\n  CommandModel,\n  IDataSyncHandler,\n  KEY_SEPARATOR,\n  removeSortKeyVersion\n} from "@mbc-cqrs-serverless/core";\nimport { Injectable, Logger } from "@nestjs/common";\nimport { PrismaService } from "src/prisma";\n\nconst ORDER_SK_PREFIX = "ORDER";\nconst ORDER_ITEM_SK_PREFIX = "ORDER_ITEM";\n\ninterface OrderAttributes {\n  customerId: string;\n  status: string;\n  totalAmount: number;\n  orderDate: string;\n}\n\ninterface OrderItemAttributes {\n  orderId: string;\n  productId: string;\n  quantity: number;\n  unitPrice: number;\n}\n\n@Injectable()\nexport class OrderDataSyncRdsHandler implements IDataSyncHandler {\n  private readonly logger = new Logger(OrderDataSyncRdsHandler.name);\n\n  constructor(private readonly prismaService: PrismaService) {}\n\n  async up(cmd: CommandModel): Promise<any> {\n    const sk = removeSortKeyVersion(cmd.sk);\n\n    // Process only ORDER records, skip ORDER_ITEM\n    if (sk.startsWith(ORDER_SK_PREFIX) && !sk.startsWith(ORDER_ITEM_SK_PREFIX)) {\n      await this.syncOrder(cmd, sk);\n    } else if (sk.startsWith(ORDER_ITEM_SK_PREFIX)) {\n      await this.syncOrderItem(cmd, sk);\n    }\n    // Skip other record types\n  }\n\n  private async syncOrder(cmd: CommandModel, sk: string): Promise<void> {\n    const attrs = cmd.attributes as OrderAttributes;\n\n    await this.prismaService.order.upsert({\n      where: { id: cmd.id },\n      update: {\n        pk: cmd.pk,\n        sk: sk,\n        code: cmd.code,\n        version: cmd.version,\n        customerId: attrs.customerId,\n        status: attrs.status,\n        totalAmount: attrs.totalAmount,\n        orderDate: new Date(attrs.orderDate),\n        isDeleted: cmd.isDeleted ?? false,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n      create: {\n        id: cmd.id,\n        pk: cmd.pk,\n        sk: sk,\n        cpk: cmd.pk,\n        csk: cmd.sk,\n        code: cmd.code,\n        version: cmd.version,\n        tenantCode: cmd.tenantCode,\n        customerId: attrs.customerId,\n        status: attrs.status,\n        totalAmount: attrs.totalAmount,\n        orderDate: new Date(attrs.orderDate),\n        isDeleted: cmd.isDeleted ?? false,\n        createdAt: cmd.createdAt,\n        createdBy: cmd.createdBy,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n    });\n  }\n\n  private async syncOrderItem(cmd: CommandModel, sk: string): Promise<void> {\n    const attrs = cmd.attributes as OrderItemAttributes;\n\n    await this.prismaService.orderItem.upsert({\n      where: { id: cmd.id },\n      update: {\n        pk: cmd.pk,\n        sk: sk,\n        orderId: attrs.orderId,\n        productId: attrs.productId,\n        quantity: attrs.quantity,\n        unitPrice: attrs.unitPrice,\n        isDeleted: cmd.isDeleted ?? false,\n        updatedAt: cmd.updatedAt,\n      },\n      create: {\n        id: cmd.id,\n        pk: cmd.pk,\n        sk: sk,\n        cpk: cmd.pk,\n        csk: cmd.sk,\n        tenantCode: cmd.tenantCode,\n        orderId: attrs.orderId,\n        productId: attrs.productId,\n        quantity: attrs.quantity,\n        unitPrice: attrs.unitPrice,\n        isDeleted: cmd.isDeleted ?? false,\n        createdAt: cmd.createdAt,\n        updatedAt: cmd.updatedAt,\n      },\n    });\n  }\n\n  async down(cmd: CommandModel): Promise<any> {\n    this.logger.debug(cmd);\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f8b3-\u8907\u96d1\u306a\u5c5e\u6027\u5909\u63db",children:"\u4f8b3: \u8907\u96d1\u306a\u5c5e\u6027\u5909\u63db"}),"\n",(0,s.jsx)(n.h3,{id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-\u7570\u306a\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u30bf\u30a4\u30d7\u3092\u6301\u3064\u901a\u77e5",children:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: \u7570\u306a\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u30bf\u30a4\u30d7\u3092\u6301\u3064\u901a\u77e5"}),"\n",(0,s.jsx)(n.p,{children:"\u30b7\u30ca\u30ea\u30aa: \u901a\u77e5\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u30bf\u30a4\u30d7\uff08Alert\u3001Info\u3001Promotion\uff09\u306b\u57fa\u3065\u3044\u3066\u7570\u306a\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u69cb\u9020\u3092\u6301\u3064\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u89e3\u6c7a\u7b56: \u30bf\u30a4\u30d7\u56fa\u6709\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u62bd\u51fa\u3057\u3001\u5171\u901a\u306eRDS\u30ab\u30e9\u30e0\u306b\u30d5\u30e9\u30c3\u30c8\u5316\u3059\u308b\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import {\n  CommandModel,\n  IDataSyncHandler,\n  removeSortKeyVersion\n} from "@mbc-cqrs-serverless/core";\nimport { Injectable, Logger } from "@nestjs/common";\nimport { PrismaService } from "src/prisma";\n\nenum NotificationType {\n  ALERT = "ALERT",\n  INFO = "INFO",\n  PROMOTION = "PROMOTION",\n}\n\ninterface AlertContent {\n  title: string;\n  message: string;\n  severity: string;\n}\n\ninterface InfoContent {\n  headline: string;\n  body: string;\n}\n\ninterface PromotionContent {\n  campaignName: string;\n  discount: number;\n  validUntil: string;\n}\n\ninterface NotificationAttributes {\n  type: NotificationType;\n  alertContent?: AlertContent;\n  infoContent?: InfoContent;\n  promotionContent?: PromotionContent;\n  targetUsers: string[];\n  tags: string[];\n  schedule: {\n    startDate: string;\n    endDate: string;\n  };\n}\n\n@Injectable()\nexport class NotificationDataSyncRdsHandler implements IDataSyncHandler {\n  private readonly logger = new Logger(NotificationDataSyncRdsHandler.name);\n\n  constructor(private readonly prismaService: PrismaService) {}\n\n  async up(cmd: CommandModel): Promise<any> {\n    const sk = removeSortKeyVersion(cmd.sk);\n    const attrs = cmd.attributes as NotificationAttributes;\n\n    // Extract title based on notification type\n    const title = this.getTitle(attrs);\n    const body = this.getBody(attrs);\n\n    await this.prismaService.notification.upsert({\n      where: { id: cmd.id },\n      update: {\n        pk: cmd.pk,\n        sk: sk,\n        code: cmd.code,\n        version: cmd.version,\n        type: attrs.type,\n        title: title,\n        body: body,\n        // Convert arrays to comma-separated strings for RDS\n        targetUsers: attrs.targetUsers?.join(",") ?? null,\n        tags: attrs.tags?.join(",") ?? null,\n        // Handle dates\n        startDate: attrs.schedule?.startDate\n          ? new Date(attrs.schedule.startDate)\n          : null,\n        endDate: attrs.schedule?.endDate\n          ? new Date(attrs.schedule.endDate)\n          : null,\n        isDeleted: cmd.isDeleted ?? false,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n      create: {\n        id: cmd.id,\n        pk: cmd.pk,\n        sk: sk,\n        cpk: cmd.pk,\n        csk: cmd.sk,\n        code: cmd.code,\n        version: cmd.version,\n        tenantCode: cmd.tenantCode,\n        type: attrs.type,\n        title: title,\n        body: body,\n        targetUsers: attrs.targetUsers?.join(",") ?? null,\n        tags: attrs.tags?.join(",") ?? null,\n        startDate: attrs.schedule?.startDate\n          ? new Date(attrs.schedule.startDate)\n          : null,\n        endDate: attrs.schedule?.endDate\n          ? new Date(attrs.schedule.endDate)\n          : null,\n        isDeleted: cmd.isDeleted ?? false,\n        createdAt: cmd.createdAt,\n        createdBy: cmd.createdBy,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n    });\n  }\n\n  /**\n   * Extract title based on notification type\n   */\n  private getTitle(attrs: NotificationAttributes): string | null {\n    switch (attrs.type) {\n      case NotificationType.ALERT:\n        return attrs.alertContent?.title ?? null;\n      case NotificationType.INFO:\n        return attrs.infoContent?.headline ?? null;\n      case NotificationType.PROMOTION:\n        return attrs.promotionContent?.campaignName ?? null;\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * Extract body/message based on notification type\n   */\n  private getBody(attrs: NotificationAttributes): string | null {\n    switch (attrs.type) {\n      case NotificationType.ALERT:\n        return attrs.alertContent?.message ?? null;\n      case NotificationType.INFO:\n        return attrs.infoContent?.body ?? null;\n      case NotificationType.PROMOTION:\n        return `${attrs.promotionContent?.discount}% off until ${attrs.promotionContent?.validUntil}`;\n      default:\n        return null;\n    }\n  }\n\n  async down(cmd: CommandModel): Promise<any> {\n    this.logger.debug(cmd);\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f8b4-pk\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0",children:"\u4f8b4: PK\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0"}),"\n",(0,s.jsx)(n.h3,{id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-\u5171\u6709\u30c6\u30fc\u30d6\u30eb\u5185\u306e\u30e6\u30fc\u30b6\u30fc\u30ec\u30b3\u30fc\u30c9",children:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: \u5171\u6709\u30c6\u30fc\u30d6\u30eb\u5185\u306e\u30e6\u30fc\u30b6\u30fc\u30ec\u30b3\u30fc\u30c9"}),"\n",(0,s.jsx)(n.p,{children:"\u30b7\u30ca\u30ea\u30aa: \u8907\u6570\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30bf\u30a4\u30d7\u304cDynamoDB\u30c6\u30fc\u30d6\u30eb\u3092\u5171\u6709\u3002\u30cf\u30f3\u30c9\u30e9\u30fc\u306fUSER\u30ec\u30b3\u30fc\u30c9\u306e\u307f\u3092\u51e6\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u89e3\u6c7a\u7b56: PK\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001\u4e00\u81f4\u3057\u306a\u3044\u30ec\u30b3\u30fc\u30c9\u3092\u65e9\u671f\u306b\u30b9\u30ad\u30c3\u30d7\u3059\u308b\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import {\n  CommandModel,\n  IDataSyncHandler,\n  KEY_SEPARATOR,\n  removeSortKeyVersion\n} from "@mbc-cqrs-serverless/core";\nimport { Injectable, Logger } from "@nestjs/common";\nimport { PrismaService } from "src/prisma";\n\nconst USER_PK_PREFIX = "USER";\n\ninterface UserAttributes {\n  email: string;\n  userId: string;\n  displayName: string;\n  role: string;\n  lastLoginAt?: string;\n}\n\n@Injectable()\nexport class UserDataSyncRdsHandler implements IDataSyncHandler {\n  private readonly logger = new Logger(UserDataSyncRdsHandler.name);\n\n  constructor(private readonly prismaService: PrismaService) {}\n\n  async up(cmd: CommandModel): Promise<any> {\n    // Only process USER records\n    if (!cmd.pk.startsWith(USER_PK_PREFIX + KEY_SEPARATOR)) {\n      return;\n    }\n\n    // Skip temporary or profile records\n    if (cmd.sk.startsWith("temp") || cmd.sk.startsWith("profile")) {\n      return;\n    }\n\n    const sk = removeSortKeyVersion(cmd.sk);\n    const attrs = cmd.attributes as UserAttributes;\n\n    await this.prismaService.user.upsert({\n      where: { id: cmd.id },\n      update: {\n        pk: cmd.pk,\n        sk: sk,\n        code: cmd.code,\n        version: cmd.version,\n        email: attrs.email,\n        userId: attrs.userId,\n        displayName: attrs.displayName,\n        role: attrs.role,\n        lastLoginAt: attrs.lastLoginAt\n          ? new Date(attrs.lastLoginAt)\n          : null,\n        isDeleted: cmd.isDeleted ?? false,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n      create: {\n        id: cmd.id,\n        pk: cmd.pk,\n        sk: sk,\n        cpk: cmd.pk,\n        csk: cmd.sk,\n        code: cmd.code,\n        version: cmd.version,\n        tenantCode: cmd.tenantCode,\n        type: cmd.type,\n        email: attrs.email,\n        userId: attrs.userId,\n        displayName: attrs.displayName,\n        role: attrs.role,\n        lastLoginAt: attrs.lastLoginAt\n          ? new Date(attrs.lastLoginAt)\n          : null,\n        isDeleted: cmd.isDeleted ?? false,\n        createdAt: cmd.createdAt,\n        createdBy: cmd.createdBy,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n    });\n  }\n\n  async down(cmd: CommandModel): Promise<any> {\n    this.logger.debug(cmd);\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f8b5-sk\u304b\u3089\u306e\u30c7\u30fc\u30bf\u62bd\u51fa",children:"\u4f8b5: SK\u304b\u3089\u306e\u30c7\u30fc\u30bf\u62bd\u51fa"}),"\n",(0,s.jsx)(n.h3,{id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9-sk\u306b\u30ab\u30c6\u30b4\u30ea\u60c5\u5831\u3092\u6301\u3064\u30de\u30b9\u30bf\u30fc\u30c7\u30fc\u30bf",children:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9: SK\u306b\u30ab\u30c6\u30b4\u30ea\u60c5\u5831\u3092\u6301\u3064\u30de\u30b9\u30bf\u30fc\u30c7\u30fc\u30bf"}),"\n",(0,s.jsx)(n.p,{children:'\u30b7\u30ca\u30ea\u30aa: SK\u306b\u306f"SETTING#category#code"\u306e\u3088\u3046\u306a\u69cb\u9020\u5316\u30c7\u30fc\u30bf\u304c\u542b\u307e\u308c\u3001\u500b\u5225\u306e\u30ab\u30e9\u30e0\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002'}),"\n",(0,s.jsx)(n.p,{children:"\u89e3\u6c7a\u7b56: SK\u3092\u89e3\u6790\u3057\u3066\u30bf\u30a4\u30d7\u3001\u30ab\u30c6\u30b4\u30ea\u3001\u30b3\u30fc\u30c9\u3092\u62bd\u51fa\u3057\u3066\u30af\u30a8\u30ea\u306b\u4f7f\u7528\u3059\u308b\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import {\n  CommandModel,\n  IDataSyncHandler,\n  KEY_SEPARATOR,\n  removeSortKeyVersion\n} from "@mbc-cqrs-serverless/core";\nimport { Injectable, Logger } from "@nestjs/common";\nimport { PrismaService } from "src/prisma";\n\nconst SETTING_SK_PREFIX = "SETTING";\nconst DATA_SK_PREFIX = "DATA";\n\ninterface MasterAttributes {\n  value: any;\n  displayOrder: number;\n  isActive: boolean;\n}\n\n@Injectable()\nexport class MasterDataSyncRdsHandler implements IDataSyncHandler {\n  private readonly logger = new Logger(MasterDataSyncRdsHandler.name);\n\n  constructor(private readonly prismaService: PrismaService) {}\n\n  async up(cmd: CommandModel): Promise<any> {\n    const sk = removeSortKeyVersion(cmd.sk);\n    const attrs = cmd.attributes as MasterAttributes;\n\n    // Parse SK to extract type and code\n    // SK format: "SETTING#category#code" or "DATA#category#code"\n    const skParts = sk.split(KEY_SEPARATOR);\n\n    let masterType: string;\n    let masterCategory: string;\n    let masterCode: string;\n\n    if (sk.startsWith(SETTING_SK_PREFIX)) {\n      masterType = "SETTING";\n      masterCategory = skParts[1] ?? "";\n      masterCode = skParts[2] ?? "";\n    } else if (sk.startsWith(DATA_SK_PREFIX)) {\n      masterType = "DATA";\n      masterCategory = skParts[1] ?? "";\n      masterCode = skParts[2] ?? "";\n    } else {\n      // Skip unknown types\n      return;\n    }\n\n    await this.prismaService.master.upsert({\n      where: { id: cmd.id },\n      update: {\n        pk: cmd.pk,\n        sk: sk,\n        code: cmd.code,\n        version: cmd.version,\n        masterType: masterType,\n        masterCategory: masterCategory,\n        masterCode: masterCode,\n        name: cmd.name,\n        value: JSON.stringify(attrs.value),\n        displayOrder: attrs.displayOrder,\n        isActive: attrs.isActive,\n        isDeleted: cmd.isDeleted ?? false,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n      create: {\n        id: cmd.id,\n        pk: cmd.pk,\n        sk: sk,\n        cpk: cmd.pk,\n        csk: cmd.sk,\n        code: cmd.code,\n        version: cmd.version,\n        tenantCode: cmd.tenantCode,\n        masterType: masterType,\n        masterCategory: masterCategory,\n        masterCode: masterCode,\n        name: cmd.name,\n        value: JSON.stringify(attrs.value),\n        displayOrder: attrs.displayOrder,\n        isActive: attrs.isActive,\n        isDeleted: cmd.isDeleted ?? false,\n        createdAt: cmd.createdAt,\n        createdBy: cmd.createdBy,\n        updatedAt: cmd.updatedAt,\n        updatedBy: cmd.updatedBy,\n      },\n    });\n  }\n\n  async down(cmd: CommandModel): Promise<any> {\n    this.logger.debug(cmd);\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u8907\u6570\u30cf\u30f3\u30c9\u30e9\u30fc\u306e\u767b\u9332",children:"\u8907\u6570\u30cf\u30f3\u30c9\u30e9\u30fc\u306e\u767b\u9332"}),"\n",(0,s.jsx)(n.p,{children:"\u7570\u306a\u308b\u30ec\u30b3\u30fc\u30c9\u30bf\u30a4\u30d7\u3092\u51e6\u7406\u3059\u308b\u305f\u3081\u306b\u3001\u540c\u3058\u30c6\u30fc\u30d6\u30eb\u306b\u8907\u6570\u306e\u30cf\u30f3\u30c9\u30e9\u30fc\u3092\u767b\u9332\u3067\u304d\u307e\u3059\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import { CommandModule } from "@mbc-cqrs-serverless/core";\nimport { Module } from "@nestjs/common";\n\nimport { OrderDataSyncRdsHandler } from "./handler/order-rds.handler";\nimport { OrderItemDataSyncRdsHandler } from "./handler/order-item-rds.handler";\nimport { OrderHistoryDataSyncRdsHandler } from "./handler/order-history-rds.handler";\nimport { OrderController } from "./order.controller";\nimport { OrderService } from "./order.service";\n\n@Module({\n  imports: [\n    CommandModule.register({\n      tableName: "order",\n      dataSyncHandlers: [\n        OrderDataSyncRdsHandler,\n        OrderItemDataSyncRdsHandler,\n        OrderHistoryDataSyncRdsHandler,\n      ],\n    }),\n  ],\n  controllers: [OrderController],\n  providers: [OrderService],\n})\nexport class OrderModule {}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",children:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9"}),"\n",(0,s.jsx)(n.h3,{id:"1-sk\u304b\u3089\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5fc5\u305a\u524a\u9664\u3059\u308b",children:"1. SK\u304b\u3089\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5fc5\u305a\u524a\u9664\u3059\u308b"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"removeSortKeyVersion()"}),"\u3092\u4f7f\u7528\u3057\u3066RDS\u30b9\u30c8\u30ec\u30fc\u30b8\u7528\u306e\u4e00\u8cab\u3057\u305fSK\u3092\u53d6\u5f97\u3057\u307e\u3059\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'const sk = removeSortKeyVersion(cmd.sk); // "ORDER001@3" -> "ORDER001"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2-undefined-isdeleted\u3092\u51e6\u7406\u3059\u308b",children:"2. undefined isDeleted\u3092\u51e6\u7406\u3059\u308b"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"isDeleted"}),"\u306b\u306f\u5e38\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u63d0\u4f9b\u3057\u307e\u3059\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"isDeleted: cmd.isDeleted ?? false,\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-\u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u30af\u30ea\u30fc\u30f3\u306a\u30ad\u30fc\u306e\u4e21\u65b9\u3092\u4fdd\u5b58\u3059\u308b",children:"3. \u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u30af\u30ea\u30fc\u30f3\u306a\u30ad\u30fc\u306e\u4e21\u65b9\u3092\u4fdd\u5b58\u3059\u308b"}),"\n",(0,s.jsx)(n.p,{children:"create\u64cd\u4f5c\u3067\u53c2\u7167\u7528\u306b\u30aa\u30ea\u30b8\u30ca\u30eb\u30ad\u30fc\uff08cpk, csk\uff09\u3092\u4fdd\u5b58\u3057\u307e\u3059\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"create: {\n  pk: cmd.pk,     // Cleaned PK\n  sk: sk,         // Cleaned SK (without version)\n  cpk: cmd.pk,    // Original PK (same as pk for most cases)\n  csk: cmd.sk,    // Original SK (with version)\n  // ...\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-\u5c5e\u6027\u306b\u578b\u3092\u5b9a\u7fa9\u3059\u308b",children:"4. \u5c5e\u6027\u306b\u578b\u3092\u5b9a\u7fa9\u3059\u308b"}),"\n",(0,s.jsx)(n.p,{children:"\u578b\u5b89\u5168\u6027\u3092\u78ba\u4fdd\u3059\u308b\u305f\u3081\u306b\u5c5e\u6027\u306b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface ProductAttributes {\n  name: string;\n  price: number;\n  // ...\n}\n\nconst attrs = cmd.attributes as ProductAttributes;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-nullundefined\u3092\u9069\u5207\u306b\u51e6\u7406\u3059\u308b",children:"5. Null/Undefined\u3092\u9069\u5207\u306b\u51e6\u7406\u3059\u308b"}),"\n",(0,s.jsx)(n.p,{children:"nullish coalescing\u6f14\u7b97\u5b50\u3068\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u30c1\u30a7\u30fc\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'tags: attrs.tags?.join(",") ?? null,\nstartDate: attrs.schedule?.startDate\n  ? new Date(attrs.schedule.startDate)\n  : null,\n'})})]})}function m(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var r=t(6540);const s={},d=r.createContext(s);function a(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);