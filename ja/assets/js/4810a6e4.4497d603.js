"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[3610],{4333:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"common-issues","title":"\u3088\u304f\u3042\u308b\u554f\u984c","description":"MBC CQRS Serverless\u4f7f\u7528\u6642\u306b\u3088\u304f\u767a\u751f\u3059\u308b\u554f\u984c\u306e\u89e3\u6c7a\u7b56\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/common-issues.md","sourceDirName":".","slug":"/common-issues","permalink":"/ja/docs/common-issues","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"MBC CQRS Serverless\u4f7f\u7528\u6642\u306b\u3088\u304f\u767a\u751f\u3059\u308b\u554f\u984c\u306e\u89e3\u6c7a\u7b56\u3002"},"sidebar":"tutorialSidebar","previous":{"title":"e2e(\u30a8\u30f3\u30c9\u30c4\u30fc\u30a8\u30f3\u30c9)\u30c6\u30b9\u30c8","permalink":"/ja/docs/e2e-test"},"next":{"title":"\u30c7\u30d0\u30c3\u30b0\u30ac\u30a4\u30c9","permalink":"/ja/docs/debugging-guide"}}');var r=s(4848),i=s(8453);const d={description:"MBC CQRS Serverless\u4f7f\u7528\u6642\u306b\u3088\u304f\u767a\u751f\u3059\u308b\u554f\u984c\u306e\u89e3\u6c7a\u7b56\u3002"},c="\u3088\u304f\u3042\u308b\u554f\u984c",a={},t=[{value:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7",id:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7",level:2},{value:"npm install\u304c\u30d4\u30a2\u4f9d\u5b58\u95a2\u4fc2\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b",id:"npm-install\u304c\u30d4\u30a2\u4f9d\u5b58\u95a2\u4fc2\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b",level:3},{value:"npm install\u304cnode-waf\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b",id:"npm-install\u304cnode-waf\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b",level:3},{value:"CLI\u30b3\u30de\u30f3\u30c9\u304c\u898b\u3064\u304b\u3089\u306a\u3044",id:"cli\u30b3\u30de\u30f3\u30c9\u304c\u898b\u3064\u304b\u3089\u306a\u3044",level:3},{value:"Docker\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u306a\u3044",id:"docker\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u306a\u3044",level:3},{value:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u554f\u984c",id:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u554f\u984c",level:2},{value:"DynamoDB\u63a5\u7d9a\u304c\u62d2\u5426\u3055\u308c\u308b",id:"dynamodb\u63a5\u7d9a\u304c\u62d2\u5426\u3055\u308c\u308b",level:3},{value:"Prisma\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc",id:"prisma\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc",level:3},{value:"Master API\u304c500 Internal Server Error\u3092\u8fd4\u3059",id:"master-api\u304c500-internal-server-error\u3092\u8fd4\u3059",level:3},{value:"import_tmp\u30b9\u30c8\u30ea\u30fc\u30e0\u304c\u898b\u3064\u304b\u3089\u305aServerless Offline\u304c\u5931\u6557\u3059\u308b",id:"missing-import-tmp-table",level:3},{value:"DynamoDB\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u8d85\u904e",id:"dynamodb\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u8d85\u904e",level:3},{value:"Lambda\u30a8\u30e9\u30fc",id:"lambda\u30a8\u30e9\u30fc",level:2},{value:"Lambda\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8",id:"lambda\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8",level:3},{value:"Lambda\u30e1\u30e2\u30ea\u4e0d\u8db3",id:"lambda\u30e1\u30e2\u30ea\u4e0d\u8db3",level:3},{value:"Lambda\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u898b\u3064\u304b\u3089\u306a\u3044",id:"lambda\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u898b\u3064\u304b\u3089\u306a\u3044",level:3},{value:"\u8a8d\u8a3c\u30a8\u30e9\u30fc",id:"\u8a8d\u8a3c\u30a8\u30e9\u30fc",level:2},{value:"Cognito\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9",id:"cognito\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9",level:3},{value:"CORS\u30a8\u30e9\u30fc",id:"cors\u30a8\u30e9\u30fc",level:3},{value:"\u30a4\u30d9\u30f3\u30c8\u51e6\u7406",id:"\u30a4\u30d9\u30f3\u30c8\u51e6\u7406",level:2},{value:"\u30a4\u30d9\u30f3\u30c8\u304c\u51e6\u7406\u3055\u308c\u306a\u3044",id:"\u30a4\u30d9\u30f3\u30c8\u304c\u51e6\u7406\u3055\u308c\u306a\u3044",level:3},{value:"\u91cd\u8907\u30a4\u30d9\u30f3\u30c8\u51e6\u7406",id:"\u91cd\u8907\u30a4\u30d9\u30f3\u30c8\u51e6\u7406",level:3},{value:"Step Functions",id:"step-functions",level:2},{value:"Step Functions\u5b9f\u884c\u306e\u5931\u6557",id:"step-functions\u5b9f\u884c\u306e\u5931\u6557",level:3},{value:"Step Functions\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8",id:"step-functions\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8",level:3},{value:"\u30c7\u30d7\u30ed\u30a4\u306e\u554f\u984c",id:"\u30c7\u30d7\u30ed\u30a4\u306e\u554f\u984c",level:2},{value:"CDK\u30c7\u30d7\u30ed\u30a4\u306e\u5931\u6557",id:"cdk\u30c7\u30d7\u30ed\u30a4\u306e\u5931\u6557",level:3},{value:"\u30ea\u30bd\u30fc\u30b9\u304c\u65e2\u306b\u5b58\u5728\u3059\u308b",id:"\u30ea\u30bd\u30fc\u30b9\u304c\u65e2\u306b\u5b58\u5728\u3059\u308b",level:3},{value:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u554f\u984c",id:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u554f\u984c",level:2},{value:"API\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u9045\u3044",id:"api\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u9045\u3044",level:3},{value:"Lambda\u9ad8\u30b3\u30b9\u30c8",id:"lambda\u9ad8\u30b3\u30b9\u30c8",level:3},{value:"\u30d8\u30eb\u30d7\u3092\u5f97\u308b",id:"\u30d8\u30eb\u30d7\u3092\u5f97\u308b",level:2}];function o(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u3088\u304f\u3042\u308b\u554f\u984c",children:"\u3088\u304f\u3042\u308b\u554f\u984c"})}),"\n",(0,r.jsx)(e.p,{children:"\u3053\u306e\u30da\u30fc\u30b8\u3067\u306f\u3001MBC CQRS Serverless\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u6642\u306b\u3088\u304f\u3042\u308b\u554f\u984c\u3068\u305d\u306e\u89e3\u6c7a\u7b56\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7",children:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7"}),"\n",(0,r.jsx)(e.h3,{id:"npm-install\u304c\u30d4\u30a2\u4f9d\u5b58\u95a2\u4fc2\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b",children:"npm install\u304c\u30d4\u30a2\u4f9d\u5b58\u95a2\u4fc2\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": npm install\u304c\u30d4\u30a2\u4f9d\u5b58\u95a2\u4fc2\u306e\u8b66\u544a\u307e\u305f\u306f\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# --legacy-peer-deps\u30d5\u30e9\u30b0\u3092\u4f7f\u7528\nnpm install --legacy-peer-deps\n\n# \u307e\u305f\u306f\u3001npm\u3092\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u66f4\u65b0\nnpm install -g npm@latest\n"})}),"\n",(0,r.jsx)(e.h3,{id:"npm-install\u304cnode-waf\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b",children:"npm install\u304cnode-waf\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": npm install\u304c ",(0,r.jsx)(e.code,{children:"node-waf: command not found"})," \u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b\uff08\u901a\u5e38\u306fzlib\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u539f\u56e0\uff09\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"npm error path node_modules/zlib\nnpm error command sh -c node-waf clean || true; node-waf configure build\nnpm error sh: node-waf: command not found\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u539f\u56e0"}),": \u4e00\u90e8\u306e\u30ec\u30ac\u30b7\u30fc\u306aserverless-offline\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u3001\u5ec3\u6b62\u3055\u308c\u305fnode-waf\u30d3\u30eb\u30c9\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u30d3\u30eb\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30b9\u30ad\u30c3\u30d7\nnpm install --legacy-peer-deps --ignore-scripts\n\n# \u305d\u306e\u5f8c\u3001postinstall\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u624b\u52d5\u3067\u5b9f\u884c\nnpx prisma generate\n"})}),"\n",(0,r.jsx)(e.h3,{id:"cli\u30b3\u30de\u30f3\u30c9\u304c\u898b\u3064\u304b\u3089\u306a\u3044",children:"CLI\u30b3\u30de\u30f3\u30c9\u304c\u898b\u3064\u304b\u3089\u306a\u3044"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": ",(0,r.jsx)(e.code,{children:"mbc-cqrs"})," \u30b3\u30de\u30f3\u30c9\u304c\u8a8d\u8b58\u3055\u308c\u306a\u3044\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Install globally\nnpm install -g @mbc-cqrs-serverless/cli\n\n# Or use npx\nnpx @mbc-cqrs-serverless/cli new my-app\n"})}),"\n",(0,r.jsx)(e.h3,{id:"docker\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u306a\u3044",children:"Docker\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u306a\u3044"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": docker-compose up\u304c\u5931\u6557\u3059\u308b\u304b\u3001\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u306a\u3044\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check Docker is running\ndocker info\n\n# Clean up and restart\ndocker-compose -f infra-local/docker-compose.yml down -v\ndocker-compose -f infra-local/docker-compose.yml up -d\n\n# Check logs for specific service\ndocker-compose -f infra-local/docker-compose.yml logs dynamodb-local\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u554f\u984c",children:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u554f\u984c"}),"\n",(0,r.jsx)(e.h3,{id:"dynamodb\u63a5\u7d9a\u304c\u62d2\u5426\u3055\u308c\u308b",children:"DynamoDB\u63a5\u7d9a\u304c\u62d2\u5426\u3055\u308c\u308b"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": DynamoDB Local\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"DynamoDB Local\u304c\u5b9f\u884c\u4e2d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"docker ps | grep dynamodb\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"\u8a2d\u5b9a\u3067\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8URL\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"// Should be http://localhost:8000 for local development\ndynamodbEndpoint: 'http://localhost:8000'\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"3",children:["\n",(0,r.jsx)(e.li,{children:"\u30c6\u30fc\u30d6\u30eb\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"aws dynamodb list-tables --endpoint-url http://localhost:8000\n"})}),"\n",(0,r.jsx)(e.h3,{id:"prisma\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc",children:"Prisma\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": Prisma migrate\u304c\u63a5\u7d9a\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"PostgreSQL\u304c\u5b9f\u884c\u4e2d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"docker ps | grep postgres\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:".env\u306eDATABASE_URL\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'DATABASE_URL="postgresql://postgres:postgres@localhost:5432/myapp?schema=public"\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"3",children:["\n",(0,r.jsx)(e.li,{children:"\u30ea\u30bb\u30c3\u30c8\u3057\u3066\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u518d\u5b9f\u884c\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"npx prisma migrate reset\nnpx prisma migrate dev\n"})}),"\n",(0,r.jsx)(e.h3,{id:"master-api\u304c500-internal-server-error\u3092\u8fd4\u3059",children:"Master API\u304c500 Internal Server Error\u3092\u8fd4\u3059"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": Master API\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff08",(0,r.jsx)(e.code,{children:"/api/master-setting/list"}),"\u3001",(0,r.jsx)(e.code,{children:"/api/master-data/list"}),"\uff09\u304c500 Internal Server Error\u3092\u8fd4\u3059\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u539f\u56e0"}),": Master\u30e2\u30b8\u30e5\u30fc\u30eb\u306fDynamoDB\u30c6\u30fc\u30d6\u30eb\u3068RDS\u30c6\u30fc\u30d6\u30eb\u306e\u4e21\u65b9\u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002RDS\u306b",(0,r.jsx)(e.code,{children:"masters"}),"\u30c6\u30fc\u30d6\u30eb\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3001API\u306f500\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3057\u307e\u3059\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["RDS\u306b",(0,r.jsx)(e.code,{children:"masters"}),"\u30c6\u30fc\u30d6\u30eb\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff1a"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# MySQL\u306e\u5834\u5408\ndocker exec mysql mysql -u root -proot mydb -e "SHOW TABLES LIKE \'masters\';"\n\n# PostgreSQL\u306e\u5834\u5408\ndocker exec postgres psql -U postgres -d mydb -c "\\dt masters"\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"\u30c6\u30fc\u30d6\u30eb\u304c\u306a\u3044\u5834\u5408\u306f\u3001Prisma\u30b9\u30ad\u30fc\u30de\u306b\u8ffd\u52a0\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-prisma",children:'model Master {\n  pk         String   @db.VarChar(256)\n  sk         String   @db.VarChar(512)\n  id         String   @id @db.VarChar(256)\n  name       String   @db.VarChar(256)\n  code       String   @db.VarChar(256)\n  version    Int      @default(0)\n  tenantCode String   @map("tenant_code") @db.VarChar(64)\n  type       String   @db.VarChar(256)\n  attributes Json?\n  isDeleted  Boolean  @default(false) @map("is_deleted")\n  createdAt  DateTime @default(now()) @map("created_at")\n  createdBy  String   @default("system") @map("created_by") @db.VarChar(256)\n  updatedAt  DateTime @default(now()) @updatedAt @map("updated_at")\n  updatedBy  String   @default("system") @map("updated_by") @db.VarChar(256)\n\n  @@unique([pk, sk])\n  @@index([tenantCode])\n  @@map("masters")\n}\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"3",children:["\n",(0,r.jsx)(e.li,{children:"Prisma\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"npx prisma migrate dev --name add_master_table\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"4",children:["\n",(0,r.jsx)(e.li,{children:"DynamoDB\u30c6\u30fc\u30d6\u30eb\u3082\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"aws dynamodb list-tables --endpoint-url http://localhost:8000 | grep master\n# \u8868\u793a\u3055\u308c\u308b\u306f\u305a: master-command, master-data, master-history\n"})}),"\n",(0,r.jsx)(e.h3,{id:"missing-import-tmp-table",children:"import_tmp\u30b9\u30c8\u30ea\u30fc\u30e0\u304c\u898b\u3064\u304b\u3089\u305aServerless Offline\u304c\u5931\u6557\u3059\u308b"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": ",(0,r.jsx)(e.code,{children:"LOCAL_DDB_IMPORT_TMP_STREAM"}),"\u74b0\u5883\u5909\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001",(0,r.jsx)(e.code,{children:"npm run offline:sls"}),"\u304c\u5931\u6557\u3059\u308b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u539f\u56e0"}),": ",(0,r.jsx)(e.code,{children:"prisma/dynamodbs/"}),"\u306b",(0,r.jsx)(e.code,{children:"import_tmp.json"}),"\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u308c\u304c\u306a\u3044\u3068\u3001",(0,r.jsx)(e.code,{children:"npm run migrate"}),"\u304c",(0,r.jsx)(e.code,{children:"import_tmp"})," DynamoDB\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3067\u304d\u305a\u3001\u30b9\u30c8\u30ea\u30fc\u30e0ARN\u304c",(0,r.jsx)(e.code,{children:".env"}),"\u306b\u66f8\u304d\u8fbc\u307e\u308c\u307e\u305b\u3093\u3002"]}),"\n",(0,r.jsx)(e.admonition,{title:"\u65e2\u77e5\u306e\u554f\u984c\uff08v1.1.1\u3067\u4fee\u6b63\u6e08\u307f\uff09",type:"warning",children:(0,r.jsxs)(e.p,{children:["v1.1.1\u3088\u308a\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001CLI\u3067\u30b9\u30ad\u30e3\u30d5\u30a9\u30fc\u30eb\u30c9\u3055\u308c\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b",(0,r.jsx)(e.code,{children:"import_tmp.json"}),"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3053\u308c\u306f",(0,r.jsx)(e.a,{href:"/docs/changelog#v111",children:"\u30d0\u30fc\u30b8\u30e7\u30f31.1.1"}),"\u3067\u4fee\u6b63\u3055\u308c\u307e\u3057\u305f\u3002"]})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.p,{children:["\u4ee5\u4e0b\u306e\u5185\u5bb9\u3067",(0,r.jsx)(e.code,{children:"prisma/dynamodbs/import_tmp.json"}),"\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "TableName": "import_tmp",\n  "AttributeDefinitions": [\n    { "AttributeName": "pk", "AttributeType": "S" },\n    { "AttributeName": "sk", "AttributeType": "S" }\n  ],\n  "KeySchema": [\n    { "AttributeName": "pk", "KeyType": "HASH" },\n    { "AttributeName": "sk", "KeyType": "RANGE" }\n  ],\n  "BillingMode": "PAY_PER_REQUEST",\n  "StreamSpecification": {\n    "StreamEnabled": true,\n    "StreamViewType": "NEW_IMAGE"\n  },\n  "TableClass": "STANDARD",\n  "DeletionProtectionEnabled": true\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u305d\u306e\u5f8c\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u518d\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"npm run migrate\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u81ea\u52d5\u7684\u306b\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u3001",(0,r.jsx)(e.code,{children:"LOCAL_DDB_IMPORT_TMP_STREAM"}),"\u30a8\u30f3\u30c8\u30ea\u3092",(0,r.jsx)(e.code,{children:".env"}),"\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"dynamodb\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u8d85\u904e",children:"DynamoDB\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u8d85\u904e"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": ProvisionedThroughputExceededException\u30a8\u30e9\u30fc\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u958b\u767a\u7528\uff1a\u30aa\u30f3\u30c7\u30de\u30f3\u30c9\u8ab2\u91d1\u30e2\u30fc\u30c9\u3092\u4f7f\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u672c\u756a\u7528\uff1a\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u5bb9\u91cf\u3092\u5897\u3084\u3059\u304b\u3001\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3092\u6709\u52b9\u5316"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"// CDK configuration for on-demand\nconst table = new dynamodb.Table(this, 'Table', {\n  billingMode: dynamodb.BillingMode.PAY_PER_REQUEST,\n});\n"})}),"\n",(0,r.jsx)(e.h2,{id:"lambda\u30a8\u30e9\u30fc",children:"Lambda\u30a8\u30e9\u30fc"}),"\n",(0,r.jsx)(e.h3,{id:"lambda\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8",children:"Lambda\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": \u30bf\u30b9\u30af\u304cX\u79d2\u5f8c\u306b\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u305f\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"CDK\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u5ef6\u9577\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"const handler = new lambda.Function(this, 'Handler', {\n  timeout: cdk.Duration.seconds(30),\n});\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"\u30b3\u30fc\u30eb\u30c9\u30b9\u30bf\u30fc\u30c8\u3092\u6700\u9069\u5316\uff1a"}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u30d0\u30f3\u30c9\u30eb\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f"}),"\n",(0,r.jsx)(e.li,{children:"\u91cd\u8981\u306a\u95a2\u6570\u306b\u306f\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u6e08\u307f\u540c\u6642\u5b9f\u884c\u3092\u4f7f\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u521d\u671f\u5316\u51e6\u7406\u3092\u30cf\u30f3\u30c9\u30e9\u30fc\u5916\u306b\u79fb\u52d5"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"lambda\u30e1\u30e2\u30ea\u4e0d\u8db3",children:"Lambda\u30e1\u30e2\u30ea\u4e0d\u8db3"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": Runtime.ExitError\u307e\u305f\u306f\u30e1\u30e2\u30ea\u5236\u9650\u8d85\u904e\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"const handler = new lambda.Function(this, 'Handler', {\n  memorySize: 1024, // Increase memory\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"lambda\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u898b\u3064\u304b\u3089\u306a\u3044",children:"Lambda\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u898b\u3064\u304b\u3089\u306a\u3044"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": \u30e2\u30b8\u30e5\u30fc\u30eb 'xxx' \u304c\u898b\u3064\u304b\u3089\u306a\u3044\u30a8\u30e9\u30fc\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u30d0\u30f3\u30c9\u30ea\u30f3\u30b0\u8a2d\u5b9a\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"// Ensure dependencies are bundled\nconst handler = new lambda_nodejs.NodejsFunction(this, 'Handler', {\n  bundling: {\n    externalModules: [], // Don't exclude anything\n  },\n});\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"package.json\u306e\u4f9d\u5b58\u95a2\u4fc2\u304c\u6b63\u3057\u3044\u3053\u3068\u3092\u78ba\u8a8d"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u8a8d\u8a3c\u30a8\u30e9\u30fc",children:"\u8a8d\u8a3c\u30a8\u30e9\u30fc"}),"\n",(0,r.jsx)(e.h3,{id:"cognito\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9",children:"Cognito\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": 401 Unauthorized\u307e\u305f\u306f\u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u306e\u5931\u6557\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Cognito\u8a2d\u5b9a\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"// Check USER_POOL_ID and CLIENT_ID match\nCOGNITO_USER_POOL_ID=ap-northeast-1_xxxxxx\nCOGNITO_CLIENT_ID=xxxxxxxxxxxxxxxxxxxxxxxxxx\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u30671\u6642\u9593\u5f8c\u306b\u671f\u9650\u5207\u308c"}),"\n",(0,r.jsx)(e.li,{children:"\u30c8\u30fc\u30af\u30f3\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5"}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{start:"3",children:["\n",(0,r.jsx)(e.li,{children:"\u767a\u884c\u8005URL\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"const issuer = `https://cognito-idp.${region}.amazonaws.com/${userPoolId}`;\n"})}),"\n",(0,r.jsx)(e.h3,{id:"cors\u30a8\u30e9\u30fc",children:"CORS\u30a8\u30e9\u30fc"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": \u30d6\u30e9\u30a6\u30b6\u3067Access-Control-Allow-Origin\u30a8\u30e9\u30fc\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"API Gateway\u3067CORS\u3092\u8a2d\u5b9a\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"const api = new apigateway.HttpApi(this, 'Api', {\n  corsPreflight: {\n    allowOrigins: ['http://localhost:3000', 'https://your-domain.com'],\n    allowMethods: [apigateway.CorsHttpMethod.ANY],\n    allowHeaders: ['Authorization', 'Content-Type'],\n  },\n});\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"OPTIONS\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u51e6\u7406\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u30a4\u30d9\u30f3\u30c8\u51e6\u7406",children:"\u30a4\u30d9\u30f3\u30c8\u51e6\u7406"}),"\n",(0,r.jsx)(e.h3,{id:"\u30a4\u30d9\u30f3\u30c8\u304c\u51e6\u7406\u3055\u308c\u306a\u3044",children:"\u30a4\u30d9\u30f3\u30c8\u304c\u51e6\u7406\u3055\u308c\u306a\u3044"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": DynamoDB Streams\u307e\u305f\u306fSQS\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u30cf\u30f3\u30c9\u30e9\u30fc\u3092\u30c8\u30ea\u30ac\u30fc\u3057\u306a\u3044\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u30a4\u30d9\u30f3\u30c8\u30bd\u30fc\u30b9\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"aws lambda list-event-source-mappings --function-name your-function\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"\u30cf\u30f3\u30c9\u30e9\u30fc\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"@EventHandler(YourEvent)\nexport class YourEventHandler implements IEventHandler<YourEvent> {\n  async execute(event: YourEvent): Promise<void> {\n    // Handler implementation\n  }\n}\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"3",children:["\n",(0,r.jsx)(e.li,{children:"CloudWatch Logs\u3067\u30a8\u30e9\u30fc\u3092\u78ba\u8a8d"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u91cd\u8907\u30a4\u30d9\u30f3\u30c8\u51e6\u7406",children:"\u91cd\u8907\u30a4\u30d9\u30f3\u30c8\u51e6\u7406"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": \u540c\u3058\u30a4\u30d9\u30f3\u30c8\u304c\u8907\u6570\u56de\u51e6\u7406\u3055\u308c\u308b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u51aa\u7b49\u6027\u3092\u5b9f\u88c5\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"// Use a unique identifier to check if already processed (\u4e00\u610f\u306e\u8b58\u5225\u5b50\u3092\u4f7f\u7528\u3057\u3066\u51e6\u7406\u6e08\u307f\u304b\u3092\u78ba\u8a8d)\n// For commands, use pk + sk + version as the idempotency key (\u30b3\u30de\u30f3\u30c9\u306e\u5834\u5408\u3001pk + sk + version\u3092\u51aa\u7b49\u6027\u30ad\u30fc\u3068\u3057\u3066\u4f7f\u7528)\nconst idempotencyKey = `${command.pk}#${command.sk}@${command.version}`;\nif (await this.isProcessed(idempotencyKey)) {\n  return; // Skip duplicate (\u91cd\u8907\u3092\u30b9\u30ad\u30c3\u30d7)\n}\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"SQS\u53ef\u8996\u6027\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u9069\u5207\u306b\u8a2d\u5b9a"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"step-functions",children:"Step Functions"}),"\n",(0,r.jsx)(e.h3,{id:"step-functions\u5b9f\u884c\u306e\u5931\u6557",children:"Step Functions\u5b9f\u884c\u306e\u5931\u6557"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": \u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3\u306e\u5b9f\u884c\u304c\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"AWS\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u5b9f\u884c\u5c65\u6b74\u3092\u78ba\u8a8d\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Step Functions \u2192 \u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3 \u2192 \u5bfe\u8c61\u306e\u30de\u30b7\u30f3 \u306b\u79fb\u52d5"}),"\n",(0,r.jsx)(e.li,{children:"\u5931\u6557\u3057\u305f\u5b9f\u884c\u3092\u30af\u30ea\u30c3\u30af"}),"\n",(0,r.jsx)(e.li,{children:"\u5404\u30b9\u30c6\u30c3\u30d7\u3067\u30a8\u30e9\u30fc\u306e\u8a73\u7d30\u3092\u78ba\u8a8d"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3092\u8ffd\u52a0\uff1a"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:'// Add retry and catch in state machine definition\n{\n  "Retry": [\n    {\n      "ErrorEquals": ["States.TaskFailed"],\n      "IntervalSeconds": 2,\n      "MaxAttempts": 3,\n      "BackoffRate": 2\n    }\n  ],\n  "Catch": [\n    {\n      "ErrorEquals": ["States.ALL"],\n      "Next": "HandleError"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"step-functions\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8",children:"Step Functions\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": \u5b9f\u884c\u304c\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3059\u308b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u30b9\u30c6\u30fc\u30c8\u30de\u30b7\u30f3\u5b9a\u7fa9\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u5ef6\u9577"}),"\n",(0,r.jsx)(e.li,{children:"\u9577\u6642\u9593\u5b9f\u884c\u30bf\u30b9\u30af\u3092\u5c0f\u3055\u306a\u30b9\u30c6\u30c3\u30d7\u306b\u5206\u5272"}),"\n",(0,r.jsx)(e.li,{children:"\u975e\u540c\u671f\u64cd\u4f5c\u306b\u306f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u4ed8\u304d\u306eWait\u72b6\u614b\u3092\u4f7f\u7528"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u30c7\u30d7\u30ed\u30a4\u306e\u554f\u984c",children:"\u30c7\u30d7\u30ed\u30a4\u306e\u554f\u984c"}),"\n",(0,r.jsx)(e.h3,{id:"cdk\u30c7\u30d7\u30ed\u30a4\u306e\u5931\u6557",children:"CDK\u30c7\u30d7\u30ed\u30a4\u306e\u5931\u6557"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": cdk deploy\u304cCloudFormation\u30a8\u30e9\u30fc\u3067\u5931\u6557\u3059\u308b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"CloudFormation\u30a4\u30d9\u30f3\u30c8\u3092\u78ba\u8a8d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"aws cloudformation describe-stack-events --stack-name YourStack\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u3088\u304f\u3042\u308b\u539f\u56e0\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"IAM\u6a29\u9650\u306e\u554f\u984c"}),"\n",(0,r.jsx)(e.li,{children:"\u30ea\u30bd\u30fc\u30b9\u5236\u9650\u8d85\u904e"}),"\n",(0,r.jsx)(e.li,{children:"\u7121\u52b9\u306a\u30ea\u30bd\u30fc\u30b9\u8a2d\u5b9a"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3057\u3066\u4fee\u6b63\uff1a"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"aws cloudformation delete-stack --stack-name YourStack\n# Fix the issue and redeploy\ncdk deploy\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u30ea\u30bd\u30fc\u30b9\u304c\u65e2\u306b\u5b58\u5728\u3059\u308b",children:"\u30ea\u30bd\u30fc\u30b9\u304c\u65e2\u306b\u5b58\u5728\u3059\u308b"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": \u540d\u524dX\u306e\u30ea\u30bd\u30fc\u30b9\u304c\u65e2\u306b\u5b58\u5728\u3059\u308b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u30e6\u30cb\u30fc\u30af\u306a\u547d\u540d\u3092\u4f7f\u7528\uff1a"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"const bucket = new s3.Bucket(this, 'Bucket', {\n  bucketName: `${props.appName}-${props.envName}-${cdk.Aws.ACCOUNT_ID}`,\n});\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"\u307e\u305f\u306fbucketName\u3092\u6307\u5b9a\u305b\u305a\u306bCDK\u306b\u540d\u524d\u3092\u751f\u6210\u3055\u305b\u308b"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u554f\u984c",children:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u554f\u984c"}),"\n",(0,r.jsx)(e.h3,{id:"api\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u9045\u3044",children:"API\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u9045\u3044"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": API\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u3059\u304e\u308b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Lambda\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u6e08\u307f\u540c\u6642\u5b9f\u884c\u3092\u6709\u52b9\u5316"}),"\n",(0,r.jsx)(e.li,{children:"API Gateway\u307e\u305f\u306fDAX\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u5b9f\u88c5"}),"\n",(0,r.jsx)(e.li,{children:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30af\u30a8\u30ea\u3092\u6700\u9069\u5316"}),"\n",(0,r.jsx)(e.li,{children:"RDS\u306b\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30ea\u30f3\u30b0\u3092\u4f7f\u7528"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"lambda\u9ad8\u30b3\u30b9\u30c8",children:"Lambda\u9ad8\u30b3\u30b9\u30c8"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u75c7\u72b6"}),": \u4e88\u60f3\u5916\u306b\u9ad8\u3044Lambda\u8ab2\u91d1\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u547c\u3073\u51fa\u3057\u56de\u6570\u3068\u5b9f\u884c\u6642\u9593\u3092\u78ba\u8a8d"}),"\n",(0,r.jsx)(e.li,{children:"\u30e1\u30e2\u30ea\u5272\u308a\u5f53\u3066\u3092\u6700\u9069\u5316\uff08\u30e1\u30e2\u30ea\u304c\u591a\u3044\uff1d\u5b9f\u884c\u304c\u901f\u3044\uff09"}),"\n",(0,r.jsx)(e.li,{children:"\u30ea\u30af\u30a8\u30b9\u30c8\u30d0\u30c3\u30c1\u30f3\u30b0\u3092\u5b9f\u88c5"}),"\n",(0,r.jsx)(e.li,{children:"\u4e88\u7d04\u6e08\u307f\u540c\u6642\u5b9f\u884c\u3067\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3092\u5236\u9650"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u30d8\u30eb\u30d7\u3092\u5f97\u308b",children:"\u30d8\u30eb\u30d7\u3092\u5f97\u308b"}),"\n",(0,r.jsx)(e.p,{children:"\u3053\u3053\u3067\u89e3\u6c7a\u7b56\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"./debugging-guide",children:"\u30c7\u30d0\u30c3\u30b0\u30ac\u30a4\u30c9"}),"\u3067\u8abf\u67fb\u30c6\u30af\u30cb\u30c3\u30af\u3092\u78ba\u8a8d"]}),"\n",(0,r.jsx)(e.li,{children:"GitHub\u3067\u65e2\u5b58\u306eIssue\u3092\u691c\u7d22"}),"\n",(0,r.jsxs)(e.li,{children:["\u4ee5\u4e0b\u3092\u542b\u3080\u65b0\u3057\u3044Issue\u3092\u4f5c\u6210\uff1a","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u554f\u984c\u306e\u660e\u78ba\u306a\u8aac\u660e"}),"\n",(0,r.jsx)(e.li,{children:"\u518d\u73fe\u624b\u9806"}),"\n",(0,r.jsx)(e.li,{children:"\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u30ed\u30b0"}),"\n",(0,r.jsx)(e.li,{children:"\u74b0\u5883\u306e\u8a73\u7d30\uff08Node\u30d0\u30fc\u30b8\u30e7\u30f3\u3001OS\u306a\u3069\uff09"}),"\n"]}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>d,x:()=>c});var l=s(6540);const r={},i=l.createContext(r);function d(n){const e=l.useContext(i);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),l.createElement(i.Provider,{value:e},n.children)}}}]);