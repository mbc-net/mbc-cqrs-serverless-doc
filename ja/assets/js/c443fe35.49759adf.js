"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[2450],{9310:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"import","title":"Import","description":"MBC CQRS Serverless\u3067CSV\u304a\u3088\u3073ZIP\u30d5\u30a1\u30a4\u30eb\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u305fImportModule\u306b\u3088\u308b\u4e00\u62ec\u30c7\u30fc\u30bf\u30a4\u30f3\u30dd\u30fc\u30c8\u306e\u4f7f\u7528\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/import.md","sourceDirName":".","slug":"/import","permalink":"/ja/docs/import","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"MBC CQRS Serverless\u3067CSV\u304a\u3088\u3073ZIP\u30d5\u30a1\u30a4\u30eb\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u305fImportModule\u306b\u3088\u308b\u4e00\u62ec\u30c7\u30fc\u30bf\u30a4\u30f3\u30dd\u30fc\u30c8\u306e\u4f7f\u7528\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002"},"sidebar":"tutorialSidebar","previous":{"title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30e2\u30b8\u30e5\u30fc\u30eb","permalink":"/ja/docs/directory"},"next":{"title":"\u901a\u77e5\u30e2\u30b8\u30e5\u30fc\u30eb","permalink":"/ja/docs/notification-module"}}');var s=n(4848),i=n(8453);const d={description:"MBC CQRS Serverless\u3067CSV\u304a\u3088\u3073ZIP\u30d5\u30a1\u30a4\u30eb\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u305fImportModule\u306b\u3088\u308b\u4e00\u62ec\u30c7\u30fc\u30bf\u30a4\u30f3\u30dd\u30fc\u30c8\u306e\u4f7f\u7528\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002"},c="Import",o={},l=[{value:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3",id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3",level:2},{value:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb",id:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb",level:2},{value:"\u30e2\u30b8\u30e5\u30fc\u30eb\u767b\u9332",id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u767b\u9332",level:2},{value:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3",id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3",level:2},{value:"\u30b3\u30a2\u30b3\u30f3\u30bb\u30d7\u30c8",id:"\u30b3\u30a2\u30b3\u30f3\u30bb\u30d7\u30c8",level:2},{value:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",id:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",level:3},{value:"\u51e6\u7406\u30e2\u30fc\u30c9",id:"\u51e6\u7406\u30e2\u30fc\u30c9",level:3},{value:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b9\u30c6\u30fc\u30bf\u30b9",id:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b9\u30c6\u30fc\u30bf\u30b9",level:3},{value:"API\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9",id:"api\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9",level:2},{value:"ImportService\u306e\u30e1\u30bd\u30c3\u30c9",id:"importservice\u306e\u30e1\u30bd\u30c3\u30c9",level:3},{value:"<code>createWithApi(dto: CreateImportDto, options): Promise&lt;ImportEntity&gt;</code>",id:"createwithapidto-createimportdto-options-promiseimportentity",level:4},{value:"<code>handleCsvImport(dto: CreateCsvImportDto, options): Promise&lt;ImportEntity[] | ImportEntity&gt;</code>",id:"handlecsvimportdto-createcsvimportdto-options-promiseimportentity--importentity",level:4},{value:"<code>createZipJob(dto: CreateZipImportDto, options): Promise&lt;ImportEntity&gt;</code>",id:"createzipjobdto-createzipimportdto-options-promiseimportentity",level:4},{value:"<code>updateStatus(key: DetailKey, status: string, payload?, attributes?, notifyId?): Promise&lt;void&gt;</code>",id:"updatestatuskey-detailkey-status-string-payload-attributes-notifyid-promisevoid",level:4},{value:"<code>getImportByKey(key: DetailKey): Promise&lt;ImportEntity&gt;</code>",id:"getimportbykeykey-detailkey-promiseimportentity",level:4},{value:"REST API\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",id:"rest-api\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",level:2},{value:"<code>POST /imports</code>",id:"post-imports",level:3},{value:"<code>POST /imports/csv</code>",id:"post-importscsv",level:3},{value:"<code>POST /imports/zip</code>",id:"post-importszip",level:3},{value:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b9\u30c8\u30e9\u30c6\u30b8\u30fc\u306e\u5b9f\u88c5",id:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b9\u30c8\u30e9\u30c6\u30b8\u30fc\u306e\u5b9f\u88c5",level:2},{value:"IImportStrategy\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",id:"iimportstrategy\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",level:3},{value:"BaseImportStrategy\u306e\u4f7f\u7528",id:"baseimportstrategy\u306e\u4f7f\u7528",level:3},{value:"IProcessStrategy\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",id:"iprocessstrategy\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",level:3},{value:"\u6bd4\u8f03\u30b9\u30c6\u30fc\u30bf\u30b9",id:"\u6bd4\u8f03\u30b9\u30c6\u30fc\u30bf\u30b9",level:3},{value:"ProcessStrategy\u306e\u4f8b",id:"processstrategy\u306e\u4f8b",level:3},{value:"ZIP\u30d5\u30a1\u30a4\u30ca\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u30d5\u30c3\u30af",id:"zip\u30d5\u30a1\u30a4\u30ca\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u30d5\u30c3\u30af",level:2},{value:"ZipFinalizationContext",id:"zipfinalizationcontext",level:3},{value:"DTO",id:"dto",level:2},{value:"CreateImportDto",id:"createimportdto",level:3},{value:"CreateCsvImportDto",id:"createcsvimportdto",level:3},{value:"CreateZipImportDto",id:"createzipimportdto",level:3},{value:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",id:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",level:2},{value:"CSV\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f",id:"csv\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f",level:3},{value:"\u5927\u898f\u6a21\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8",id:"\u5927\u898f\u6a21\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8",level:3},{value:"\u30a8\u30e9\u30fc\u51e6\u7406",id:"\u30a8\u30e9\u30fc\u51e6\u7406",level:3},{value:"\u95a2\u9023\u9805\u76ee",id:"\u95a2\u9023\u9805\u76ee",level:2}];function a(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"import",children:"Import"})}),"\n",(0,s.jsx)(t.p,{children:"ImportModule\u306f\u3001MBC CQRS Serverless\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u4e00\u62ec\u30c7\u30fc\u30bf\u30a4\u30f3\u30dd\u30fc\u30c8\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u5358\u4e00\u30ec\u30b3\u30fc\u30c9\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u3001CSV\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u3001\u8907\u6570\u306eCSV\u3092\u542b\u3080ZIP\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.h2,{id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3",children:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3"}),"\n",(0,s.jsx)(t.mermaid,{value:'graph TB\n    subgraph "\u30a4\u30f3\u30dd\u30fc\u30c8\u30d5\u30ed\u30fc"\n        A["ImportController"] --\x3e B["ImportService"]\n        B --\x3e C["ImportStrategy"]\n        C --\x3e D["ProcessStrategy"]\n        D --\x3e E["CommandService"]\n    end\n\n    subgraph "\u51e6\u7406\u30e2\u30fc\u30c9"\n        F["DIRECT"] --\x3e G["\u5373\u6642\u51e6\u7406"]\n        H["STEP_FUNCTION"] --\x3e I["SFN\u7d4c\u7531\u306e\u975e\u540c\u671f\u51e6\u7406"]\n    end\n\n    subgraph "\u30b9\u30c8\u30ec\u30fc\u30b8"\n        J["S3 (CSV/ZIP)"]\n        K["DynamoDB (\u30a4\u30f3\u30dd\u30fc\u30c8\u30b8\u30e7\u30d6)"]\n    end'}),"\n",(0,s.jsx)(t.h2,{id:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb",children:"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npm install @mbc-cqrs-serverless/import\n"})}),"\n",(0,s.jsx)(t.h2,{id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u767b\u9332",children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u767b\u9332"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { ImportModule } from "@mbc-cqrs-serverless/import";\n\n@Module({\n  imports: [\n    ImportModule.register({\n      enableController: true, // \u7d44\u307f\u8fbc\u307fREST\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u6709\u52b9\u5316\n      profiles: [\n        {\n          tableName: "products",\n          importStrategy: ProductImportStrategy,\n          processStrategy: ProductProcessStrategy,\n        },\n      ],\n      imports: [ProductModule], // \u30b9\u30c8\u30e9\u30c6\u30b8\u30fc\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\n      zipFinalizationHooks: [BackupToS3Hook], // \u30aa\u30d7\u30b7\u30e7\u30f3: \u30a4\u30f3\u30dd\u30fc\u30c8\u5f8c\u306e\u30d5\u30c3\u30af\n    }),\n  ],\n})\nexport class AppModule {}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3",children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u30aa\u30d7\u30b7\u30e7\u30f3"}),(0,s.jsx)(t.th,{children:"\u578b"}),(0,s.jsx)(t.th,{children:"\u5fc5\u9808"}),(0,s.jsx)(t.th,{children:"\u8aac\u660e"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"profiles"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"ImportEntityProfile[]"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"\u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30bf\u30a4\u30d7\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u8a2d\u5b9a\u306e\u914d\u5217"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"enableController"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"boolean"})}),(0,s.jsx)(t.td,{children:"\u3044\u3044\u3048"}),(0,s.jsx)(t.td,{children:"\u7d44\u307f\u8fbc\u307f\u306eImportController\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u6709\u52b9\u5316"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"imports"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"ModuleMetadata['imports']"})}),(0,s.jsx)(t.td,{children:"\u3044\u3044\u3048"}),(0,s.jsx)(t.td,{children:"\u30b9\u30c8\u30e9\u30c6\u30b8\u30fc\u30af\u30e9\u30b9\u304c\u5fc5\u8981\u3068\u3059\u308b\u30d7\u30ed\u30d0\u30a4\u30c0\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"zipFinalizationHooks"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Type<IZipFinalizationHook>[]"})}),(0,s.jsx)(t.td,{children:"\u3044\u3044\u3048"}),(0,s.jsx)(t.td,{children:"ZIP\u30a4\u30f3\u30dd\u30fc\u30c8\u5b8c\u4e86\u5f8c\u306b\u5b9f\u884c\u3055\u308c\u308b\u30d5\u30c3\u30af"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"\u30b3\u30a2\u30b3\u30f3\u30bb\u30d7\u30c8",children:"\u30b3\u30a2\u30b3\u30f3\u30bb\u30d7\u30c8"}),"\n",(0,s.jsx)(t.h3,{id:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",children:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb"}),"\n",(0,s.jsx)(t.p,{children:"\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f\u3044\u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30bf\u30a4\u30d7\u306b\u306f\u3001\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\uff1a"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"interface ImportEntityProfile {\n  tableName: string; // \u3053\u306e\u30c7\u30fc\u30bf\u30bf\u30a4\u30d7\u306e\u4e00\u610f\u8b58\u5225\u5b50\n  importStrategy: Type<IImportStrategy<any, any>>; // \u5909\u63db\u3068\u691c\u8a3c\n  processStrategy: Type<IProcessStrategy<any, any>>; // \u6bd4\u8f03\u3068\u30de\u30c3\u30d4\u30f3\u30b0\n}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"\u51e6\u7406\u30e2\u30fc\u30c9",children:"\u51e6\u7406\u30e2\u30fc\u30c9"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u30e2\u30fc\u30c9"}),(0,s.jsx)(t.th,{children:"\u8aac\u660e"}),(0,s.jsx)(t.th,{children:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"DIRECT"})}),(0,s.jsx)(t.td,{children:"\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u3067CSV\u3092\u5373\u5ea7\u306b\u51e6\u7406"}),(0,s.jsx)(t.td,{children:"\u5c0f\u3055\u306a\u30d5\u30a1\u30a4\u30eb\uff08100\u884c\u672a\u6e80\uff09"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"STEP_FUNCTION"})}),(0,s.jsx)(t.td,{children:"AWS Step Functions\u7d4c\u7531\u3067\u975e\u540c\u671f\u51e6\u7406"}),(0,s.jsx)(t.td,{children:"\u5927\u304d\u306a\u30d5\u30a1\u30a4\u30eb\u3001\u672c\u756a\u30a4\u30f3\u30dd\u30fc\u30c8"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b9\u30c6\u30fc\u30bf\u30b9",children:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b9\u30c6\u30fc\u30bf\u30b9"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u30b9\u30c6\u30fc\u30bf\u30b9"}),(0,s.jsx)(t.th,{children:"\u8aac\u660e"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"CREATED"})}),(0,s.jsx)(t.td,{children:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b8\u30e7\u30d6\u304c\u4f5c\u6210\u3055\u308c\u3001\u51e6\u7406\u5f85\u3061"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"QUEUED"})}),(0,s.jsx)(t.td,{children:"\u51e6\u7406\u306e\u305f\u3081\u306b\u30ad\u30e5\u30fc\u306b\u5165\u308c\u3089\u308c\u305f\u30b8\u30e7\u30d6"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"PROCESSING"})}),(0,s.jsx)(t.td,{children:"\u73fe\u5728\u51e6\u7406\u4e2d"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"COMPLETED"})}),(0,s.jsx)(t.td,{children:"\u6b63\u5e38\u306b\u5b8c\u4e86"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"FAILED"})}),(0,s.jsx)(t.td,{children:"\u51e6\u7406\u5931\u6557"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"api\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9",children:"API\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9"}),"\n",(0,s.jsx)(t.h3,{id:"importservice\u306e\u30e1\u30bd\u30c3\u30c9",children:"ImportService\u306e\u30e1\u30bd\u30c3\u30c9"}),"\n",(0,s.jsx)(t.h4,{id:"createwithapidto-createimportdto-options-promiseimportentity",children:(0,s.jsx)(t.code,{children:"createWithApi(dto: CreateImportDto, options): Promise<ImportEntity>"})}),"\n",(0,s.jsx)(t.p,{children:"API\u3092\u4f7f\u7528\u3057\u3066\u5358\u4e00\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u30ec\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u306f\u8a2d\u5b9a\u3055\u308c\u305fImportStrategy\u3092\u4f7f\u7528\u3057\u3066\u5909\u63db\u304a\u3088\u3073\u691c\u8a3c\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'const importEntity = await this.importService.createWithApi(\n  {\n    tableName: "products",\n    tenantCode: "tenant001",\n    attributes: {\n      code: "PROD001",\n      name: "Product One",\n      price: 100,\n    },\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,s.jsx)(t.h4,{id:"handlecsvimportdto-createcsvimportdto-options-promiseimportentity--importentity",children:(0,s.jsx)(t.code,{children:"handleCsvImport(dto: CreateCsvImportDto, options): Promise<ImportEntity[] | ImportEntity>"})}),"\n",(0,s.jsx)(t.p,{children:"CSV\u30a4\u30f3\u30dd\u30fc\u30c8\u306e\u30e1\u30a4\u30f3\u30eb\u30fc\u30bf\u30fc\u3002processingMode\u306b\u57fa\u3065\u3044\u3066\u3001\u76f4\u63a5\u51e6\u7406\u307e\u305f\u306fStep Function\u306b\u59d4\u8b72\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'// DIRECT\u30e2\u30fc\u30c9 - \u4f5c\u6210\u3055\u308c\u305f\u30a4\u30f3\u30dd\u30fc\u30c8\u306e\u914d\u5217\u3092\u8fd4\u3059\nconst imports = await this.importService.handleCsvImport(\n  {\n    processingMode: "DIRECT",\n    bucket: "my-bucket",\n    key: "imports/products.csv",\n    tableName: "products",\n    tenantCode: "tenant001",\n  },\n  { invokeContext }\n);\n\n// STEP_FUNCTION\u30e2\u30fc\u30c9 - \u30de\u30b9\u30bf\u30fc\u30b8\u30e7\u30d6\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u8fd4\u3059\nconst masterJob = await this.importService.handleCsvImport(\n  {\n    processingMode: "STEP_FUNCTION",\n    bucket: "my-bucket",\n    key: "imports/products.csv",\n    tableName: "products",\n    tenantCode: "tenant001",\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,s.jsx)(t.h4,{id:"createzipjobdto-createzipimportdto-options-promiseimportentity",children:(0,s.jsx)(t.code,{children:"createZipJob(dto: CreateZipImportDto, options): Promise<ImportEntity>"})}),"\n",(0,s.jsx)(t.p,{children:"ZIP\u30d5\u30a1\u30a4\u30eb\u30a4\u30f3\u30dd\u30fc\u30c8\u7528\u306e\u30de\u30b9\u30bf\u30fc\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002ZIP\u30d5\u30a1\u30a4\u30eb\u306b\u306f\u8907\u6570\u306eCSV\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'const zipJob = await this.importService.createZipJob(\n  {\n    bucket: "my-bucket",\n    key: "imports/bulk-data.zip",\n    tenantCode: "tenant001",\n    sortedFileKeys: ["products.csv", "categories.csv"], // \u30aa\u30d7\u30b7\u30e7\u30f3: \u51e6\u7406\u9806\u5e8f\u3092\u6307\u5b9a\n    tableName: "products", // \u30aa\u30d7\u30b7\u30e7\u30f3: tableName\u691c\u51fa\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\n  },\n  { invokeContext }\n);\n'})}),"\n",(0,s.jsx)(t.h4,{id:"updatestatuskey-detailkey-status-string-payload-attributes-notifyid-promisevoid",children:(0,s.jsx)(t.code,{children:"updateStatus(key: DetailKey, status: string, payload?, attributes?, notifyId?): Promise<void>"})}),"\n",(0,s.jsx)(t.p,{children:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b8\u30e7\u30d6\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u66f4\u65b0\u3057\u3001SNS\u7d4c\u7531\u3067\u901a\u77e5\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'await this.importService.updateStatus(\n  { pk: "IMPORT#tenant001", sk: "products#01ABC" },\n  "COMPLETED",\n  { result: { recordsProcessed: 100 } }\n);\n'})}),"\n",(0,s.jsx)(t.h4,{id:"getimportbykeykey-detailkey-promiseimportentity",children:(0,s.jsx)(t.code,{children:"getImportByKey(key: DetailKey): Promise<ImportEntity>"})}),"\n",(0,s.jsx)(t.p,{children:"\u30ad\u30fc\u306b\u3088\u3063\u3066\u30a4\u30f3\u30dd\u30fc\u30c8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'const importJob = await this.importService.getImportByKey({\n  pk: "IMPORT#tenant001",\n  sk: "products#01ABC",\n});\n'})}),"\n",(0,s.jsx)(t.h2,{id:"rest-api\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",children:"REST API\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"enableController: true"}),"\u306e\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059\uff1a"]}),"\n",(0,s.jsx)(t.h3,{id:"post-imports",children:(0,s.jsx)(t.code,{children:"POST /imports"})}),"\n",(0,s.jsx)(t.p,{children:"\u5358\u4e00\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u30ec\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "tableName": "products",\n  "tenantCode": "tenant001",\n  "attributes": {\n    "code": "PROD001",\n    "name": "Product One"\n  }\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"\u30ec\u30b9\u30dd\u30f3\u30b9"}),": ",(0,s.jsx)(t.code,{children:"202 Accepted"})]}),"\n",(0,s.jsx)(t.h3,{id:"post-importscsv",children:(0,s.jsx)(t.code,{children:"POST /imports/csv"})}),"\n",(0,s.jsx)(t.p,{children:"CSV\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u3092\u958b\u59cb\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "processingMode": "STEP_FUNCTION",\n  "bucket": "my-bucket",\n  "key": "imports/products.csv",\n  "tableName": "products",\n  "tenantCode": "tenant001"\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"\u30ec\u30b9\u30dd\u30f3\u30b9"}),": ",(0,s.jsx)(t.code,{children:"200 OK"})," (DIRECT) / ",(0,s.jsx)(t.code,{children:"202 Accepted"})," (STEP_FUNCTION)"]}),"\n",(0,s.jsx)(t.h3,{id:"post-importszip",children:(0,s.jsx)(t.code,{children:"POST /imports/zip"})}),"\n",(0,s.jsx)(t.p,{children:"ZIP\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u3092\u958b\u59cb\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "bucket": "my-bucket",\n  "key": "imports/bulk-data.zip",\n  "tenantCode": "tenant001"\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"\u30ec\u30b9\u30dd\u30f3\u30b9"}),": ",(0,s.jsx)(t.code,{children:"202 Accepted"})]}),"\n",(0,s.jsx)(t.h2,{id:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b9\u30c8\u30e9\u30c6\u30b8\u30fc\u306e\u5b9f\u88c5",children:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30b9\u30c8\u30e9\u30c6\u30b8\u30fc\u306e\u5b9f\u88c5"}),"\n",(0,s.jsx)(t.h3,{id:"iimportstrategy\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",children:"IImportStrategy\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9"}),"\n",(0,s.jsx)(t.p,{children:"ImportStrategy\u306f\u30c7\u30fc\u30bf\u306e\u5909\u63db\u3068\u691c\u8a3c\u3092\u51e6\u7406\u3057\u307e\u3059\uff1a"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"interface IImportStrategy<TInput, TAttributesDto> {\n  transform(input: TInput): Promise<TAttributesDto>;\n  validate(data: TAttributesDto): Promise<void>;\n}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"baseimportstrategy\u306e\u4f7f\u7528",children:"BaseImportStrategy\u306e\u4f7f\u7528"}),"\n",(0,s.jsx)(t.p,{children:"\u5171\u901a\u6a5f\u80fd\u306e\u305f\u3081\u306b\u57fa\u5e95\u30af\u30e9\u30b9\u3092\u62e1\u5f35\u3057\u307e\u3059\uff1a"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { BaseImportStrategy } from "@mbc-cqrs-serverless/import";\nimport { Injectable } from "@nestjs/common";\n\n@Injectable()\nexport class ProductImportStrategy extends BaseImportStrategy<\n  CsvProductRow,\n  ProductAttributesDto\n> {\n  async transform(input: CsvProductRow): Promise<ProductAttributesDto> {\n    return {\n      code: input.product_code?.trim(),\n      name: input.product_name?.trim(),\n      price: parseFloat(input.price),\n      category: input.category?.trim(),\n    };\n  }\n\n  // validate()\u306f\u7d99\u627f\u3055\u308c\u307e\u3059 - class-validator\u3092\u4f7f\u7528\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"iprocessstrategy\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",children:"IProcessStrategy\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9"}),"\n",(0,s.jsx)(t.p,{children:"ProcessStrategy\u306f\u65e2\u5b58\u30c7\u30fc\u30bf\u3068\u306e\u6bd4\u8f03\u3068\u30b3\u30de\u30f3\u30c9\u3078\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u51e6\u7406\u3057\u307e\u3059\uff1a"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"interface IProcessStrategy<TEntity, TAttributesDto> {\n  compare(\n    importAttributes: TAttributesDto,\n    tenantCode: string\n  ): Promise<ComparisonResult<TEntity>>;\n\n  map(\n    status: ComparisonStatus,\n    importAttributes: TAttributesDto,\n    tenantCode: string,\n    existingData?: TEntity\n  ): Promise<CommandInputModel | CommandPartialInputModel>;\n\n  getCommandService(): CommandService;\n}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"\u6bd4\u8f03\u30b9\u30c6\u30fc\u30bf\u30b9",children:"\u6bd4\u8f03\u30b9\u30c6\u30fc\u30bf\u30b9"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u30b9\u30c6\u30fc\u30bf\u30b9"}),(0,s.jsx)(t.th,{children:"\u8aac\u660e"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"NOT_EXIST"})}),(0,s.jsx)(t.td,{children:"\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u5b58\u5728\u3057\u306a\u3044 - \u65b0\u898f\u4f5c\u6210"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"CHANGED"})}),(0,s.jsx)(t.td,{children:"\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u5b58\u5728\u3059\u308b\u304c\u5909\u66f4\u3042\u308a - \u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"EQUAL"})}),(0,s.jsx)(t.td,{children:"\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u5b58\u5728\u3057\u540c\u4e00 - \u30b9\u30ad\u30c3\u30d7"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"processstrategy\u306e\u4f8b",children:"ProcessStrategy\u306e\u4f8b"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import {\n  BaseProcessStrategy,\n  ComparisonResult,\n  ComparisonStatus,\n} from "@mbc-cqrs-serverless/import";\nimport { CommandService, DataService } from "@mbc-cqrs-serverless/core";\nimport { Injectable } from "@nestjs/common";\n\n@Injectable()\nexport class ProductProcessStrategy extends BaseProcessStrategy<\n  ProductEntity,\n  ProductAttributesDto\n> {\n  constructor(\n    private readonly dataService: DataService,\n    private readonly commandService: CommandService\n  ) {\n    super();\n  }\n\n  async compare(\n    importAttributes: ProductAttributesDto,\n    tenantCode: string\n  ): Promise<ComparisonResult<ProductEntity>> {\n    const pk = `PRODUCT#${tenantCode}`;\n    const sk = `PRODUCT#${importAttributes.code}`;\n\n    const existing = await this.dataService.getItem({ pk, sk });\n\n    if (!existing) {\n      return { status: ComparisonStatus.NOT_EXIST };\n    }\n\n    // \u95a2\u9023\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6bd4\u8f03\n    if (\n      existing.name !== importAttributes.name ||\n      existing.attributes?.price !== importAttributes.price\n    ) {\n      return { status: ComparisonStatus.CHANGED, existingData: existing };\n    }\n\n    return { status: ComparisonStatus.EQUAL };\n  }\n\n  async map(\n    status: ComparisonStatus,\n    importAttributes: ProductAttributesDto,\n    tenantCode: string,\n    existingData?: ProductEntity\n  ) {\n    const pk = `PRODUCT#${tenantCode}`;\n    const sk = `PRODUCT#${importAttributes.code}`;\n\n    if (status === ComparisonStatus.NOT_EXIST) {\n      return {\n        pk,\n        sk,\n        code: importAttributes.code,\n        name: importAttributes.name,\n        tenantCode,\n        type: "PRODUCT",\n        attributes: { price: importAttributes.price },\n      };\n    }\n\n    // \u65e2\u5b58\u3092\u66f4\u65b0\n    return {\n      pk,\n      sk,\n      name: importAttributes.name,\n      version: existingData.version,\n      attributes: {\n        ...existingData.attributes,\n        price: importAttributes.price,\n      },\n    };\n  }\n\n  getCommandService(): CommandService {\n    return this.commandService;\n  }\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"zip\u30d5\u30a1\u30a4\u30ca\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u30d5\u30c3\u30af",children:"ZIP\u30d5\u30a1\u30a4\u30ca\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u30d5\u30c3\u30af"}),"\n",(0,s.jsx)(t.p,{children:"\u30d5\u30c3\u30af\u306fZIP\u30a4\u30f3\u30dd\u30fc\u30c8\u5b8c\u4e86\u5f8c\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u5f8c\u51e6\u7406\u30bf\u30b9\u30af\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { IZipFinalizationHook, ZipFinalizationContext } from "@mbc-cqrs-serverless/import";\nimport { S3Service } from "@mbc-cqrs-serverless/core";\nimport { Injectable } from "@nestjs/common";\n\n@Injectable()\nexport class BackupToS3Hook implements IZipFinalizationHook {\n  constructor(private readonly s3Service: S3Service) {}\n\n  async execute(context: ZipFinalizationContext): Promise<void> {\n    const { executionInput, status, results } = context;\n    const { bucket, key } = executionInput.parameters;\n\n    if (status === "COMPLETED") {\n      // \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u5834\u6240\u306b\u79fb\u52d5\n      const backupKey = `backup/${new Date().toISOString()}/${key}`;\n      await this.s3Service.copyObject({\n        sourceBucket: bucket,\n        sourceKey: key,\n        destinationBucket: bucket,\n        destinationKey: backupKey,\n      });\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"zipfinalizationcontext",children:"ZipFinalizationContext"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u30d7\u30ed\u30d1\u30c6\u30a3"}),(0,s.jsx)(t.th,{children:"\u578b"}),(0,s.jsx)(t.th,{children:"\u8aac\u660e"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"event"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"ZipImportSfnEvent"})}),(0,s.jsx)(t.td,{children:"\u5143\u306eStep Function\u30a4\u30d9\u30f3\u30c8"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"masterJobKey"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"DetailKey"})}),(0,s.jsx)(t.td,{children:"\u30de\u30b9\u30bf\u30fcZIP\u30b8\u30e7\u30d6\u306e\u30ad\u30fc"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"results"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"object"})}),(0,s.jsx)(t.td,{children:"\u96c6\u8a08\u7d50\u679c\uff08totalRows\u3001processedRows\u3001failedRows\uff09"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"status"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"ImportStatusEnum"})}),(0,s.jsx)(t.td,{children:"\u30b8\u30e7\u30d6\u306e\u6700\u7d42\u30b9\u30c6\u30fc\u30bf\u30b9"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"executionInput"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"any"})}),(0,s.jsx)(t.td,{children:"\u5143\u306eStep Functions\u5b9f\u884c\u5165\u529b"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"dto",children:"DTO"}),"\n",(0,s.jsx)(t.h3,{id:"createimportdto",children:"CreateImportDto"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u30d7\u30ed\u30d1\u30c6\u30a3"}),(0,s.jsx)(t.th,{children:"\u578b"}),(0,s.jsx)(t.th,{children:"\u5fc5\u9808"}),(0,s.jsx)(t.th,{children:"\u8aac\u660e"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tableName"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"\u30bf\u30fc\u30b2\u30c3\u30c8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30bf\u30a4\u30d7"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tenantCode"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"\u30c6\u30ca\u30f3\u30c8\u30b3\u30fc\u30c9"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"attributes"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"object"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30c7\u30fc\u30bf\u306e\u5c5e\u6027"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"sourceId"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u3044\u3044\u3048"}),(0,s.jsx)(t.td,{children:"\u30bd\u30fc\u30b9\u8b58\u5225\u5b50"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"name"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u3044\u3044\u3048"}),(0,s.jsx)(t.td,{children:"\u30a4\u30f3\u30dd\u30fc\u30c8\u306e\u8868\u793a\u540d"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"createcsvimportdto",children:"CreateCsvImportDto"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u30d7\u30ed\u30d1\u30c6\u30a3"}),(0,s.jsx)(t.th,{children:"\u578b"}),(0,s.jsx)(t.th,{children:"\u5fc5\u9808"}),(0,s.jsx)(t.th,{children:"\u8aac\u660e"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"processingMode"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"'DIRECT' | 'STEP_FUNCTION'"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"CSV\u306e\u51e6\u7406\u65b9\u6cd5"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"bucket"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"S3\u30d0\u30b1\u30c3\u30c8\u540d"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"key"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"S3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30ad\u30fc"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tableName"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"\u30bf\u30fc\u30b2\u30c3\u30c8\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30bf\u30a4\u30d7"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tenantCode"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"\u30c6\u30ca\u30f3\u30c8\u30b3\u30fc\u30c9"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"createzipimportdto",children:"CreateZipImportDto"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u30d7\u30ed\u30d1\u30c6\u30a3"}),(0,s.jsx)(t.th,{children:"\u578b"}),(0,s.jsx)(t.th,{children:"\u5fc5\u9808"}),(0,s.jsx)(t.th,{children:"\u8aac\u660e"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"bucket"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"S3\u30d0\u30b1\u30c3\u30c8\u540d"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"key"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"S3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30ad\u30fc"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tenantCode"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u306f\u3044"}),(0,s.jsx)(t.td,{children:"\u30c6\u30ca\u30f3\u30c8\u30b3\u30fc\u30c9"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"sortedFileKeys"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string[]"})}),(0,s.jsx)(t.td,{children:"\u3044\u3044\u3048"}),(0,s.jsx)(t.td,{children:"\u3053\u306e\u9806\u5e8f\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u51e6\u7406"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tableName"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"string"})}),(0,s.jsx)(t.td,{children:"\u3044\u3044\u3048"}),(0,s.jsx)(t.td,{children:"\u81ea\u52d5\u691c\u51fa\u3055\u308c\u305ftableName\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",children:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9"}),"\n",(0,s.jsx)(t.h3,{id:"csv\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f",children:"CSV\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"UTF-8\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u4f7f\u7528"}),"\n",(0,s.jsx)(t.li,{children:"\u5217\u540d\u3092\u542b\u3080\u30d8\u30c3\u30c0\u30fc\u884c\u3092\u542b\u3081\u308b"}),"\n",(0,s.jsx)(t.li,{children:"\u5217\u540d\u306f\u81ea\u52d5\u7684\u306b\u30c8\u30ea\u30e0\u3055\u308c\u307e\u3059"}),"\n",(0,s.jsx)(t.li,{children:"\u5024\u306f\u81ea\u52d5\u7684\u306b\u30c8\u30ea\u30e0\u3055\u308c\u307e\u3059"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"\u5927\u898f\u6a21\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8",children:"\u5927\u898f\u6a21\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["100\u884c\u4ee5\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u306f",(0,s.jsx)(t.code,{children:"STEP_FUNCTION"}),"\u30e2\u30fc\u30c9\u3092\u4f7f\u7528"]}),"\n",(0,s.jsx)(t.li,{children:"SNS\u901a\u77e5\u3067\u9032\u884c\u72b6\u6cc1\u3092\u76e3\u8996"}),"\n",(0,s.jsx)(t.li,{children:"\u9806\u5e8f\u3069\u304a\u308a\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u95a2\u9023\u30c7\u30fc\u30bf\u306b\u306fZIP\u30a4\u30f3\u30dd\u30fc\u30c8\u3092\u4f7f\u7528"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"\u30a8\u30e9\u30fc\u51e6\u7406",children:"\u30a8\u30e9\u30fc\u51e6\u7406"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"\u7121\u52b9\u306a\u884c\u306fCSV\u51e6\u7406\u3067\u30ed\u30b0\u306b\u8a18\u9332\u3055\u308c\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u307e\u3059"}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"failedRows"}),"\u30ab\u30a6\u30f3\u30bf\u30fc\u3092\u4f7f\u7528\u3057\u3066\u5931\u6557\u3092\u8ffd\u8de1"]}),"\n",(0,s.jsx)(t.li,{children:"API\u307e\u305f\u306f\u901a\u77e5\u3067\u30a4\u30f3\u30dd\u30fc\u30c8\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"\u95a2\u9023\u9805\u76ee",children:"\u95a2\u9023\u9805\u76ee"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"./import-export-patterns",children:"\u30a4\u30f3\u30dd\u30fc\u30c8/\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30d1\u30bf\u30fc\u30f3"})," - \u30c7\u30fc\u30bf\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u3068\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306e\u4e00\u822c\u7684\u306a\u30d1\u30bf\u30fc\u30f3"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"./command-service",children:"\u30b3\u30de\u30f3\u30c9\u30b5\u30fc\u30d3\u30b9"})," - ProcessStrategy\u3067\u4f7f\u7528\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u64cd\u4f5c"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"./architecture/step-functions",children:"Step Functions"})," - \u975e\u540c\u671f\u51e6\u7406\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>c});var r=n(6540);const s={},i=r.createContext(s);function d(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);